(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))f(p);new MutationObserver(p=>{for(const u of p)if(u.type==="childList")for(const x of u.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&f(x)}).observe(document,{childList:!0,subtree:!0});function o(p){const u={};return p.integrity&&(u.integrity=p.integrity),p.referrerPolicy&&(u.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?u.credentials="include":p.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function f(p){if(p.ep)return;p.ep=!0;const u=o(p);fetch(p.href,u)}})();function Kc(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var oi={exports:{}},js={},ii={exports:{}},Ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ec;function o0(){if(Ec)return Ne;Ec=1;var c=Symbol.for("react.element"),d=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),x=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),$=Symbol.for("react.lazy"),L=Symbol.iterator;function z(w){return w===null||typeof w!="object"?null:(w=L&&w[L]||w["@@iterator"],typeof w=="function"?w:null)}var re={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},se=Object.assign,H={};function R(w,O,xe){this.props=w,this.context=O,this.refs=H,this.updater=xe||re}R.prototype.isReactComponent={},R.prototype.setState=function(w,O){if(typeof w!="object"&&typeof w!="function"&&w!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,w,O,"setState")},R.prototype.forceUpdate=function(w){this.updater.enqueueForceUpdate(this,w,"forceUpdate")};function ie(){}ie.prototype=R.prototype;function he(w,O,xe){this.props=w,this.context=O,this.refs=H,this.updater=xe||re}var de=he.prototype=new ie;de.constructor=he,se(de,R.prototype),de.isPureReactComponent=!0;var oe=Array.isArray,K=Object.prototype.hasOwnProperty,Q={current:null},Se={key:!0,ref:!0,__self:!0,__source:!0};function P(w,O,xe){var B,q={},J=null,ye=null;if(O!=null)for(B in O.ref!==void 0&&(ye=O.ref),O.key!==void 0&&(J=""+O.key),O)K.call(O,B)&&!Se.hasOwnProperty(B)&&(q[B]=O[B]);var T=arguments.length-2;if(T===1)q.children=xe;else if(1<T){for(var ve=Array(T),$e=0;$e<T;$e++)ve[$e]=arguments[$e+2];q.children=ve}if(w&&w.defaultProps)for(B in T=w.defaultProps,T)q[B]===void 0&&(q[B]=T[B]);return{$$typeof:c,type:w,key:J,ref:ye,props:q,_owner:Q.current}}function be(w,O){return{$$typeof:c,type:w.type,key:O,ref:w.ref,props:w.props,_owner:w._owner}}function ge(w){return typeof w=="object"&&w!==null&&w.$$typeof===c}function je(w){var O={"=":"=0",":":"=2"};return"$"+w.replace(/[=:]/g,function(xe){return O[xe]})}var Pe=/\/+/g;function Me(w,O){return typeof w=="object"&&w!==null&&w.key!=null?je(""+w.key):O.toString(36)}function Te(w,O,xe,B,q){var J=typeof w;(J==="undefined"||J==="boolean")&&(w=null);var ye=!1;if(w===null)ye=!0;else switch(J){case"string":case"number":ye=!0;break;case"object":switch(w.$$typeof){case c:case d:ye=!0}}if(ye)return ye=w,q=q(ye),w=B===""?"."+Me(ye,0):B,oe(q)?(xe="",w!=null&&(xe=w.replace(Pe,"$&/")+"/"),Te(q,O,xe,"",function($e){return $e})):q!=null&&(ge(q)&&(q=be(q,xe+(!q.key||ye&&ye.key===q.key?"":(""+q.key).replace(Pe,"$&/")+"/")+w)),O.push(q)),1;if(ye=0,B=B===""?".":B+":",oe(w))for(var T=0;T<w.length;T++){J=w[T];var ve=B+Me(J,T);ye+=Te(J,O,xe,ve,q)}else if(ve=z(w),typeof ve=="function")for(w=ve.call(w),T=0;!(J=w.next()).done;)J=J.value,ve=B+Me(J,T++),ye+=Te(J,O,xe,ve,q);else if(J==="object")throw O=String(w),Error("Objects are not valid as a React child (found: "+(O==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":O)+"). If you meant to render a collection of children, use an array instead.");return ye}function Oe(w,O,xe){if(w==null)return w;var B=[],q=0;return Te(w,B,"","",function(J){return O.call(xe,J,q++)}),B}function ze(w){if(w._status===-1){var O=w._result;O=O(),O.then(function(xe){(w._status===0||w._status===-1)&&(w._status=1,w._result=xe)},function(xe){(w._status===0||w._status===-1)&&(w._status=2,w._result=xe)}),w._status===-1&&(w._status=0,w._result=O)}if(w._status===1)return w._result.default;throw w._result}var Ce={current:null},W={transition:null},ee={ReactCurrentDispatcher:Ce,ReactCurrentBatchConfig:W,ReactCurrentOwner:Q};function G(){throw Error("act(...) is not supported in production builds of React.")}return Ne.Children={map:Oe,forEach:function(w,O,xe){Oe(w,function(){O.apply(this,arguments)},xe)},count:function(w){var O=0;return Oe(w,function(){O++}),O},toArray:function(w){return Oe(w,function(O){return O})||[]},only:function(w){if(!ge(w))throw Error("React.Children.only expected to receive a single React element child.");return w}},Ne.Component=R,Ne.Fragment=o,Ne.Profiler=p,Ne.PureComponent=he,Ne.StrictMode=f,Ne.Suspense=E,Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ee,Ne.act=G,Ne.cloneElement=function(w,O,xe){if(w==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+w+".");var B=se({},w.props),q=w.key,J=w.ref,ye=w._owner;if(O!=null){if(O.ref!==void 0&&(J=O.ref,ye=Q.current),O.key!==void 0&&(q=""+O.key),w.type&&w.type.defaultProps)var T=w.type.defaultProps;for(ve in O)K.call(O,ve)&&!Se.hasOwnProperty(ve)&&(B[ve]=O[ve]===void 0&&T!==void 0?T[ve]:O[ve])}var ve=arguments.length-2;if(ve===1)B.children=xe;else if(1<ve){T=Array(ve);for(var $e=0;$e<ve;$e++)T[$e]=arguments[$e+2];B.children=T}return{$$typeof:c,type:w.type,key:q,ref:J,props:B,_owner:ye}},Ne.createContext=function(w){return w={$$typeof:x,_currentValue:w,_currentValue2:w,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},w.Provider={$$typeof:u,_context:w},w.Consumer=w},Ne.createElement=P,Ne.createFactory=function(w){var O=P.bind(null,w);return O.type=w,O},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(w){return{$$typeof:m,render:w}},Ne.isValidElement=ge,Ne.lazy=function(w){return{$$typeof:$,_payload:{_status:-1,_result:w},_init:ze}},Ne.memo=function(w,O){return{$$typeof:_,type:w,compare:O===void 0?null:O}},Ne.startTransition=function(w){var O=W.transition;W.transition={};try{w()}finally{W.transition=O}},Ne.unstable_act=G,Ne.useCallback=function(w,O){return Ce.current.useCallback(w,O)},Ne.useContext=function(w){return Ce.current.useContext(w)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(w){return Ce.current.useDeferredValue(w)},Ne.useEffect=function(w,O){return Ce.current.useEffect(w,O)},Ne.useId=function(){return Ce.current.useId()},Ne.useImperativeHandle=function(w,O,xe){return Ce.current.useImperativeHandle(w,O,xe)},Ne.useInsertionEffect=function(w,O){return Ce.current.useInsertionEffect(w,O)},Ne.useLayoutEffect=function(w,O){return Ce.current.useLayoutEffect(w,O)},Ne.useMemo=function(w,O){return Ce.current.useMemo(w,O)},Ne.useReducer=function(w,O,xe){return Ce.current.useReducer(w,O,xe)},Ne.useRef=function(w){return Ce.current.useRef(w)},Ne.useState=function(w){return Ce.current.useState(w)},Ne.useSyncExternalStore=function(w,O,xe){return Ce.current.useSyncExternalStore(w,O,xe)},Ne.useTransition=function(){return Ce.current.useTransition()},Ne.version="18.3.1",Ne}var _c;function gi(){return _c||(_c=1,ii.exports=o0()),ii.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $c;function i0(){if($c)return js;$c=1;var c=gi(),d=Symbol.for("react.element"),o=Symbol.for("react.fragment"),f=Object.prototype.hasOwnProperty,p=c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function x(m,E,_){var $,L={},z=null,re=null;_!==void 0&&(z=""+_),E.key!==void 0&&(z=""+E.key),E.ref!==void 0&&(re=E.ref);for($ in E)f.call(E,$)&&!u.hasOwnProperty($)&&(L[$]=E[$]);if(m&&m.defaultProps)for($ in E=m.defaultProps,E)L[$]===void 0&&(L[$]=E[$]);return{$$typeof:d,type:m,key:z,ref:re,props:L,_owner:p.current}}return js.Fragment=o,js.jsx=x,js.jsxs=x,js}var kc;function u0(){return kc||(kc=1,oi.exports=i0()),oi.exports}var l=u0(),y=gi();const c0=Kc(y);var _a={},ui={exports:{}},Lt={},ci={exports:{}},di={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tc;function d0(){return Tc||(Tc=1,(function(c){function d(W,ee){var G=W.length;W.push(ee);e:for(;0<G;){var w=G-1>>>1,O=W[w];if(0<p(O,ee))W[w]=ee,W[G]=O,G=w;else break e}}function o(W){return W.length===0?null:W[0]}function f(W){if(W.length===0)return null;var ee=W[0],G=W.pop();if(G!==ee){W[0]=G;e:for(var w=0,O=W.length,xe=O>>>1;w<xe;){var B=2*(w+1)-1,q=W[B],J=B+1,ye=W[J];if(0>p(q,G))J<O&&0>p(ye,q)?(W[w]=ye,W[J]=G,w=J):(W[w]=q,W[B]=G,w=B);else if(J<O&&0>p(ye,G))W[w]=ye,W[J]=G,w=J;else break e}}return ee}function p(W,ee){var G=W.sortIndex-ee.sortIndex;return G!==0?G:W.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;c.unstable_now=function(){return u.now()}}else{var x=Date,m=x.now();c.unstable_now=function(){return x.now()-m}}var E=[],_=[],$=1,L=null,z=3,re=!1,se=!1,H=!1,R=typeof setTimeout=="function"?setTimeout:null,ie=typeof clearTimeout=="function"?clearTimeout:null,he=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function de(W){for(var ee=o(_);ee!==null;){if(ee.callback===null)f(_);else if(ee.startTime<=W)f(_),ee.sortIndex=ee.expirationTime,d(E,ee);else break;ee=o(_)}}function oe(W){if(H=!1,de(W),!se)if(o(E)!==null)se=!0,ze(K);else{var ee=o(_);ee!==null&&Ce(oe,ee.startTime-W)}}function K(W,ee){se=!1,H&&(H=!1,ie(P),P=-1),re=!0;var G=z;try{for(de(ee),L=o(E);L!==null&&(!(L.expirationTime>ee)||W&&!je());){var w=L.callback;if(typeof w=="function"){L.callback=null,z=L.priorityLevel;var O=w(L.expirationTime<=ee);ee=c.unstable_now(),typeof O=="function"?L.callback=O:L===o(E)&&f(E),de(ee)}else f(E);L=o(E)}if(L!==null)var xe=!0;else{var B=o(_);B!==null&&Ce(oe,B.startTime-ee),xe=!1}return xe}finally{L=null,z=G,re=!1}}var Q=!1,Se=null,P=-1,be=5,ge=-1;function je(){return!(c.unstable_now()-ge<be)}function Pe(){if(Se!==null){var W=c.unstable_now();ge=W;var ee=!0;try{ee=Se(!0,W)}finally{ee?Me():(Q=!1,Se=null)}}else Q=!1}var Me;if(typeof he=="function")Me=function(){he(Pe)};else if(typeof MessageChannel<"u"){var Te=new MessageChannel,Oe=Te.port2;Te.port1.onmessage=Pe,Me=function(){Oe.postMessage(null)}}else Me=function(){R(Pe,0)};function ze(W){Se=W,Q||(Q=!0,Me())}function Ce(W,ee){P=R(function(){W(c.unstable_now())},ee)}c.unstable_IdlePriority=5,c.unstable_ImmediatePriority=1,c.unstable_LowPriority=4,c.unstable_NormalPriority=3,c.unstable_Profiling=null,c.unstable_UserBlockingPriority=2,c.unstable_cancelCallback=function(W){W.callback=null},c.unstable_continueExecution=function(){se||re||(se=!0,ze(K))},c.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):be=0<W?Math.floor(1e3/W):5},c.unstable_getCurrentPriorityLevel=function(){return z},c.unstable_getFirstCallbackNode=function(){return o(E)},c.unstable_next=function(W){switch(z){case 1:case 2:case 3:var ee=3;break;default:ee=z}var G=z;z=ee;try{return W()}finally{z=G}},c.unstable_pauseExecution=function(){},c.unstable_requestPaint=function(){},c.unstable_runWithPriority=function(W,ee){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var G=z;z=W;try{return ee()}finally{z=G}},c.unstable_scheduleCallback=function(W,ee,G){var w=c.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?w+G:w):G=w,W){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=G+O,W={id:$++,callback:ee,priorityLevel:W,startTime:G,expirationTime:O,sortIndex:-1},G>w?(W.sortIndex=G,d(_,W),o(E)===null&&W===o(_)&&(H?(ie(P),P=-1):H=!0,Ce(oe,G-w))):(W.sortIndex=O,d(E,W),se||re||(se=!0,ze(K))),W},c.unstable_shouldYield=je,c.unstable_wrapCallback=function(W){var ee=z;return function(){var G=z;z=ee;try{return W.apply(this,arguments)}finally{z=G}}}})(di)),di}var Rc;function f0(){return Rc||(Rc=1,ci.exports=d0()),ci.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lc;function m0(){if(Lc)return Lt;Lc=1;var c=gi(),d=f0();function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f=new Set,p={};function u(e,t){x(e,t),x(e+"Capture",t)}function x(e,t){for(p[e]=t,e=0;e<t.length;e++)f.add(t[e])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),E=Object.prototype.hasOwnProperty,_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$={},L={};function z(e){return E.call(L,e)?!0:E.call($,e)?!1:_.test(e)?L[e]=!0:($[e]=!0,!1)}function re(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function se(e,t,n,r){if(t===null||typeof t>"u"||re(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function H(e,t,n,r,s,a,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var R={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){R[e]=new H(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];R[t]=new H(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){R[e]=new H(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){R[e]=new H(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){R[e]=new H(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){R[e]=new H(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){R[e]=new H(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){R[e]=new H(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){R[e]=new H(e,5,!1,e.toLowerCase(),null,!1,!1)});var ie=/[\-:]([a-z])/g;function he(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ie,he);R[t]=new H(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ie,he);R[t]=new H(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ie,he);R[t]=new H(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){R[e]=new H(e,1,!1,e.toLowerCase(),null,!1,!1)}),R.xlinkHref=new H("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){R[e]=new H(e,1,!1,e.toLowerCase(),null,!0,!0)});function de(e,t,n,r){var s=R.hasOwnProperty(t)?R[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(se(t,n,s,r)&&(n=null),r||s===null?z(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var oe=c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,K=Symbol.for("react.element"),Q=Symbol.for("react.portal"),Se=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),be=Symbol.for("react.profiler"),ge=Symbol.for("react.provider"),je=Symbol.for("react.context"),Pe=Symbol.for("react.forward_ref"),Me=Symbol.for("react.suspense"),Te=Symbol.for("react.suspense_list"),Oe=Symbol.for("react.memo"),ze=Symbol.for("react.lazy"),Ce=Symbol.for("react.offscreen"),W=Symbol.iterator;function ee(e){return e===null||typeof e!="object"?null:(e=W&&e[W]||e["@@iterator"],typeof e=="function"?e:null)}var G=Object.assign,w;function O(e){if(w===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);w=t&&t[1]||""}return`
`+w+e}var xe=!1;function B(e,t){if(!e||xe)return"";xe=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(C){var r=C}Reflect.construct(e,[],t)}else{try{t.call()}catch(C){r=C}e.call(t.prototype)}else{try{throw Error()}catch(C){r=C}e()}}catch(C){if(C&&r&&typeof C.stack=="string"){for(var s=C.stack.split(`
`),a=r.stack.split(`
`),i=s.length-1,h=a.length-1;1<=i&&0<=h&&s[i]!==a[h];)h--;for(;1<=i&&0<=h;i--,h--)if(s[i]!==a[h]){if(i!==1||h!==1)do if(i--,h--,0>h||s[i]!==a[h]){var g=`
`+s[i].replace(" at new "," at ");return e.displayName&&g.includes("<anonymous>")&&(g=g.replace("<anonymous>",e.displayName)),g}while(1<=i&&0<=h);break}}}finally{xe=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?O(e):""}function q(e){switch(e.tag){case 5:return O(e.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1),e;case 11:return e=B(e.type.render,!1),e;case 1:return e=B(e.type,!0),e;default:return""}}function J(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Se:return"Fragment";case Q:return"Portal";case be:return"Profiler";case P:return"StrictMode";case Me:return"Suspense";case Te:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case je:return(e.displayName||"Context")+".Consumer";case ge:return(e._context.displayName||"Context")+".Provider";case Pe:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Oe:return t=e.displayName||null,t!==null?t:J(e.type)||"Memo";case ze:t=e._payload,e=e._init;try{return J(e(t))}catch{}}return null}function ye(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return J(t);case 8:return t===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function T(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ve(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function $e(e){var t=ve(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(i){r=""+i,a.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function At(e){e._valueTracker||(e._valueTracker=$e(e))}function Rn(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ve(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function qe(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function rr(e,t){var n=t.checked;return G({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function rt(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=T(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function hn(e,t){t=t.checked,t!=null&&de(e,"checked",t,!1)}function Ln(e,t){hn(e,t);var n=T(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?gn(e,t.type,n):t.hasOwnProperty("defaultValue")&&gn(e,t.type,T(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Pn(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function gn(e,t,n){(t!=="number"||qe(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Pt=Array.isArray;function et(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+T(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function ut(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(o(91));return G({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function lt(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(o(92));if(Pt(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:T(n)}}function Ft(e,t){var n=T(t.value),r=T(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function tn(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function xn(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lr(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?xn(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var On,Mn=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(On=On||document.createElement("div"),On.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=On.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function zn(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var In={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sr=["Webkit","ms","Moz","O"];Object.keys(In).forEach(function(e){sr.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),In[t]=In[e]})});function Er(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||In.hasOwnProperty(e)&&In[e]?(""+t).trim():t+"px"}function Ut(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Er(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var nn=G({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yn(e,t){if(t){if(nn[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(o(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(o(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(t.style!=null&&typeof t.style!="object")throw Error(o(62))}}function Bt(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var An=null;function Fn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var rn=null,We=null,yt=null;function Ct(e){if(e=os(e)){if(typeof rn!="function")throw Error(o(280));var t=e.stateNode;t&&(t=Ws(t),rn(e.stateNode,e.type,t))}}function Et(e){We?yt?yt.push(e):yt=[e]:We=e}function ar(){if(We){var e=We,t=yt;if(yt=We=null,Ct(e),t)for(e=0;e<t.length;e++)Ct(t[e])}}function Wt(e,t){return e(t)}function vn(){}var Vt=!1;function _r(e,t,n){if(Vt)return e(t,n);Vt=!0;try{return Wt(e,t,n)}finally{Vt=!1,(We!==null||yt!==null)&&(vn(),ar())}}function bn(e,t){var n=e.stateNode;if(n===null)return null;var r=Ws(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(o(231,t,typeof n));return n}var or=!1;if(m)try{var wn={};Object.defineProperty(wn,"passive",{get:function(){or=!0}}),window.addEventListener("test",wn,wn),window.removeEventListener("test",wn,wn)}catch{or=!1}function Al(e,t,n,r,s,a,i,h,g){var C=Array.prototype.slice.call(arguments,3);try{t.apply(n,C)}catch(A){this.onError(A)}}var Un=!1,Bn=null,Wn=!1,ir=null,Jr={onError:function(e){Un=!0,Bn=e}};function Xr(e,t,n,r,s,a,i,h,g){Un=!1,Bn=null,Al.apply(Jr,arguments)}function $r(e,t,n,r,s,a,i,h,g){if(Xr.apply(this,arguments),Un){if(Un){var C=Bn;Un=!1,Bn=null}else throw Error(o(198));Wn||(Wn=!0,ir=C)}}function Ht(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function kr(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Fl(e){if(Ht(e)!==e)throw Error(o(188))}function qr(e){var t=e.alternate;if(!t){if(t=Ht(e),t===null)throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var a=s.alternate;if(a===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return Fl(s),e;if(a===r)return Fl(s),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=s,r=a;else{for(var i=!1,h=s.child;h;){if(h===n){i=!0,n=s,r=a;break}if(h===r){i=!0,r=s,n=a;break}h=h.sibling}if(!i){for(h=a.child;h;){if(h===n){i=!0,n=a,r=s;break}if(h===r){i=!0,r=a,n=s;break}h=h.sibling}if(!i)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(n.tag!==3)throw Error(o(188));return n.stateNode.current===n?e:t}function ln(e){return e=qr(e),e!==null?Zr(e):null}function Zr(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Zr(e);if(t!==null)return t;e=e.sibling}return null}var Dr=d.unstable_scheduleCallback,el=d.unstable_cancelCallback,Ul=d.unstable_shouldYield,F=d.unstable_requestPaint,pe=d.unstable_now,Re=d.unstable_getCurrentPriorityLevel,Ie=d.unstable_ImmediatePriority,Fe=d.unstable_UserBlockingPriority,Ze=d.unstable_NormalPriority,vt=d.unstable_LowPriority,Tr=d.unstable_IdlePriority,jn=null,bt=null;function Vn(e){if(bt&&typeof bt.onCommitFiberRoot=="function")try{bt.onCommitFiberRoot(jn,e,void 0,(e.current.flags&128)===128)}catch{}}var st=Math.clz32?Math.clz32:Hn,Pa=Math.log,Ss=Math.LN2;function Hn(e){return e>>>=0,e===0?32:31-(Pa(e)/Ss|0)|0}var Qn=64,ur=4194304;function Qt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Kt(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,a=e.pingedLanes,i=n&268435455;if(i!==0){var h=i&~s;h!==0?r=Qt(h):(a&=i,a!==0&&(r=Qt(a)))}else i=n&~s,i!==0?r=Qt(i):a!==0&&(r=Qt(a));if(r===0)return 0;if(t!==0&&t!==r&&(t&s)===0&&(s=r&-r,a=t&-t,s>=a||s===16&&(a&4194240)!==0))return t;if((r&4)!==0&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-st(t),s=1<<n,r|=e[n],t&=~s;return r}function Bl(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wl(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-st(a),h=1<<i,g=s[i];g===-1?((h&n)===0||(h&r)!==0)&&(s[i]=Bl(h,t)):g<=t&&(e.expiredLanes|=h),a&=~h}}function Rr(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function tl(){var e=Qn;return Qn<<=1,(Qn&4194240)===0&&(Qn=64),e}function Lr(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function sn(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-st(t),e[t]=n}function Cs(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-st(n),a=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~a}}function nl(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var ue=0;function rl(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Es,cr,ll,sl,_s,Vl=!1,al=[],Ot=null,Gt=null,Nn=null,Sn=new Map,wt=new Map,Cn=[],$s="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ks(e,t){switch(e){case"focusin":case"focusout":Ot=null;break;case"dragenter":case"dragleave":Gt=null;break;case"mouseover":case"mouseout":Nn=null;break;case"pointerover":case"pointerout":Sn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":wt.delete(t.pointerId)}}function an(e,t,n,r,s,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},t!==null&&(t=os(t),t!==null&&cr(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Oa(e,t,n,r,s){switch(t){case"focusin":return Ot=an(Ot,e,t,n,r,s),!0;case"dragenter":return Gt=an(Gt,e,t,n,r,s),!0;case"mouseover":return Nn=an(Nn,e,t,n,r,s),!0;case"pointerover":var a=s.pointerId;return Sn.set(a,an(Sn.get(a)||null,e,t,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,wt.set(a,an(wt.get(a)||null,e,t,n,r,s)),!0}return!1}function ol(e){var t=Ir(e.target);if(t!==null){var n=Ht(t);if(n!==null){if(t=n.tag,t===13){if(t=kr(n),t!==null){e.blockedOn=t,_s(e.priority,function(){ll(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function il(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Kl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);An=r,n.target.dispatchEvent(r),An=null}else return t=os(n),t!==null&&cr(t),e.blockedOn=n,!1;t.shift()}return!0}function jt(e,t,n){il(e)&&n.delete(t)}function Hl(){Vl=!1,Ot!==null&&il(Ot)&&(Ot=null),Gt!==null&&il(Gt)&&(Gt=null),Nn!==null&&il(Nn)&&(Nn=null),Sn.forEach(jt),wt.forEach(jt)}function Pr(e,t){e.blockedOn===t&&(e.blockedOn=null,Vl||(Vl=!0,d.unstable_scheduleCallback(d.unstable_NormalPriority,Hl)))}function Or(e){function t(s){return Pr(s,e)}if(0<al.length){Pr(al[0],e);for(var n=1;n<al.length;n++){var r=al[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Ot!==null&&Pr(Ot,e),Gt!==null&&Pr(Gt,e),Nn!==null&&Pr(Nn,e),Sn.forEach(t),wt.forEach(t),n=0;n<Cn.length;n++)r=Cn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Cn.length&&(n=Cn[0],n.blockedOn===null);)ol(n),n.blockedOn===null&&Cn.shift()}var dr=oe.ReactCurrentBatchConfig,Mr=!0;function Ma(e,t,n,r){var s=ue,a=dr.transition;dr.transition=null;try{ue=1,Ql(e,t,n,r)}finally{ue=s,dr.transition=a}}function za(e,t,n,r){var s=ue,a=dr.transition;dr.transition=null;try{ue=4,Ql(e,t,n,r)}finally{ue=s,dr.transition=a}}function Ql(e,t,n,r){if(Mr){var s=Kl(e,t,n,r);if(s===null)Xa(e,t,r,ul,n),ks(e,r);else if(Oa(s,e,t,n,r))r.stopPropagation();else if(ks(e,r),t&4&&-1<$s.indexOf(e)){for(;s!==null;){var a=os(s);if(a!==null&&Es(a),a=Kl(e,t,n,r),a===null&&Xa(e,t,r,ul,n),a===s)break;s=a}s!==null&&r.stopPropagation()}else Xa(e,t,r,null,n)}}var ul=null;function Kl(e,t,n,r){if(ul=null,e=Fn(r),e=Ir(e),e!==null)if(t=Ht(e),t===null)e=null;else if(n=t.tag,n===13){if(e=kr(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ul=e,null}function cl(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Re()){case Ie:return 1;case Fe:return 4;case Ze:case vt:return 16;case Tr:return 536870912;default:return 16}default:return 16}}var on=null,Gl=null,dl=null;function Ts(){if(dl)return dl;var e,t=Gl,n=t.length,r,s="value"in on?on.value:on.textContent,a=s.length;for(e=0;e<n&&t[e]===s[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===s[a-r];r++);return dl=s.slice(e,1<r?1-r:void 0)}function fl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ml(){return!0}function Rs(){return!1}function mt(e){function t(n,r,s,a,i){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=a,this.target=i,this.currentTarget=null;for(var h in e)e.hasOwnProperty(h)&&(n=e[h],this[h]=n?n(a):a[h]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?ml:Rs,this.isPropagationStopped=Rs,this}return G(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ml)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ml)},persist:function(){},isPersistent:ml}),t}var Kn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yl=mt(Kn),zr=G({},Kn,{view:0,detail:0}),Ia=mt(zr),Jl,Xl,Ke,ct=G({},zr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ge,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ke&&(Ke&&e.type==="mousemove"?(Jl=e.screenX-Ke.screenX,Xl=e.screenY-Ke.screenY):Xl=Jl=0,Ke=e),Jl)},movementY:function(e){return"movementY"in e?e.movementY:Xl}}),En=mt(ct),Ls=G({},ct,{dataTransfer:0}),Aa=mt(Ls),Ps=G({},zr,{relatedTarget:0}),pl=mt(Ps),Os=G({},Kn,{animationName:0,elapsedTime:0,pseudoElement:0}),Fa=mt(Os),b=G({},Kn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),S=mt(b),M=G({},Kn,{data:0}),Y=mt(M),Z={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ne={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ce={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ee(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=ce[e])?!!t[e]:!1}function Ge(){return Ee}var Je=G({},zr,{key:function(e){if(e.key){var t=Z[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=fl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ne[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ge,charCode:function(e){return e.type==="keypress"?fl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?fl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Yt=mt(Je),hl=G({},ct,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gl=mt(hl),Gn=G({},zr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ge}),Yn=mt(Gn),xi=G({},Kn,{propertyName:0,elapsedTime:0,pseudoElement:0}),ql=mt(xi),ed=G({},ct,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),td=mt(ed),nd=[9,13,27,32],Ua=m&&"CompositionEvent"in window,Zl=null;m&&"documentMode"in document&&(Zl=document.documentMode);var rd=m&&"TextEvent"in window&&!Zl,yi=m&&(!Ua||Zl&&8<Zl&&11>=Zl),vi=" ",bi=!1;function wi(e,t){switch(e){case"keyup":return nd.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ji(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var xl=!1;function ld(e,t){switch(e){case"compositionend":return ji(t);case"keypress":return t.which!==32?null:(bi=!0,vi);case"textInput":return e=t.data,e===vi&&bi?null:e;default:return null}}function sd(e,t){if(xl)return e==="compositionend"||!Ua&&wi(e,t)?(e=Ts(),dl=Gl=on=null,xl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return yi&&t.locale!=="ko"?null:t.data;default:return null}}var ad={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ni(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ad[e.type]:t==="textarea"}function Si(e,t,n,r){Et(r),t=Fs(t,"onChange"),0<t.length&&(n=new Yl("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Dl=null,es=null;function od(e){Wi(e,0)}function Ms(e){var t=jl(e);if(Rn(t))return e}function id(e,t){if(e==="change")return t}var Ci=!1;if(m){var Ba;if(m){var Wa="oninput"in document;if(!Wa){var Ei=document.createElement("div");Ei.setAttribute("oninput","return;"),Wa=typeof Ei.oninput=="function"}Ba=Wa}else Ba=!1;Ci=Ba&&(!document.documentMode||9<document.documentMode)}function _i(){Dl&&(Dl.detachEvent("onpropertychange",$i),es=Dl=null)}function $i(e){if(e.propertyName==="value"&&Ms(es)){var t=[];Si(t,es,e,Fn(e)),_r(od,t)}}function ud(e,t,n){e==="focusin"?(_i(),Dl=t,es=n,Dl.attachEvent("onpropertychange",$i)):e==="focusout"&&_i()}function cd(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ms(es)}function dd(e,t){if(e==="click")return Ms(t)}function fd(e,t){if(e==="input"||e==="change")return Ms(t)}function md(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var un=typeof Object.is=="function"?Object.is:md;function ts(e,t){if(un(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!E.call(t,s)||!un(e[s],t[s]))return!1}return!0}function ki(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ti(e,t){var n=ki(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ki(n)}}function Ri(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ri(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Li(){for(var e=window,t=qe();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=qe(e.document)}return t}function Va(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function pd(e){var t=Li(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Ri(n.ownerDocument.documentElement,n)){if(r!==null&&Va(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,a=Math.min(r.start,s);r=r.end===void 0?a:Math.min(r.end,s),!e.extend&&a>r&&(s=r,r=a,a=s),s=Ti(n,a);var i=Ti(n,r);s&&i&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var hd=m&&"documentMode"in document&&11>=document.documentMode,yl=null,Ha=null,ns=null,Qa=!1;function Pi(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Qa||yl==null||yl!==qe(r)||(r=yl,"selectionStart"in r&&Va(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ns&&ts(ns,r)||(ns=r,r=Fs(Ha,"onSelect"),0<r.length&&(t=new Yl("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yl)))}function zs(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var vl={animationend:zs("Animation","AnimationEnd"),animationiteration:zs("Animation","AnimationIteration"),animationstart:zs("Animation","AnimationStart"),transitionend:zs("Transition","TransitionEnd")},Ka={},Oi={};m&&(Oi=document.createElement("div").style,"AnimationEvent"in window||(delete vl.animationend.animation,delete vl.animationiteration.animation,delete vl.animationstart.animation),"TransitionEvent"in window||delete vl.transitionend.transition);function Is(e){if(Ka[e])return Ka[e];if(!vl[e])return e;var t=vl[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Oi)return Ka[e]=t[n];return e}var Mi=Is("animationend"),zi=Is("animationiteration"),Ii=Is("animationstart"),Ai=Is("transitionend"),Fi=new Map,Ui="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fr(e,t){Fi.set(e,t),u(t,[e])}for(var Ga=0;Ga<Ui.length;Ga++){var Ya=Ui[Ga],gd=Ya.toLowerCase(),xd=Ya[0].toUpperCase()+Ya.slice(1);fr(gd,"on"+xd)}fr(Mi,"onAnimationEnd"),fr(zi,"onAnimationIteration"),fr(Ii,"onAnimationStart"),fr("dblclick","onDoubleClick"),fr("focusin","onFocus"),fr("focusout","onBlur"),fr(Ai,"onTransitionEnd"),x("onMouseEnter",["mouseout","mouseover"]),x("onMouseLeave",["mouseout","mouseover"]),x("onPointerEnter",["pointerout","pointerover"]),x("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yd=new Set("cancel close invalid load scroll toggle".split(" ").concat(rs));function Bi(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,$r(r,t,void 0,e),e.currentTarget=null}function Wi(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var i=r.length-1;0<=i;i--){var h=r[i],g=h.instance,C=h.currentTarget;if(h=h.listener,g!==a&&s.isPropagationStopped())break e;Bi(s,h,C),a=g}else for(i=0;i<r.length;i++){if(h=r[i],g=h.instance,C=h.currentTarget,h=h.listener,g!==a&&s.isPropagationStopped())break e;Bi(s,h,C),a=g}}}if(Wn)throw e=ir,Wn=!1,ir=null,e}function Ue(e,t){var n=t[no];n===void 0&&(n=t[no]=new Set);var r=e+"__bubble";n.has(r)||(Vi(t,e,2,!1),n.add(r))}function Ja(e,t,n){var r=0;t&&(r|=4),Vi(n,e,r,t)}var As="_reactListening"+Math.random().toString(36).slice(2);function ls(e){if(!e[As]){e[As]=!0,f.forEach(function(n){n!=="selectionchange"&&(yd.has(n)||Ja(n,!1,e),Ja(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[As]||(t[As]=!0,Ja("selectionchange",!1,t))}}function Vi(e,t,n,r){switch(cl(t)){case 1:var s=Ma;break;case 4:s=za;break;default:s=Ql}n=s.bind(null,t,n,e),s=void 0,!or||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Xa(e,t,n,r,s){var a=r;if((t&1)===0&&(t&2)===0&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var h=r.stateNode.containerInfo;if(h===s||h.nodeType===8&&h.parentNode===s)break;if(i===4)for(i=r.return;i!==null;){var g=i.tag;if((g===3||g===4)&&(g=i.stateNode.containerInfo,g===s||g.nodeType===8&&g.parentNode===s))return;i=i.return}for(;h!==null;){if(i=Ir(h),i===null)return;if(g=i.tag,g===5||g===6){r=a=i;continue e}h=h.parentNode}}r=r.return}_r(function(){var C=a,A=Fn(n),U=[];e:{var I=Fi.get(e);if(I!==void 0){var X=Yl,te=e;switch(e){case"keypress":if(fl(n)===0)break e;case"keydown":case"keyup":X=Yt;break;case"focusin":te="focus",X=pl;break;case"focusout":te="blur",X=pl;break;case"beforeblur":case"afterblur":X=pl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=En;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=Aa;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=Yn;break;case Mi:case zi:case Ii:X=Fa;break;case Ai:X=ql;break;case"scroll":X=Ia;break;case"wheel":X=td;break;case"copy":case"cut":case"paste":X=S;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=gl}var le=(t&4)!==0,Xe=!le&&e==="scroll",j=le?I!==null?I+"Capture":null:I;le=[];for(var v=C,N;v!==null;){N=v;var V=N.stateNode;if(N.tag===5&&V!==null&&(N=V,j!==null&&(V=bn(v,j),V!=null&&le.push(ss(v,V,N)))),Xe)break;v=v.return}0<le.length&&(I=new X(I,te,null,n,A),U.push({event:I,listeners:le}))}}if((t&7)===0){e:{if(I=e==="mouseover"||e==="pointerover",X=e==="mouseout"||e==="pointerout",I&&n!==An&&(te=n.relatedTarget||n.fromElement)&&(Ir(te)||te[Jn]))break e;if((X||I)&&(I=A.window===A?A:(I=A.ownerDocument)?I.defaultView||I.parentWindow:window,X?(te=n.relatedTarget||n.toElement,X=C,te=te?Ir(te):null,te!==null&&(Xe=Ht(te),te!==Xe||te.tag!==5&&te.tag!==6)&&(te=null)):(X=null,te=C),X!==te)){if(le=En,V="onMouseLeave",j="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(le=gl,V="onPointerLeave",j="onPointerEnter",v="pointer"),Xe=X==null?I:jl(X),N=te==null?I:jl(te),I=new le(V,v+"leave",X,n,A),I.target=Xe,I.relatedTarget=N,V=null,Ir(A)===C&&(le=new le(j,v+"enter",te,n,A),le.target=N,le.relatedTarget=Xe,V=le),Xe=V,X&&te)t:{for(le=X,j=te,v=0,N=le;N;N=bl(N))v++;for(N=0,V=j;V;V=bl(V))N++;for(;0<v-N;)le=bl(le),v--;for(;0<N-v;)j=bl(j),N--;for(;v--;){if(le===j||j!==null&&le===j.alternate)break t;le=bl(le),j=bl(j)}le=null}else le=null;X!==null&&Hi(U,I,X,le,!1),te!==null&&Xe!==null&&Hi(U,Xe,te,le,!0)}}e:{if(I=C?jl(C):window,X=I.nodeName&&I.nodeName.toLowerCase(),X==="select"||X==="input"&&I.type==="file")var ae=id;else if(Ni(I))if(Ci)ae=fd;else{ae=cd;var fe=ud}else(X=I.nodeName)&&X.toLowerCase()==="input"&&(I.type==="checkbox"||I.type==="radio")&&(ae=dd);if(ae&&(ae=ae(e,C))){Si(U,ae,n,A);break e}fe&&fe(e,I,C),e==="focusout"&&(fe=I._wrapperState)&&fe.controlled&&I.type==="number"&&gn(I,"number",I.value)}switch(fe=C?jl(C):window,e){case"focusin":(Ni(fe)||fe.contentEditable==="true")&&(yl=fe,Ha=C,ns=null);break;case"focusout":ns=Ha=yl=null;break;case"mousedown":Qa=!0;break;case"contextmenu":case"mouseup":case"dragend":Qa=!1,Pi(U,n,A);break;case"selectionchange":if(hd)break;case"keydown":case"keyup":Pi(U,n,A)}var me;if(Ua)e:{switch(e){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else xl?wi(e,n)&&(we="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(we="onCompositionStart");we&&(yi&&n.locale!=="ko"&&(xl||we!=="onCompositionStart"?we==="onCompositionEnd"&&xl&&(me=Ts()):(on=A,Gl="value"in on?on.value:on.textContent,xl=!0)),fe=Fs(C,we),0<fe.length&&(we=new Y(we,e,null,n,A),U.push({event:we,listeners:fe}),me?we.data=me:(me=ji(n),me!==null&&(we.data=me)))),(me=rd?ld(e,n):sd(e,n))&&(C=Fs(C,"onBeforeInput"),0<C.length&&(A=new Y("onBeforeInput","beforeinput",null,n,A),U.push({event:A,listeners:C}),A.data=me))}Wi(U,t)})}function ss(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Fs(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=bn(e,n),a!=null&&r.unshift(ss(e,a,s)),a=bn(e,t),a!=null&&r.push(ss(e,a,s))),e=e.return}return r}function bl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Hi(e,t,n,r,s){for(var a=t._reactName,i=[];n!==null&&n!==r;){var h=n,g=h.alternate,C=h.stateNode;if(g!==null&&g===r)break;h.tag===5&&C!==null&&(h=C,s?(g=bn(n,a),g!=null&&i.unshift(ss(n,g,h))):s||(g=bn(n,a),g!=null&&i.push(ss(n,g,h)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var vd=/\r\n?/g,bd=/\u0000|\uFFFD/g;function Qi(e){return(typeof e=="string"?e:""+e).replace(vd,`
`).replace(bd,"")}function Us(e,t,n){if(t=Qi(t),Qi(e)!==t&&n)throw Error(o(425))}function Bs(){}var qa=null,Za=null;function Da(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var eo=typeof setTimeout=="function"?setTimeout:void 0,wd=typeof clearTimeout=="function"?clearTimeout:void 0,Ki=typeof Promise=="function"?Promise:void 0,jd=typeof queueMicrotask=="function"?queueMicrotask:typeof Ki<"u"?function(e){return Ki.resolve(null).then(e).catch(Nd)}:eo;function Nd(e){setTimeout(function(){throw e})}function to(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Or(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Or(t)}function mr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Gi(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var wl=Math.random().toString(36).slice(2),_n="__reactFiber$"+wl,as="__reactProps$"+wl,Jn="__reactContainer$"+wl,no="__reactEvents$"+wl,Sd="__reactListeners$"+wl,Cd="__reactHandles$"+wl;function Ir(e){var t=e[_n];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Jn]||n[_n]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Gi(e);e!==null;){if(n=e[_n])return n;e=Gi(e)}return t}e=n,n=e.parentNode}return null}function os(e){return e=e[_n]||e[Jn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function jl(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(o(33))}function Ws(e){return e[as]||null}var ro=[],Nl=-1;function pr(e){return{current:e}}function Be(e){0>Nl||(e.current=ro[Nl],ro[Nl]=null,Nl--)}function Ae(e,t){Nl++,ro[Nl]=e.current,e.current=t}var hr={},pt=pr(hr),_t=pr(!1),Ar=hr;function Sl(e,t){var n=e.type.contextTypes;if(!n)return hr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in n)s[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function $t(e){return e=e.childContextTypes,e!=null}function Vs(){Be(_t),Be(pt)}function Yi(e,t,n){if(pt.current!==hr)throw Error(o(168));Ae(pt,t),Ae(_t,n)}function Ji(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(o(108,ye(e)||"Unknown",s));return G({},n,r)}function Hs(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hr,Ar=pt.current,Ae(pt,e),Ae(_t,_t.current),!0}function Xi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Ji(e,t,Ar),r.__reactInternalMemoizedMergedChildContext=e,Be(_t),Be(pt),Ae(pt,e)):Be(_t),Ae(_t,n)}var Xn=null,Qs=!1,lo=!1;function qi(e){Xn===null?Xn=[e]:Xn.push(e)}function Ed(e){Qs=!0,qi(e)}function gr(){if(!lo&&Xn!==null){lo=!0;var e=0,t=ue;try{var n=Xn;for(ue=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Xn=null,Qs=!1}catch(s){throw Xn!==null&&(Xn=Xn.slice(e+1)),Dr(Ie,gr),s}finally{ue=t,lo=!1}}return null}var Cl=[],El=0,Ks=null,Gs=0,Jt=[],Xt=0,Fr=null,qn=1,Zn="";function Ur(e,t){Cl[El++]=Gs,Cl[El++]=Ks,Ks=e,Gs=t}function Zi(e,t,n){Jt[Xt++]=qn,Jt[Xt++]=Zn,Jt[Xt++]=Fr,Fr=e;var r=qn;e=Zn;var s=32-st(r)-1;r&=~(1<<s),n+=1;var a=32-st(t)+s;if(30<a){var i=s-s%5;a=(r&(1<<i)-1).toString(32),r>>=i,s-=i,qn=1<<32-st(t)+s|n<<s|r,Zn=a+e}else qn=1<<a|n<<s|r,Zn=e}function so(e){e.return!==null&&(Ur(e,1),Zi(e,1,0))}function ao(e){for(;e===Ks;)Ks=Cl[--El],Cl[El]=null,Gs=Cl[--El],Cl[El]=null;for(;e===Fr;)Fr=Jt[--Xt],Jt[Xt]=null,Zn=Jt[--Xt],Jt[Xt]=null,qn=Jt[--Xt],Jt[Xt]=null}var Mt=null,zt=null,Ve=!1,cn=null;function Di(e,t){var n=en(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function eu(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Mt=e,zt=mr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Mt=e,zt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Fr!==null?{id:qn,overflow:Zn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=en(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Mt=e,zt=null,!0):!1;default:return!1}}function oo(e){return(e.mode&1)!==0&&(e.flags&128)===0}function io(e){if(Ve){var t=zt;if(t){var n=t;if(!eu(e,t)){if(oo(e))throw Error(o(418));t=mr(n.nextSibling);var r=Mt;t&&eu(e,t)?Di(r,n):(e.flags=e.flags&-4097|2,Ve=!1,Mt=e)}}else{if(oo(e))throw Error(o(418));e.flags=e.flags&-4097|2,Ve=!1,Mt=e}}}function tu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Mt=e}function Ys(e){if(e!==Mt)return!1;if(!Ve)return tu(e),Ve=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Da(e.type,e.memoizedProps)),t&&(t=zt)){if(oo(e))throw nu(),Error(o(418));for(;t;)Di(e,t),t=mr(t.nextSibling)}if(tu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){zt=mr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}zt=null}}else zt=Mt?mr(e.stateNode.nextSibling):null;return!0}function nu(){for(var e=zt;e;)e=mr(e.nextSibling)}function _l(){zt=Mt=null,Ve=!1}function uo(e){cn===null?cn=[e]:cn.push(e)}var _d=oe.ReactCurrentBatchConfig;function is(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var s=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(i){var h=s.refs;i===null?delete h[a]:h[a]=i},t._stringRef=a,t)}if(typeof e!="string")throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Js(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ru(e){var t=e._init;return t(e._payload)}function lu(e){function t(j,v){if(e){var N=j.deletions;N===null?(j.deletions=[v],j.flags|=16):N.push(v)}}function n(j,v){if(!e)return null;for(;v!==null;)t(j,v),v=v.sibling;return null}function r(j,v){for(j=new Map;v!==null;)v.key!==null?j.set(v.key,v):j.set(v.index,v),v=v.sibling;return j}function s(j,v){return j=Sr(j,v),j.index=0,j.sibling=null,j}function a(j,v,N){return j.index=N,e?(N=j.alternate,N!==null?(N=N.index,N<v?(j.flags|=2,v):N):(j.flags|=2,v)):(j.flags|=1048576,v)}function i(j){return e&&j.alternate===null&&(j.flags|=2),j}function h(j,v,N,V){return v===null||v.tag!==6?(v=ti(N,j.mode,V),v.return=j,v):(v=s(v,N),v.return=j,v)}function g(j,v,N,V){var ae=N.type;return ae===Se?A(j,v,N.props.children,V,N.key):v!==null&&(v.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===ze&&ru(ae)===v.type)?(V=s(v,N.props),V.ref=is(j,v,N),V.return=j,V):(V=va(N.type,N.key,N.props,null,j.mode,V),V.ref=is(j,v,N),V.return=j,V)}function C(j,v,N,V){return v===null||v.tag!==4||v.stateNode.containerInfo!==N.containerInfo||v.stateNode.implementation!==N.implementation?(v=ni(N,j.mode,V),v.return=j,v):(v=s(v,N.children||[]),v.return=j,v)}function A(j,v,N,V,ae){return v===null||v.tag!==7?(v=Yr(N,j.mode,V,ae),v.return=j,v):(v=s(v,N),v.return=j,v)}function U(j,v,N){if(typeof v=="string"&&v!==""||typeof v=="number")return v=ti(""+v,j.mode,N),v.return=j,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case K:return N=va(v.type,v.key,v.props,null,j.mode,N),N.ref=is(j,null,v),N.return=j,N;case Q:return v=ni(v,j.mode,N),v.return=j,v;case ze:var V=v._init;return U(j,V(v._payload),N)}if(Pt(v)||ee(v))return v=Yr(v,j.mode,N,null),v.return=j,v;Js(j,v)}return null}function I(j,v,N,V){var ae=v!==null?v.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return ae!==null?null:h(j,v,""+N,V);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case K:return N.key===ae?g(j,v,N,V):null;case Q:return N.key===ae?C(j,v,N,V):null;case ze:return ae=N._init,I(j,v,ae(N._payload),V)}if(Pt(N)||ee(N))return ae!==null?null:A(j,v,N,V,null);Js(j,N)}return null}function X(j,v,N,V,ae){if(typeof V=="string"&&V!==""||typeof V=="number")return j=j.get(N)||null,h(v,j,""+V,ae);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case K:return j=j.get(V.key===null?N:V.key)||null,g(v,j,V,ae);case Q:return j=j.get(V.key===null?N:V.key)||null,C(v,j,V,ae);case ze:var fe=V._init;return X(j,v,N,fe(V._payload),ae)}if(Pt(V)||ee(V))return j=j.get(N)||null,A(v,j,V,ae,null);Js(v,V)}return null}function te(j,v,N,V){for(var ae=null,fe=null,me=v,we=v=0,it=null;me!==null&&we<N.length;we++){me.index>we?(it=me,me=null):it=me.sibling;var Le=I(j,me,N[we],V);if(Le===null){me===null&&(me=it);break}e&&me&&Le.alternate===null&&t(j,me),v=a(Le,v,we),fe===null?ae=Le:fe.sibling=Le,fe=Le,me=it}if(we===N.length)return n(j,me),Ve&&Ur(j,we),ae;if(me===null){for(;we<N.length;we++)me=U(j,N[we],V),me!==null&&(v=a(me,v,we),fe===null?ae=me:fe.sibling=me,fe=me);return Ve&&Ur(j,we),ae}for(me=r(j,me);we<N.length;we++)it=X(me,j,we,N[we],V),it!==null&&(e&&it.alternate!==null&&me.delete(it.key===null?we:it.key),v=a(it,v,we),fe===null?ae=it:fe.sibling=it,fe=it);return e&&me.forEach(function(Cr){return t(j,Cr)}),Ve&&Ur(j,we),ae}function le(j,v,N,V){var ae=ee(N);if(typeof ae!="function")throw Error(o(150));if(N=ae.call(N),N==null)throw Error(o(151));for(var fe=ae=null,me=v,we=v=0,it=null,Le=N.next();me!==null&&!Le.done;we++,Le=N.next()){me.index>we?(it=me,me=null):it=me.sibling;var Cr=I(j,me,Le.value,V);if(Cr===null){me===null&&(me=it);break}e&&me&&Cr.alternate===null&&t(j,me),v=a(Cr,v,we),fe===null?ae=Cr:fe.sibling=Cr,fe=Cr,me=it}if(Le.done)return n(j,me),Ve&&Ur(j,we),ae;if(me===null){for(;!Le.done;we++,Le=N.next())Le=U(j,Le.value,V),Le!==null&&(v=a(Le,v,we),fe===null?ae=Le:fe.sibling=Le,fe=Le);return Ve&&Ur(j,we),ae}for(me=r(j,me);!Le.done;we++,Le=N.next())Le=X(me,j,we,Le.value,V),Le!==null&&(e&&Le.alternate!==null&&me.delete(Le.key===null?we:Le.key),v=a(Le,v,we),fe===null?ae=Le:fe.sibling=Le,fe=Le);return e&&me.forEach(function(a0){return t(j,a0)}),Ve&&Ur(j,we),ae}function Xe(j,v,N,V){if(typeof N=="object"&&N!==null&&N.type===Se&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case K:e:{for(var ae=N.key,fe=v;fe!==null;){if(fe.key===ae){if(ae=N.type,ae===Se){if(fe.tag===7){n(j,fe.sibling),v=s(fe,N.props.children),v.return=j,j=v;break e}}else if(fe.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===ze&&ru(ae)===fe.type){n(j,fe.sibling),v=s(fe,N.props),v.ref=is(j,fe,N),v.return=j,j=v;break e}n(j,fe);break}else t(j,fe);fe=fe.sibling}N.type===Se?(v=Yr(N.props.children,j.mode,V,N.key),v.return=j,j=v):(V=va(N.type,N.key,N.props,null,j.mode,V),V.ref=is(j,v,N),V.return=j,j=V)}return i(j);case Q:e:{for(fe=N.key;v!==null;){if(v.key===fe)if(v.tag===4&&v.stateNode.containerInfo===N.containerInfo&&v.stateNode.implementation===N.implementation){n(j,v.sibling),v=s(v,N.children||[]),v.return=j,j=v;break e}else{n(j,v);break}else t(j,v);v=v.sibling}v=ni(N,j.mode,V),v.return=j,j=v}return i(j);case ze:return fe=N._init,Xe(j,v,fe(N._payload),V)}if(Pt(N))return te(j,v,N,V);if(ee(N))return le(j,v,N,V);Js(j,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,v!==null&&v.tag===6?(n(j,v.sibling),v=s(v,N),v.return=j,j=v):(n(j,v),v=ti(N,j.mode,V),v.return=j,j=v),i(j)):n(j,v)}return Xe}var $l=lu(!0),su=lu(!1),Xs=pr(null),qs=null,kl=null,co=null;function fo(){co=kl=qs=null}function mo(e){var t=Xs.current;Be(Xs),e._currentValue=t}function po(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Tl(e,t){qs=e,co=kl=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(kt=!0),e.firstContext=null)}function qt(e){var t=e._currentValue;if(co!==e)if(e={context:e,memoizedValue:t,next:null},kl===null){if(qs===null)throw Error(o(308));kl=e,qs.dependencies={lanes:0,firstContext:e}}else kl=kl.next=e;return t}var Br=null;function ho(e){Br===null?Br=[e]:Br.push(e)}function au(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,ho(t)):(n.next=s.next,s.next=n),t.interleaved=n,Dn(e,r)}function Dn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var xr=!1;function go(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ou(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function er(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function yr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(ke&2)!==0){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Dn(e,n)}return s=r.interleaved,s===null?(t.next=t,ho(r)):(t.next=s.next,s.next=t),r.interleaved=t,Dn(e,n)}function Zs(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,nl(e,n)}}function iu(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?s=a=i:a=a.next=i,n=n.next}while(n!==null);a===null?s=a=t:a=a.next=t}else s=a=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ds(e,t,n,r){var s=e.updateQueue;xr=!1;var a=s.firstBaseUpdate,i=s.lastBaseUpdate,h=s.shared.pending;if(h!==null){s.shared.pending=null;var g=h,C=g.next;g.next=null,i===null?a=C:i.next=C,i=g;var A=e.alternate;A!==null&&(A=A.updateQueue,h=A.lastBaseUpdate,h!==i&&(h===null?A.firstBaseUpdate=C:h.next=C,A.lastBaseUpdate=g))}if(a!==null){var U=s.baseState;i=0,A=C=g=null,h=a;do{var I=h.lane,X=h.eventTime;if((r&I)===I){A!==null&&(A=A.next={eventTime:X,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var te=e,le=h;switch(I=t,X=n,le.tag){case 1:if(te=le.payload,typeof te=="function"){U=te.call(X,U,I);break e}U=te;break e;case 3:te.flags=te.flags&-65537|128;case 0:if(te=le.payload,I=typeof te=="function"?te.call(X,U,I):te,I==null)break e;U=G({},U,I);break e;case 2:xr=!0}}h.callback!==null&&h.lane!==0&&(e.flags|=64,I=s.effects,I===null?s.effects=[h]:I.push(h))}else X={eventTime:X,lane:I,tag:h.tag,payload:h.payload,callback:h.callback,next:null},A===null?(C=A=X,g=U):A=A.next=X,i|=I;if(h=h.next,h===null){if(h=s.shared.pending,h===null)break;I=h,h=I.next,I.next=null,s.lastBaseUpdate=I,s.shared.pending=null}}while(!0);if(A===null&&(g=U),s.baseState=g,s.firstBaseUpdate=C,s.lastBaseUpdate=A,t=s.shared.interleaved,t!==null){s=t;do i|=s.lane,s=s.next;while(s!==t)}else a===null&&(s.shared.lanes=0);Hr|=i,e.lanes=i,e.memoizedState=U}}function uu(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(o(191,s));s.call(r)}}}var us={},$n=pr(us),cs=pr(us),ds=pr(us);function Wr(e){if(e===us)throw Error(o(174));return e}function xo(e,t){switch(Ae(ds,t),Ae(cs,e),Ae($n,us),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:lr(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=lr(t,e)}Be($n),Ae($n,t)}function Rl(){Be($n),Be(cs),Be(ds)}function cu(e){Wr(ds.current);var t=Wr($n.current),n=lr(t,e.type);t!==n&&(Ae(cs,e),Ae($n,n))}function yo(e){cs.current===e&&(Be($n),Be(cs))}var He=pr(0);function ea(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var vo=[];function bo(){for(var e=0;e<vo.length;e++)vo[e]._workInProgressVersionPrimary=null;vo.length=0}var ta=oe.ReactCurrentDispatcher,wo=oe.ReactCurrentBatchConfig,Vr=0,Qe=null,tt=null,at=null,na=!1,fs=!1,ms=0,$d=0;function ht(){throw Error(o(321))}function jo(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!un(e[n],t[n]))return!1;return!0}function No(e,t,n,r,s,a){if(Vr=a,Qe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ta.current=e===null||e.memoizedState===null?Ld:Pd,e=n(r,s),fs){a=0;do{if(fs=!1,ms=0,25<=a)throw Error(o(301));a+=1,at=tt=null,t.updateQueue=null,ta.current=Od,e=n(r,s)}while(fs)}if(ta.current=sa,t=tt!==null&&tt.next!==null,Vr=0,at=tt=Qe=null,na=!1,t)throw Error(o(300));return e}function So(){var e=ms!==0;return ms=0,e}function kn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return at===null?Qe.memoizedState=at=e:at=at.next=e,at}function Zt(){if(tt===null){var e=Qe.alternate;e=e!==null?e.memoizedState:null}else e=tt.next;var t=at===null?Qe.memoizedState:at.next;if(t!==null)at=t,tt=e;else{if(e===null)throw Error(o(310));tt=e,e={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},at===null?Qe.memoizedState=at=e:at=at.next=e}return at}function ps(e,t){return typeof t=="function"?t(e):t}function Co(e){var t=Zt(),n=t.queue;if(n===null)throw Error(o(311));n.lastRenderedReducer=e;var r=tt,s=r.baseQueue,a=n.pending;if(a!==null){if(s!==null){var i=s.next;s.next=a.next,a.next=i}r.baseQueue=s=a,n.pending=null}if(s!==null){a=s.next,r=r.baseState;var h=i=null,g=null,C=a;do{var A=C.lane;if((Vr&A)===A)g!==null&&(g=g.next={lane:0,action:C.action,hasEagerState:C.hasEagerState,eagerState:C.eagerState,next:null}),r=C.hasEagerState?C.eagerState:e(r,C.action);else{var U={lane:A,action:C.action,hasEagerState:C.hasEagerState,eagerState:C.eagerState,next:null};g===null?(h=g=U,i=r):g=g.next=U,Qe.lanes|=A,Hr|=A}C=C.next}while(C!==null&&C!==a);g===null?i=r:g.next=h,un(r,t.memoizedState)||(kt=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=g,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do a=s.lane,Qe.lanes|=a,Hr|=a,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Eo(e){var t=Zt(),n=t.queue;if(n===null)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,a=t.memoizedState;if(s!==null){n.pending=null;var i=s=s.next;do a=e(a,i.action),i=i.next;while(i!==s);un(a,t.memoizedState)||(kt=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function du(){}function fu(e,t){var n=Qe,r=Zt(),s=t(),a=!un(r.memoizedState,s);if(a&&(r.memoizedState=s,kt=!0),r=r.queue,_o(hu.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||at!==null&&at.memoizedState.tag&1){if(n.flags|=2048,hs(9,pu.bind(null,n,r,s,t),void 0,null),ot===null)throw Error(o(349));(Vr&30)!==0||mu(n,t,s)}return s}function mu(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Qe.updateQueue,t===null?(t={lastEffect:null,stores:null},Qe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function pu(e,t,n,r){t.value=n,t.getSnapshot=r,gu(t)&&xu(e)}function hu(e,t,n){return n(function(){gu(t)&&xu(e)})}function gu(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!un(e,n)}catch{return!0}}function xu(e){var t=Dn(e,1);t!==null&&pn(t,e,1,-1)}function yu(e){var t=kn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ps,lastRenderedState:e},t.queue=e,e=e.dispatch=Rd.bind(null,Qe,e),[t.memoizedState,e]}function hs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Qe.updateQueue,t===null?(t={lastEffect:null,stores:null},Qe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function vu(){return Zt().memoizedState}function ra(e,t,n,r){var s=kn();Qe.flags|=e,s.memoizedState=hs(1|t,n,void 0,r===void 0?null:r)}function la(e,t,n,r){var s=Zt();r=r===void 0?null:r;var a=void 0;if(tt!==null){var i=tt.memoizedState;if(a=i.destroy,r!==null&&jo(r,i.deps)){s.memoizedState=hs(t,n,a,r);return}}Qe.flags|=e,s.memoizedState=hs(1|t,n,a,r)}function bu(e,t){return ra(8390656,8,e,t)}function _o(e,t){return la(2048,8,e,t)}function wu(e,t){return la(4,2,e,t)}function ju(e,t){return la(4,4,e,t)}function Nu(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Su(e,t,n){return n=n!=null?n.concat([e]):null,la(4,4,Nu.bind(null,t,e),n)}function $o(){}function Cu(e,t){var n=Zt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&jo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Eu(e,t){var n=Zt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&jo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function _u(e,t,n){return(Vr&21)===0?(e.baseState&&(e.baseState=!1,kt=!0),e.memoizedState=n):(un(n,t)||(n=tl(),Qe.lanes|=n,Hr|=n,e.baseState=!0),t)}function kd(e,t){var n=ue;ue=n!==0&&4>n?n:4,e(!0);var r=wo.transition;wo.transition={};try{e(!1),t()}finally{ue=n,wo.transition=r}}function $u(){return Zt().memoizedState}function Td(e,t,n){var r=jr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ku(e))Tu(t,n);else if(n=au(e,t,n,r),n!==null){var s=St();pn(n,e,r,s),Ru(n,t,r)}}function Rd(e,t,n){var r=jr(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ku(e))Tu(t,s);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var i=t.lastRenderedState,h=a(i,n);if(s.hasEagerState=!0,s.eagerState=h,un(h,i)){var g=t.interleaved;g===null?(s.next=s,ho(t)):(s.next=g.next,g.next=s),t.interleaved=s;return}}catch{}finally{}n=au(e,t,s,r),n!==null&&(s=St(),pn(n,e,r,s),Ru(n,t,r))}}function ku(e){var t=e.alternate;return e===Qe||t!==null&&t===Qe}function Tu(e,t){fs=na=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ru(e,t,n){if((n&4194240)!==0){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,nl(e,n)}}var sa={readContext:qt,useCallback:ht,useContext:ht,useEffect:ht,useImperativeHandle:ht,useInsertionEffect:ht,useLayoutEffect:ht,useMemo:ht,useReducer:ht,useRef:ht,useState:ht,useDebugValue:ht,useDeferredValue:ht,useTransition:ht,useMutableSource:ht,useSyncExternalStore:ht,useId:ht,unstable_isNewReconciler:!1},Ld={readContext:qt,useCallback:function(e,t){return kn().memoizedState=[e,t===void 0?null:t],e},useContext:qt,useEffect:bu,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ra(4194308,4,Nu.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ra(4194308,4,e,t)},useInsertionEffect:function(e,t){return ra(4,2,e,t)},useMemo:function(e,t){var n=kn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=kn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Td.bind(null,Qe,e),[r.memoizedState,e]},useRef:function(e){var t=kn();return e={current:e},t.memoizedState=e},useState:yu,useDebugValue:$o,useDeferredValue:function(e){return kn().memoizedState=e},useTransition:function(){var e=yu(!1),t=e[0];return e=kd.bind(null,e[1]),kn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Qe,s=kn();if(Ve){if(n===void 0)throw Error(o(407));n=n()}else{if(n=t(),ot===null)throw Error(o(349));(Vr&30)!==0||mu(r,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,bu(hu.bind(null,r,a,e),[e]),r.flags|=2048,hs(9,pu.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=kn(),t=ot.identifierPrefix;if(Ve){var n=Zn,r=qn;n=(r&~(1<<32-st(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=ms++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=$d++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Pd={readContext:qt,useCallback:Cu,useContext:qt,useEffect:_o,useImperativeHandle:Su,useInsertionEffect:wu,useLayoutEffect:ju,useMemo:Eu,useReducer:Co,useRef:vu,useState:function(){return Co(ps)},useDebugValue:$o,useDeferredValue:function(e){var t=Zt();return _u(t,tt.memoizedState,e)},useTransition:function(){var e=Co(ps)[0],t=Zt().memoizedState;return[e,t]},useMutableSource:du,useSyncExternalStore:fu,useId:$u,unstable_isNewReconciler:!1},Od={readContext:qt,useCallback:Cu,useContext:qt,useEffect:_o,useImperativeHandle:Su,useInsertionEffect:wu,useLayoutEffect:ju,useMemo:Eu,useReducer:Eo,useRef:vu,useState:function(){return Eo(ps)},useDebugValue:$o,useDeferredValue:function(e){var t=Zt();return tt===null?t.memoizedState=e:_u(t,tt.memoizedState,e)},useTransition:function(){var e=Eo(ps)[0],t=Zt().memoizedState;return[e,t]},useMutableSource:du,useSyncExternalStore:fu,useId:$u,unstable_isNewReconciler:!1};function dn(e,t){if(e&&e.defaultProps){t=G({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ko(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:G({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var aa={isMounted:function(e){return(e=e._reactInternals)?Ht(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=St(),s=jr(e),a=er(r,s);a.payload=t,n!=null&&(a.callback=n),t=yr(e,a,s),t!==null&&(pn(t,e,s,r),Zs(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=St(),s=jr(e),a=er(r,s);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=yr(e,a,s),t!==null&&(pn(t,e,s,r),Zs(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=St(),r=jr(e),s=er(n,r);s.tag=2,t!=null&&(s.callback=t),t=yr(e,s,r),t!==null&&(pn(t,e,r,n),Zs(t,e,r))}};function Lu(e,t,n,r,s,a,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,i):t.prototype&&t.prototype.isPureReactComponent?!ts(n,r)||!ts(s,a):!0}function Pu(e,t,n){var r=!1,s=hr,a=t.contextType;return typeof a=="object"&&a!==null?a=qt(a):(s=$t(t)?Ar:pt.current,r=t.contextTypes,a=(r=r!=null)?Sl(e,s):hr),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=aa,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ou(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&aa.enqueueReplaceState(t,t.state,null)}function To(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},go(e);var a=t.contextType;typeof a=="object"&&a!==null?s.context=qt(a):(a=$t(t)?Ar:pt.current,s.context=Sl(e,a)),s.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(ko(e,t,a,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&aa.enqueueReplaceState(s,s.state,null),Ds(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Ll(e,t){try{var n="",r=t;do n+=q(r),r=r.return;while(r);var s=n}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:s,digest:null}}function Ro(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Lo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Md=typeof WeakMap=="function"?WeakMap:Map;function Mu(e,t,n){n=er(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ma||(ma=!0,Go=r),Lo(e,t)},n}function zu(e,t,n){n=er(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Lo(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){Lo(e,t),typeof r!="function"&&(br===null?br=new Set([this]):br.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function Iu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Md;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Jd.bind(null,e,t,n),t.then(e,e))}function Au(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Fu(e,t,n,r,s){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=er(-1,1),t.tag=2,yr(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var zd=oe.ReactCurrentOwner,kt=!1;function Nt(e,t,n,r){t.child=e===null?su(t,null,n,r):$l(t,e.child,n,r)}function Uu(e,t,n,r,s){n=n.render;var a=t.ref;return Tl(t,s),r=No(e,t,n,r,a,s),n=So(),e!==null&&!kt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,tr(e,t,s)):(Ve&&n&&so(t),t.flags|=1,Nt(e,t,r,s),t.child)}function Bu(e,t,n,r,s){if(e===null){var a=n.type;return typeof a=="function"&&!ei(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,Wu(e,t,a,r,s)):(e=va(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,(e.lanes&s)===0){var i=a.memoizedProps;if(n=n.compare,n=n!==null?n:ts,n(i,r)&&e.ref===t.ref)return tr(e,t,s)}return t.flags|=1,e=Sr(a,r),e.ref=t.ref,e.return=t,t.child=e}function Wu(e,t,n,r,s){if(e!==null){var a=e.memoizedProps;if(ts(a,r)&&e.ref===t.ref)if(kt=!1,t.pendingProps=r=a,(e.lanes&s)!==0)(e.flags&131072)!==0&&(kt=!0);else return t.lanes=e.lanes,tr(e,t,s)}return Po(e,t,n,r,s)}function Vu(e,t,n){var r=t.pendingProps,s=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ae(Ol,It),It|=n;else{if((n&1073741824)===0)return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ae(Ol,It),It|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,Ae(Ol,It),It|=r}else a!==null?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ae(Ol,It),It|=r;return Nt(e,t,s,n),t.child}function Hu(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Po(e,t,n,r,s){var a=$t(n)?Ar:pt.current;return a=Sl(t,a),Tl(t,s),n=No(e,t,n,r,a,s),r=So(),e!==null&&!kt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,tr(e,t,s)):(Ve&&r&&so(t),t.flags|=1,Nt(e,t,n,s),t.child)}function Qu(e,t,n,r,s){if($t(n)){var a=!0;Hs(t)}else a=!1;if(Tl(t,s),t.stateNode===null)ia(e,t),Pu(t,n,r),To(t,n,r,s),r=!0;else if(e===null){var i=t.stateNode,h=t.memoizedProps;i.props=h;var g=i.context,C=n.contextType;typeof C=="object"&&C!==null?C=qt(C):(C=$t(n)?Ar:pt.current,C=Sl(t,C));var A=n.getDerivedStateFromProps,U=typeof A=="function"||typeof i.getSnapshotBeforeUpdate=="function";U||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(h!==r||g!==C)&&Ou(t,i,r,C),xr=!1;var I=t.memoizedState;i.state=I,Ds(t,r,i,s),g=t.memoizedState,h!==r||I!==g||_t.current||xr?(typeof A=="function"&&(ko(t,n,A,r),g=t.memoizedState),(h=xr||Lu(t,n,h,r,I,g,C))?(U||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=g),i.props=r,i.state=g,i.context=C,r=h):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,ou(e,t),h=t.memoizedProps,C=t.type===t.elementType?h:dn(t.type,h),i.props=C,U=t.pendingProps,I=i.context,g=n.contextType,typeof g=="object"&&g!==null?g=qt(g):(g=$t(n)?Ar:pt.current,g=Sl(t,g));var X=n.getDerivedStateFromProps;(A=typeof X=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(h!==U||I!==g)&&Ou(t,i,r,g),xr=!1,I=t.memoizedState,i.state=I,Ds(t,r,i,s);var te=t.memoizedState;h!==U||I!==te||_t.current||xr?(typeof X=="function"&&(ko(t,n,X,r),te=t.memoizedState),(C=xr||Lu(t,n,C,r,I,te,g)||!1)?(A||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,te,g),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,te,g)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||h===e.memoizedProps&&I===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&I===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=te),i.props=r,i.state=te,i.context=g,r=C):(typeof i.componentDidUpdate!="function"||h===e.memoizedProps&&I===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&I===e.memoizedState||(t.flags|=1024),r=!1)}return Oo(e,t,n,r,a,s)}function Oo(e,t,n,r,s,a){Hu(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return s&&Xi(t,n,!1),tr(e,t,a);r=t.stateNode,zd.current=t;var h=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=$l(t,e.child,null,a),t.child=$l(t,null,h,a)):Nt(e,t,h,a),t.memoizedState=r.state,s&&Xi(t,n,!0),t.child}function Ku(e){var t=e.stateNode;t.pendingContext?Yi(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Yi(e,t.context,!1),xo(e,t.containerInfo)}function Gu(e,t,n,r,s){return _l(),uo(s),t.flags|=256,Nt(e,t,n,r),t.child}var Mo={dehydrated:null,treeContext:null,retryLane:0};function zo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Yu(e,t,n){var r=t.pendingProps,s=He.current,a=!1,i=(t.flags&128)!==0,h;if((h=i)||(h=e!==null&&e.memoizedState===null?!1:(s&2)!==0),h?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Ae(He,s&1),e===null)return io(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(i=r.children,e=r.fallback,a?(r=t.mode,a=t.child,i={mode:"hidden",children:i},(r&1)===0&&a!==null?(a.childLanes=0,a.pendingProps=i):a=ba(i,r,0,null),e=Yr(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=zo(n),t.memoizedState=Mo,e):Io(t,i));if(s=e.memoizedState,s!==null&&(h=s.dehydrated,h!==null))return Id(e,t,i,r,h,s,n);if(a){a=r.fallback,i=t.mode,s=e.child,h=s.sibling;var g={mode:"hidden",children:r.children};return(i&1)===0&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=g,t.deletions=null):(r=Sr(s,g),r.subtreeFlags=s.subtreeFlags&14680064),h!==null?a=Sr(h,a):(a=Yr(a,i,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,i=e.child.memoizedState,i=i===null?zo(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},a.memoizedState=i,a.childLanes=e.childLanes&~n,t.memoizedState=Mo,r}return a=e.child,e=a.sibling,r=Sr(a,{mode:"visible",children:r.children}),(t.mode&1)===0&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Io(e,t){return t=ba({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function oa(e,t,n,r){return r!==null&&uo(r),$l(t,e.child,null,n),e=Io(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Id(e,t,n,r,s,a,i){if(n)return t.flags&256?(t.flags&=-257,r=Ro(Error(o(422))),oa(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,s=t.mode,r=ba({mode:"visible",children:r.children},s,0,null),a=Yr(a,s,i,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,(t.mode&1)!==0&&$l(t,e.child,null,i),t.child.memoizedState=zo(i),t.memoizedState=Mo,a);if((t.mode&1)===0)return oa(e,t,i,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var h=r.dgst;return r=h,a=Error(o(419)),r=Ro(a,r,void 0),oa(e,t,i,r)}if(h=(i&e.childLanes)!==0,kt||h){if(r=ot,r!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=(s&(r.suspendedLanes|i))!==0?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,Dn(e,s),pn(r,e,s,-1))}return Do(),r=Ro(Error(o(421))),oa(e,t,i,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Xd.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,zt=mr(s.nextSibling),Mt=t,Ve=!0,cn=null,e!==null&&(Jt[Xt++]=qn,Jt[Xt++]=Zn,Jt[Xt++]=Fr,qn=e.id,Zn=e.overflow,Fr=t),t=Io(t,r.children),t.flags|=4096,t)}function Ju(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),po(e.return,t,n)}function Ao(e,t,n,r,s){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s)}function Xu(e,t,n){var r=t.pendingProps,s=r.revealOrder,a=r.tail;if(Nt(e,t,r.children,n),r=He.current,(r&2)!==0)r=r&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ju(e,n,t);else if(e.tag===19)Ju(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ae(He,r),(t.mode&1)===0)t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&ea(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Ao(t,!1,s,n,a);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&ea(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Ao(t,!0,n,null,a);break;case"together":Ao(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ia(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function tr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Hr|=t.lanes,(n&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,n=Sr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Sr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Ad(e,t,n){switch(t.tag){case 3:Ku(t),_l();break;case 5:cu(t);break;case 1:$t(t.type)&&Hs(t);break;case 4:xo(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Ae(Xs,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ae(He,He.current&1),t.flags|=128,null):(n&t.child.childLanes)!==0?Yu(e,t,n):(Ae(He,He.current&1),e=tr(e,t,n),e!==null?e.sibling:null);Ae(He,He.current&1);break;case 19:if(r=(n&t.childLanes)!==0,(e.flags&128)!==0){if(r)return Xu(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ae(He,He.current),r)break;return null;case 22:case 23:return t.lanes=0,Vu(e,t,n)}return tr(e,t,n)}var qu,Fo,Zu,Du;qu=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Fo=function(){},Zu=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Wr($n.current);var a=null;switch(n){case"input":s=rr(e,s),r=rr(e,r),a=[];break;case"select":s=G({},s,{value:void 0}),r=G({},r,{value:void 0}),a=[];break;case"textarea":s=ut(e,s),r=ut(e,r),a=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Bs)}yn(n,r);var i;n=null;for(C in s)if(!r.hasOwnProperty(C)&&s.hasOwnProperty(C)&&s[C]!=null)if(C==="style"){var h=s[C];for(i in h)h.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else C!=="dangerouslySetInnerHTML"&&C!=="children"&&C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&C!=="autoFocus"&&(p.hasOwnProperty(C)?a||(a=[]):(a=a||[]).push(C,null));for(C in r){var g=r[C];if(h=s!=null?s[C]:void 0,r.hasOwnProperty(C)&&g!==h&&(g!=null||h!=null))if(C==="style")if(h){for(i in h)!h.hasOwnProperty(i)||g&&g.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in g)g.hasOwnProperty(i)&&h[i]!==g[i]&&(n||(n={}),n[i]=g[i])}else n||(a||(a=[]),a.push(C,n)),n=g;else C==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,h=h?h.__html:void 0,g!=null&&h!==g&&(a=a||[]).push(C,g)):C==="children"?typeof g!="string"&&typeof g!="number"||(a=a||[]).push(C,""+g):C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&(p.hasOwnProperty(C)?(g!=null&&C==="onScroll"&&Ue("scroll",e),a||h===g||(a=[])):(a=a||[]).push(C,g))}n&&(a=a||[]).push("style",n);var C=a;(t.updateQueue=C)&&(t.flags|=4)}},Du=function(e,t,n,r){n!==r&&(t.flags|=4)};function gs(e,t){if(!Ve)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function gt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Fd(e,t,n){var r=t.pendingProps;switch(ao(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(t),null;case 1:return $t(t.type)&&Vs(),gt(t),null;case 3:return r=t.stateNode,Rl(),Be(_t),Be(pt),bo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ys(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,cn!==null&&(Xo(cn),cn=null))),Fo(e,t),gt(t),null;case 5:yo(t);var s=Wr(ds.current);if(n=t.type,e!==null&&t.stateNode!=null)Zu(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(o(166));return gt(t),null}if(e=Wr($n.current),Ys(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[_n]=t,r[as]=a,e=(t.mode&1)!==0,n){case"dialog":Ue("cancel",r),Ue("close",r);break;case"iframe":case"object":case"embed":Ue("load",r);break;case"video":case"audio":for(s=0;s<rs.length;s++)Ue(rs[s],r);break;case"source":Ue("error",r);break;case"img":case"image":case"link":Ue("error",r),Ue("load",r);break;case"details":Ue("toggle",r);break;case"input":rt(r,a),Ue("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Ue("invalid",r);break;case"textarea":lt(r,a),Ue("invalid",r)}yn(n,a),s=null;for(var i in a)if(a.hasOwnProperty(i)){var h=a[i];i==="children"?typeof h=="string"?r.textContent!==h&&(a.suppressHydrationWarning!==!0&&Us(r.textContent,h,e),s=["children",h]):typeof h=="number"&&r.textContent!==""+h&&(a.suppressHydrationWarning!==!0&&Us(r.textContent,h,e),s=["children",""+h]):p.hasOwnProperty(i)&&h!=null&&i==="onScroll"&&Ue("scroll",r)}switch(n){case"input":At(r),Pn(r,a,!0);break;case"textarea":At(r),tn(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Bs)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=xn(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[_n]=t,e[as]=r,qu(e,t,!1,!1),t.stateNode=e;e:{switch(i=Bt(n,r),n){case"dialog":Ue("cancel",e),Ue("close",e),s=r;break;case"iframe":case"object":case"embed":Ue("load",e),s=r;break;case"video":case"audio":for(s=0;s<rs.length;s++)Ue(rs[s],e);s=r;break;case"source":Ue("error",e),s=r;break;case"img":case"image":case"link":Ue("error",e),Ue("load",e),s=r;break;case"details":Ue("toggle",e),s=r;break;case"input":rt(e,r),s=rr(e,r),Ue("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=G({},r,{value:void 0}),Ue("invalid",e);break;case"textarea":lt(e,r),s=ut(e,r),Ue("invalid",e);break;default:s=r}yn(n,s),h=s;for(a in h)if(h.hasOwnProperty(a)){var g=h[a];a==="style"?Ut(e,g):a==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,g!=null&&Mn(e,g)):a==="children"?typeof g=="string"?(n!=="textarea"||g!=="")&&zn(e,g):typeof g=="number"&&zn(e,""+g):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(p.hasOwnProperty(a)?g!=null&&a==="onScroll"&&Ue("scroll",e):g!=null&&de(e,a,g,i))}switch(n){case"input":At(e),Pn(e,r,!1);break;case"textarea":At(e),tn(e);break;case"option":r.value!=null&&e.setAttribute("value",""+T(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?et(e,!!r.multiple,a,!1):r.defaultValue!=null&&et(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Bs)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return gt(t),null;case 6:if(e&&t.stateNode!=null)Du(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(o(166));if(n=Wr(ds.current),Wr($n.current),Ys(t)){if(r=t.stateNode,n=t.memoizedProps,r[_n]=t,(a=r.nodeValue!==n)&&(e=Mt,e!==null))switch(e.tag){case 3:Us(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Us(r.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[_n]=t,t.stateNode=r}return gt(t),null;case 13:if(Be(He),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ve&&zt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)nu(),_l(),t.flags|=98560,a=!1;else if(a=Ys(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(o(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(o(317));a[_n]=t}else _l(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;gt(t),a=!1}else cn!==null&&(Xo(cn),cn=null),a=!0;if(!a)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(He.current&1)!==0?nt===0&&(nt=3):Do())),t.updateQueue!==null&&(t.flags|=4),gt(t),null);case 4:return Rl(),Fo(e,t),e===null&&ls(t.stateNode.containerInfo),gt(t),null;case 10:return mo(t.type._context),gt(t),null;case 17:return $t(t.type)&&Vs(),gt(t),null;case 19:if(Be(He),a=t.memoizedState,a===null)return gt(t),null;if(r=(t.flags&128)!==0,i=a.rendering,i===null)if(r)gs(a,!1);else{if(nt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(i=ea(e),i!==null){for(t.flags|=128,gs(a,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)a=n,e=r,a.flags&=14680066,i=a.alternate,i===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,a.type=i.type,e=i.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ae(He,He.current&1|2),t.child}e=e.sibling}a.tail!==null&&pe()>Ml&&(t.flags|=128,r=!0,gs(a,!1),t.lanes=4194304)}else{if(!r)if(e=ea(i),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),gs(a,!0),a.tail===null&&a.tailMode==="hidden"&&!i.alternate&&!Ve)return gt(t),null}else 2*pe()-a.renderingStartTime>Ml&&n!==1073741824&&(t.flags|=128,r=!0,gs(a,!1),t.lanes=4194304);a.isBackwards?(i.sibling=t.child,t.child=i):(n=a.last,n!==null?n.sibling=i:t.child=i,a.last=i)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=pe(),t.sibling=null,n=He.current,Ae(He,r?n&1|2:n&1),t):(gt(t),null);case 22:case 23:return Zo(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&(t.mode&1)!==0?(It&1073741824)!==0&&(gt(t),t.subtreeFlags&6&&(t.flags|=8192)):gt(t),null;case 24:return null;case 25:return null}throw Error(o(156,t.tag))}function Ud(e,t){switch(ao(t),t.tag){case 1:return $t(t.type)&&Vs(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Rl(),Be(_t),Be(pt),bo(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return yo(t),null;case 13:if(Be(He),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));_l()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Be(He),null;case 4:return Rl(),null;case 10:return mo(t.type._context),null;case 22:case 23:return Zo(),null;case 24:return null;default:return null}}var ua=!1,xt=!1,Bd=typeof WeakSet=="function"?WeakSet:Set,D=null;function Pl(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ye(e,t,r)}else n.current=null}function Uo(e,t,n){try{n()}catch(r){Ye(e,t,r)}}var ec=!1;function Wd(e,t){if(qa=Mr,e=Li(),Va(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var i=0,h=-1,g=-1,C=0,A=0,U=e,I=null;t:for(;;){for(var X;U!==n||s!==0&&U.nodeType!==3||(h=i+s),U!==a||r!==0&&U.nodeType!==3||(g=i+r),U.nodeType===3&&(i+=U.nodeValue.length),(X=U.firstChild)!==null;)I=U,U=X;for(;;){if(U===e)break t;if(I===n&&++C===s&&(h=i),I===a&&++A===r&&(g=i),(X=U.nextSibling)!==null)break;U=I,I=U.parentNode}U=X}n=h===-1||g===-1?null:{start:h,end:g}}else n=null}n=n||{start:0,end:0}}else n=null;for(Za={focusedElem:e,selectionRange:n},Mr=!1,D=t;D!==null;)if(t=D,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,D=e;else for(;D!==null;){t=D;try{var te=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(te!==null){var le=te.memoizedProps,Xe=te.memoizedState,j=t.stateNode,v=j.getSnapshotBeforeUpdate(t.elementType===t.type?le:dn(t.type,le),Xe);j.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var N=t.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(V){Ye(t,t.return,V)}if(e=t.sibling,e!==null){e.return=t.return,D=e;break}D=t.return}return te=ec,ec=!1,te}function xs(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,a!==void 0&&Uo(t,n,a)}s=s.next}while(s!==r)}}function ca(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Bo(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function tc(e){var t=e.alternate;t!==null&&(e.alternate=null,tc(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[_n],delete t[as],delete t[no],delete t[Sd],delete t[Cd])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function nc(e){return e.tag===5||e.tag===3||e.tag===4}function rc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||nc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Wo(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Bs));else if(r!==4&&(e=e.child,e!==null))for(Wo(e,t,n),e=e.sibling;e!==null;)Wo(e,t,n),e=e.sibling}function Vo(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Vo(e,t,n),e=e.sibling;e!==null;)Vo(e,t,n),e=e.sibling}var dt=null,fn=!1;function vr(e,t,n){for(n=n.child;n!==null;)lc(e,t,n),n=n.sibling}function lc(e,t,n){if(bt&&typeof bt.onCommitFiberUnmount=="function")try{bt.onCommitFiberUnmount(jn,n)}catch{}switch(n.tag){case 5:xt||Pl(n,t);case 6:var r=dt,s=fn;dt=null,vr(e,t,n),dt=r,fn=s,dt!==null&&(fn?(e=dt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):dt.removeChild(n.stateNode));break;case 18:dt!==null&&(fn?(e=dt,n=n.stateNode,e.nodeType===8?to(e.parentNode,n):e.nodeType===1&&to(e,n),Or(e)):to(dt,n.stateNode));break;case 4:r=dt,s=fn,dt=n.stateNode.containerInfo,fn=!0,vr(e,t,n),dt=r,fn=s;break;case 0:case 11:case 14:case 15:if(!xt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var a=s,i=a.destroy;a=a.tag,i!==void 0&&((a&2)!==0||(a&4)!==0)&&Uo(n,t,i),s=s.next}while(s!==r)}vr(e,t,n);break;case 1:if(!xt&&(Pl(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(h){Ye(n,t,h)}vr(e,t,n);break;case 21:vr(e,t,n);break;case 22:n.mode&1?(xt=(r=xt)||n.memoizedState!==null,vr(e,t,n),xt=r):vr(e,t,n);break;default:vr(e,t,n)}}function sc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Bd),t.forEach(function(r){var s=qd.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function mn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var a=e,i=t,h=i;e:for(;h!==null;){switch(h.tag){case 5:dt=h.stateNode,fn=!1;break e;case 3:dt=h.stateNode.containerInfo,fn=!0;break e;case 4:dt=h.stateNode.containerInfo,fn=!0;break e}h=h.return}if(dt===null)throw Error(o(160));lc(a,i,s),dt=null,fn=!1;var g=s.alternate;g!==null&&(g.return=null),s.return=null}catch(C){Ye(s,t,C)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ac(t,e),t=t.sibling}function ac(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mn(t,e),Tn(e),r&4){try{xs(3,e,e.return),ca(3,e)}catch(le){Ye(e,e.return,le)}try{xs(5,e,e.return)}catch(le){Ye(e,e.return,le)}}break;case 1:mn(t,e),Tn(e),r&512&&n!==null&&Pl(n,n.return);break;case 5:if(mn(t,e),Tn(e),r&512&&n!==null&&Pl(n,n.return),e.flags&32){var s=e.stateNode;try{zn(s,"")}catch(le){Ye(e,e.return,le)}}if(r&4&&(s=e.stateNode,s!=null)){var a=e.memoizedProps,i=n!==null?n.memoizedProps:a,h=e.type,g=e.updateQueue;if(e.updateQueue=null,g!==null)try{h==="input"&&a.type==="radio"&&a.name!=null&&hn(s,a),Bt(h,i);var C=Bt(h,a);for(i=0;i<g.length;i+=2){var A=g[i],U=g[i+1];A==="style"?Ut(s,U):A==="dangerouslySetInnerHTML"?Mn(s,U):A==="children"?zn(s,U):de(s,A,U,C)}switch(h){case"input":Ln(s,a);break;case"textarea":Ft(s,a);break;case"select":var I=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var X=a.value;X!=null?et(s,!!a.multiple,X,!1):I!==!!a.multiple&&(a.defaultValue!=null?et(s,!!a.multiple,a.defaultValue,!0):et(s,!!a.multiple,a.multiple?[]:"",!1))}s[as]=a}catch(le){Ye(e,e.return,le)}}break;case 6:if(mn(t,e),Tn(e),r&4){if(e.stateNode===null)throw Error(o(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(le){Ye(e,e.return,le)}}break;case 3:if(mn(t,e),Tn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Or(t.containerInfo)}catch(le){Ye(e,e.return,le)}break;case 4:mn(t,e),Tn(e);break;case 13:mn(t,e),Tn(e),s=e.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(Ko=pe())),r&4&&sc(e);break;case 22:if(A=n!==null&&n.memoizedState!==null,e.mode&1?(xt=(C=xt)||A,mn(t,e),xt=C):mn(t,e),Tn(e),r&8192){if(C=e.memoizedState!==null,(e.stateNode.isHidden=C)&&!A&&(e.mode&1)!==0)for(D=e,A=e.child;A!==null;){for(U=D=A;D!==null;){switch(I=D,X=I.child,I.tag){case 0:case 11:case 14:case 15:xs(4,I,I.return);break;case 1:Pl(I,I.return);var te=I.stateNode;if(typeof te.componentWillUnmount=="function"){r=I,n=I.return;try{t=r,te.props=t.memoizedProps,te.state=t.memoizedState,te.componentWillUnmount()}catch(le){Ye(r,n,le)}}break;case 5:Pl(I,I.return);break;case 22:if(I.memoizedState!==null){uc(U);continue}}X!==null?(X.return=I,D=X):uc(U)}A=A.sibling}e:for(A=null,U=e;;){if(U.tag===5){if(A===null){A=U;try{s=U.stateNode,C?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(h=U.stateNode,g=U.memoizedProps.style,i=g!=null&&g.hasOwnProperty("display")?g.display:null,h.style.display=Er("display",i))}catch(le){Ye(e,e.return,le)}}}else if(U.tag===6){if(A===null)try{U.stateNode.nodeValue=C?"":U.memoizedProps}catch(le){Ye(e,e.return,le)}}else if((U.tag!==22&&U.tag!==23||U.memoizedState===null||U===e)&&U.child!==null){U.child.return=U,U=U.child;continue}if(U===e)break e;for(;U.sibling===null;){if(U.return===null||U.return===e)break e;A===U&&(A=null),U=U.return}A===U&&(A=null),U.sibling.return=U.return,U=U.sibling}}break;case 19:mn(t,e),Tn(e),r&4&&sc(e);break;case 21:break;default:mn(t,e),Tn(e)}}function Tn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(nc(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(zn(s,""),r.flags&=-33);var a=rc(e);Vo(e,a,s);break;case 3:case 4:var i=r.stateNode.containerInfo,h=rc(e);Wo(e,h,i);break;default:throw Error(o(161))}}catch(g){Ye(e,e.return,g)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Vd(e,t,n){D=e,oc(e)}function oc(e,t,n){for(var r=(e.mode&1)!==0;D!==null;){var s=D,a=s.child;if(s.tag===22&&r){var i=s.memoizedState!==null||ua;if(!i){var h=s.alternate,g=h!==null&&h.memoizedState!==null||xt;h=ua;var C=xt;if(ua=i,(xt=g)&&!C)for(D=s;D!==null;)i=D,g=i.child,i.tag===22&&i.memoizedState!==null?cc(s):g!==null?(g.return=i,D=g):cc(s);for(;a!==null;)D=a,oc(a),a=a.sibling;D=s,ua=h,xt=C}ic(e)}else(s.subtreeFlags&8772)!==0&&a!==null?(a.return=s,D=a):ic(e)}}function ic(e){for(;D!==null;){var t=D;if((t.flags&8772)!==0){var n=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:xt||ca(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!xt)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:dn(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&uu(t,a,r);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}uu(t,i,n)}break;case 5:var h=t.stateNode;if(n===null&&t.flags&4){n=h;var g=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":g.autoFocus&&n.focus();break;case"img":g.src&&(n.src=g.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var C=t.alternate;if(C!==null){var A=C.memoizedState;if(A!==null){var U=A.dehydrated;U!==null&&Or(U)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(o(163))}xt||t.flags&512&&Bo(t)}catch(I){Ye(t,t.return,I)}}if(t===e){D=null;break}if(n=t.sibling,n!==null){n.return=t.return,D=n;break}D=t.return}}function uc(e){for(;D!==null;){var t=D;if(t===e){D=null;break}var n=t.sibling;if(n!==null){n.return=t.return,D=n;break}D=t.return}}function cc(e){for(;D!==null;){var t=D;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ca(4,t)}catch(g){Ye(t,n,g)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(g){Ye(t,s,g)}}var a=t.return;try{Bo(t)}catch(g){Ye(t,a,g)}break;case 5:var i=t.return;try{Bo(t)}catch(g){Ye(t,i,g)}}}catch(g){Ye(t,t.return,g)}if(t===e){D=null;break}var h=t.sibling;if(h!==null){h.return=t.return,D=h;break}D=t.return}}var Hd=Math.ceil,da=oe.ReactCurrentDispatcher,Ho=oe.ReactCurrentOwner,Dt=oe.ReactCurrentBatchConfig,ke=0,ot=null,De=null,ft=0,It=0,Ol=pr(0),nt=0,ys=null,Hr=0,fa=0,Qo=0,vs=null,Tt=null,Ko=0,Ml=1/0,nr=null,ma=!1,Go=null,br=null,pa=!1,wr=null,ha=0,bs=0,Yo=null,ga=-1,xa=0;function St(){return(ke&6)!==0?pe():ga!==-1?ga:ga=pe()}function jr(e){return(e.mode&1)===0?1:(ke&2)!==0&&ft!==0?ft&-ft:_d.transition!==null?(xa===0&&(xa=tl()),xa):(e=ue,e!==0||(e=window.event,e=e===void 0?16:cl(e.type)),e)}function pn(e,t,n,r){if(50<bs)throw bs=0,Yo=null,Error(o(185));sn(e,n,r),((ke&2)===0||e!==ot)&&(e===ot&&((ke&2)===0&&(fa|=n),nt===4&&Nr(e,ft)),Rt(e,r),n===1&&ke===0&&(t.mode&1)===0&&(Ml=pe()+500,Qs&&gr()))}function Rt(e,t){var n=e.callbackNode;Wl(e,t);var r=Kt(e,e===ot?ft:0);if(r===0)n!==null&&el(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&el(n),t===1)e.tag===0?Ed(fc.bind(null,e)):qi(fc.bind(null,e)),jd(function(){(ke&6)===0&&gr()}),n=null;else{switch(rl(r)){case 1:n=Ie;break;case 4:n=Fe;break;case 16:n=Ze;break;case 536870912:n=Tr;break;default:n=Ze}n=bc(n,dc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function dc(e,t){if(ga=-1,xa=0,(ke&6)!==0)throw Error(o(327));var n=e.callbackNode;if(zl()&&e.callbackNode!==n)return null;var r=Kt(e,e===ot?ft:0);if(r===0)return null;if((r&30)!==0||(r&e.expiredLanes)!==0||t)t=ya(e,r);else{t=r;var s=ke;ke|=2;var a=pc();(ot!==e||ft!==t)&&(nr=null,Ml=pe()+500,Kr(e,t));do try{Gd();break}catch(h){mc(e,h)}while(!0);fo(),da.current=a,ke=s,De!==null?t=0:(ot=null,ft=0,t=nt)}if(t!==0){if(t===2&&(s=Rr(e),s!==0&&(r=s,t=Jo(e,s))),t===1)throw n=ys,Kr(e,0),Nr(e,r),Rt(e,pe()),n;if(t===6)Nr(e,r);else{if(s=e.current.alternate,(r&30)===0&&!Qd(s)&&(t=ya(e,r),t===2&&(a=Rr(e),a!==0&&(r=a,t=Jo(e,a))),t===1))throw n=ys,Kr(e,0),Nr(e,r),Rt(e,pe()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:Gr(e,Tt,nr);break;case 3:if(Nr(e,r),(r&130023424)===r&&(t=Ko+500-pe(),10<t)){if(Kt(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){St(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=eo(Gr.bind(null,e,Tt,nr),t);break}Gr(e,Tt,nr);break;case 4:if(Nr(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var i=31-st(r);a=1<<i,i=t[i],i>s&&(s=i),r&=~a}if(r=s,r=pe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Hd(r/1960))-r,10<r){e.timeoutHandle=eo(Gr.bind(null,e,Tt,nr),r);break}Gr(e,Tt,nr);break;case 5:Gr(e,Tt,nr);break;default:throw Error(o(329))}}}return Rt(e,pe()),e.callbackNode===n?dc.bind(null,e):null}function Jo(e,t){var n=vs;return e.current.memoizedState.isDehydrated&&(Kr(e,t).flags|=256),e=ya(e,t),e!==2&&(t=Tt,Tt=n,t!==null&&Xo(t)),e}function Xo(e){Tt===null?Tt=e:Tt.push.apply(Tt,e)}function Qd(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!un(a(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Nr(e,t){for(t&=~Qo,t&=~fa,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function fc(e){if((ke&6)!==0)throw Error(o(327));zl();var t=Kt(e,0);if((t&1)===0)return Rt(e,pe()),null;var n=ya(e,t);if(e.tag!==0&&n===2){var r=Rr(e);r!==0&&(t=r,n=Jo(e,r))}if(n===1)throw n=ys,Kr(e,0),Nr(e,t),Rt(e,pe()),n;if(n===6)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Gr(e,Tt,nr),Rt(e,pe()),null}function qo(e,t){var n=ke;ke|=1;try{return e(t)}finally{ke=n,ke===0&&(Ml=pe()+500,Qs&&gr())}}function Qr(e){wr!==null&&wr.tag===0&&(ke&6)===0&&zl();var t=ke;ke|=1;var n=Dt.transition,r=ue;try{if(Dt.transition=null,ue=1,e)return e()}finally{ue=r,Dt.transition=n,ke=t,(ke&6)===0&&gr()}}function Zo(){It=Ol.current,Be(Ol)}function Kr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,wd(n)),De!==null)for(n=De.return;n!==null;){var r=n;switch(ao(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Vs();break;case 3:Rl(),Be(_t),Be(pt),bo();break;case 5:yo(r);break;case 4:Rl();break;case 13:Be(He);break;case 19:Be(He);break;case 10:mo(r.type._context);break;case 22:case 23:Zo()}n=n.return}if(ot=e,De=e=Sr(e.current,null),ft=It=t,nt=0,ys=null,Qo=fa=Hr=0,Tt=vs=null,Br!==null){for(t=0;t<Br.length;t++)if(n=Br[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,a=n.pending;if(a!==null){var i=a.next;a.next=s,r.next=i}n.pending=r}Br=null}return e}function mc(e,t){do{var n=De;try{if(fo(),ta.current=sa,na){for(var r=Qe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}na=!1}if(Vr=0,at=tt=Qe=null,fs=!1,ms=0,Ho.current=null,n===null||n.return===null){nt=1,ys=t,De=null;break}e:{var a=e,i=n.return,h=n,g=t;if(t=ft,h.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){var C=g,A=h,U=A.tag;if((A.mode&1)===0&&(U===0||U===11||U===15)){var I=A.alternate;I?(A.updateQueue=I.updateQueue,A.memoizedState=I.memoizedState,A.lanes=I.lanes):(A.updateQueue=null,A.memoizedState=null)}var X=Au(i);if(X!==null){X.flags&=-257,Fu(X,i,h,a,t),X.mode&1&&Iu(a,C,t),t=X,g=C;var te=t.updateQueue;if(te===null){var le=new Set;le.add(g),t.updateQueue=le}else te.add(g);break e}else{if((t&1)===0){Iu(a,C,t),Do();break e}g=Error(o(426))}}else if(Ve&&h.mode&1){var Xe=Au(i);if(Xe!==null){(Xe.flags&65536)===0&&(Xe.flags|=256),Fu(Xe,i,h,a,t),uo(Ll(g,h));break e}}a=g=Ll(g,h),nt!==4&&(nt=2),vs===null?vs=[a]:vs.push(a),a=i;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var j=Mu(a,g,t);iu(a,j);break e;case 1:h=g;var v=a.type,N=a.stateNode;if((a.flags&128)===0&&(typeof v.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(br===null||!br.has(N)))){a.flags|=65536,t&=-t,a.lanes|=t;var V=zu(a,h,t);iu(a,V);break e}}a=a.return}while(a!==null)}gc(n)}catch(ae){t=ae,De===n&&n!==null&&(De=n=n.return);continue}break}while(!0)}function pc(){var e=da.current;return da.current=sa,e===null?sa:e}function Do(){(nt===0||nt===3||nt===2)&&(nt=4),ot===null||(Hr&268435455)===0&&(fa&268435455)===0||Nr(ot,ft)}function ya(e,t){var n=ke;ke|=2;var r=pc();(ot!==e||ft!==t)&&(nr=null,Kr(e,t));do try{Kd();break}catch(s){mc(e,s)}while(!0);if(fo(),ke=n,da.current=r,De!==null)throw Error(o(261));return ot=null,ft=0,nt}function Kd(){for(;De!==null;)hc(De)}function Gd(){for(;De!==null&&!Ul();)hc(De)}function hc(e){var t=vc(e.alternate,e,It);e.memoizedProps=e.pendingProps,t===null?gc(e):De=t,Ho.current=null}function gc(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&32768)===0){if(n=Fd(n,t,It),n!==null){De=n;return}}else{if(n=Ud(n,t),n!==null){n.flags&=32767,De=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{nt=6,De=null;return}}if(t=t.sibling,t!==null){De=t;return}De=t=e}while(t!==null);nt===0&&(nt=5)}function Gr(e,t,n){var r=ue,s=Dt.transition;try{Dt.transition=null,ue=1,Yd(e,t,n,r)}finally{Dt.transition=s,ue=r}return null}function Yd(e,t,n,r){do zl();while(wr!==null);if((ke&6)!==0)throw Error(o(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(Cs(e,a),e===ot&&(De=ot=null,ft=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||pa||(pa=!0,bc(Ze,function(){return zl(),null})),a=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||a){a=Dt.transition,Dt.transition=null;var i=ue;ue=1;var h=ke;ke|=4,Ho.current=null,Wd(e,n),ac(n,e),pd(Za),Mr=!!qa,Za=qa=null,e.current=n,Vd(n),F(),ke=h,ue=i,Dt.transition=a}else e.current=n;if(pa&&(pa=!1,wr=e,ha=s),a=e.pendingLanes,a===0&&(br=null),Vn(n.stateNode),Rt(e,pe()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ma)throw ma=!1,e=Go,Go=null,e;return(ha&1)!==0&&e.tag!==0&&zl(),a=e.pendingLanes,(a&1)!==0?e===Yo?bs++:(bs=0,Yo=e):bs=0,gr(),null}function zl(){if(wr!==null){var e=rl(ha),t=Dt.transition,n=ue;try{if(Dt.transition=null,ue=16>e?16:e,wr===null)var r=!1;else{if(e=wr,wr=null,ha=0,(ke&6)!==0)throw Error(o(331));var s=ke;for(ke|=4,D=e.current;D!==null;){var a=D,i=a.child;if((D.flags&16)!==0){var h=a.deletions;if(h!==null){for(var g=0;g<h.length;g++){var C=h[g];for(D=C;D!==null;){var A=D;switch(A.tag){case 0:case 11:case 15:xs(8,A,a)}var U=A.child;if(U!==null)U.return=A,D=U;else for(;D!==null;){A=D;var I=A.sibling,X=A.return;if(tc(A),A===C){D=null;break}if(I!==null){I.return=X,D=I;break}D=X}}}var te=a.alternate;if(te!==null){var le=te.child;if(le!==null){te.child=null;do{var Xe=le.sibling;le.sibling=null,le=Xe}while(le!==null)}}D=a}}if((a.subtreeFlags&2064)!==0&&i!==null)i.return=a,D=i;else e:for(;D!==null;){if(a=D,(a.flags&2048)!==0)switch(a.tag){case 0:case 11:case 15:xs(9,a,a.return)}var j=a.sibling;if(j!==null){j.return=a.return,D=j;break e}D=a.return}}var v=e.current;for(D=v;D!==null;){i=D;var N=i.child;if((i.subtreeFlags&2064)!==0&&N!==null)N.return=i,D=N;else e:for(i=v;D!==null;){if(h=D,(h.flags&2048)!==0)try{switch(h.tag){case 0:case 11:case 15:ca(9,h)}}catch(ae){Ye(h,h.return,ae)}if(h===i){D=null;break e}var V=h.sibling;if(V!==null){V.return=h.return,D=V;break e}D=h.return}}if(ke=s,gr(),bt&&typeof bt.onPostCommitFiberRoot=="function")try{bt.onPostCommitFiberRoot(jn,e)}catch{}r=!0}return r}finally{ue=n,Dt.transition=t}}return!1}function xc(e,t,n){t=Ll(n,t),t=Mu(e,t,1),e=yr(e,t,1),t=St(),e!==null&&(sn(e,1,t),Rt(e,t))}function Ye(e,t,n){if(e.tag===3)xc(e,e,n);else for(;t!==null;){if(t.tag===3){xc(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(br===null||!br.has(r))){e=Ll(n,e),e=zu(t,e,1),t=yr(t,e,1),e=St(),t!==null&&(sn(t,1,e),Rt(t,e));break}}t=t.return}}function Jd(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=St(),e.pingedLanes|=e.suspendedLanes&n,ot===e&&(ft&n)===n&&(nt===4||nt===3&&(ft&130023424)===ft&&500>pe()-Ko?Kr(e,0):Qo|=n),Rt(e,t)}function yc(e,t){t===0&&((e.mode&1)===0?t=1:(t=ur,ur<<=1,(ur&130023424)===0&&(ur=4194304)));var n=St();e=Dn(e,t),e!==null&&(sn(e,t,n),Rt(e,n))}function Xd(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),yc(e,n)}function qd(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}r!==null&&r.delete(t),yc(e,n)}var vc;vc=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||_t.current)kt=!0;else{if((e.lanes&n)===0&&(t.flags&128)===0)return kt=!1,Ad(e,t,n);kt=(e.flags&131072)!==0}else kt=!1,Ve&&(t.flags&1048576)!==0&&Zi(t,Gs,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ia(e,t),e=t.pendingProps;var s=Sl(t,pt.current);Tl(t,n),s=No(null,t,r,e,s,n);var a=So();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,$t(r)?(a=!0,Hs(t)):a=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,go(t),s.updater=aa,t.stateNode=s,s._reactInternals=t,To(t,r,e,n),t=Oo(null,t,r,!0,a,n)):(t.tag=0,Ve&&a&&so(t),Nt(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ia(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Dd(r),e=dn(r,e),s){case 0:t=Po(null,t,r,e,n);break e;case 1:t=Qu(null,t,r,e,n);break e;case 11:t=Uu(null,t,r,e,n);break e;case 14:t=Bu(null,t,r,dn(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:dn(r,s),Po(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:dn(r,s),Qu(e,t,r,s,n);case 3:e:{if(Ku(t),e===null)throw Error(o(387));r=t.pendingProps,a=t.memoizedState,s=a.element,ou(e,t),Ds(t,r,null,n);var i=t.memoizedState;if(r=i.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){s=Ll(Error(o(423)),t),t=Gu(e,t,r,n,s);break e}else if(r!==s){s=Ll(Error(o(424)),t),t=Gu(e,t,r,n,s);break e}else for(zt=mr(t.stateNode.containerInfo.firstChild),Mt=t,Ve=!0,cn=null,n=su(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(_l(),r===s){t=tr(e,t,n);break e}Nt(e,t,r,n)}t=t.child}return t;case 5:return cu(t),e===null&&io(t),r=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,i=s.children,Da(r,s)?i=null:a!==null&&Da(r,a)&&(t.flags|=32),Hu(e,t),Nt(e,t,i,n),t.child;case 6:return e===null&&io(t),null;case 13:return Yu(e,t,n);case 4:return xo(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=$l(t,null,r,n):Nt(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:dn(r,s),Uu(e,t,r,s,n);case 7:return Nt(e,t,t.pendingProps,n),t.child;case 8:return Nt(e,t,t.pendingProps.children,n),t.child;case 12:return Nt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,a=t.memoizedProps,i=s.value,Ae(Xs,r._currentValue),r._currentValue=i,a!==null)if(un(a.value,i)){if(a.children===s.children&&!_t.current){t=tr(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var h=a.dependencies;if(h!==null){i=a.child;for(var g=h.firstContext;g!==null;){if(g.context===r){if(a.tag===1){g=er(-1,n&-n),g.tag=2;var C=a.updateQueue;if(C!==null){C=C.shared;var A=C.pending;A===null?g.next=g:(g.next=A.next,A.next=g),C.pending=g}}a.lanes|=n,g=a.alternate,g!==null&&(g.lanes|=n),po(a.return,n,t),h.lanes|=n;break}g=g.next}}else if(a.tag===10)i=a.type===t.type?null:a.child;else if(a.tag===18){if(i=a.return,i===null)throw Error(o(341));i.lanes|=n,h=i.alternate,h!==null&&(h.lanes|=n),po(i,n,t),i=a.sibling}else i=a.child;if(i!==null)i.return=a;else for(i=a;i!==null;){if(i===t){i=null;break}if(a=i.sibling,a!==null){a.return=i.return,i=a;break}i=i.return}a=i}Nt(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Tl(t,n),s=qt(s),r=r(s),t.flags|=1,Nt(e,t,r,n),t.child;case 14:return r=t.type,s=dn(r,t.pendingProps),s=dn(r.type,s),Bu(e,t,r,s,n);case 15:return Wu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:dn(r,s),ia(e,t),t.tag=1,$t(r)?(e=!0,Hs(t)):e=!1,Tl(t,n),Pu(t,r,s),To(t,r,s,n),Oo(null,t,r,!0,e,n);case 19:return Xu(e,t,n);case 22:return Vu(e,t,n)}throw Error(o(156,t.tag))};function bc(e,t){return Dr(e,t)}function Zd(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function en(e,t,n,r){return new Zd(e,t,n,r)}function ei(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Dd(e){if(typeof e=="function")return ei(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Pe)return 11;if(e===Oe)return 14}return 2}function Sr(e,t){var n=e.alternate;return n===null?(n=en(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function va(e,t,n,r,s,a){var i=2;if(r=e,typeof e=="function")ei(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case Se:return Yr(n.children,s,a,t);case P:i=8,s|=8;break;case be:return e=en(12,n,t,s|2),e.elementType=be,e.lanes=a,e;case Me:return e=en(13,n,t,s),e.elementType=Me,e.lanes=a,e;case Te:return e=en(19,n,t,s),e.elementType=Te,e.lanes=a,e;case Ce:return ba(n,s,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ge:i=10;break e;case je:i=9;break e;case Pe:i=11;break e;case Oe:i=14;break e;case ze:i=16,r=null;break e}throw Error(o(130,e==null?e:typeof e,""))}return t=en(i,n,t,s),t.elementType=e,t.type=r,t.lanes=a,t}function Yr(e,t,n,r){return e=en(7,e,r,t),e.lanes=n,e}function ba(e,t,n,r){return e=en(22,e,r,t),e.elementType=Ce,e.lanes=n,e.stateNode={isHidden:!1},e}function ti(e,t,n){return e=en(6,e,null,t),e.lanes=n,e}function ni(e,t,n){return t=en(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function e0(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Lr(0),this.expirationTimes=Lr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lr(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function ri(e,t,n,r,s,a,i,h,g){return e=new e0(e,t,n,h,g),t===1?(t=1,a===!0&&(t|=8)):t=0,a=en(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},go(a),e}function t0(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Q,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function wc(e){if(!e)return hr;e=e._reactInternals;e:{if(Ht(e)!==e||e.tag!==1)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if($t(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(o(171))}if(e.tag===1){var n=e.type;if($t(n))return Ji(e,n,t)}return t}function jc(e,t,n,r,s,a,i,h,g){return e=ri(n,r,!0,e,s,a,i,h,g),e.context=wc(null),n=e.current,r=St(),s=jr(n),a=er(r,s),a.callback=t??null,yr(n,a,s),e.current.lanes=s,sn(e,s,r),Rt(e,r),e}function wa(e,t,n,r){var s=t.current,a=St(),i=jr(s);return n=wc(n),t.context===null?t.context=n:t.pendingContext=n,t=er(a,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=yr(s,t,i),e!==null&&(pn(e,s,i,a),Zs(e,s,i)),i}function ja(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Nc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function li(e,t){Nc(e,t),(e=e.alternate)&&Nc(e,t)}function n0(){return null}var Sc=typeof reportError=="function"?reportError:function(e){console.error(e)};function si(e){this._internalRoot=e}Na.prototype.render=si.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(o(409));wa(e,t,null,null)},Na.prototype.unmount=si.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Qr(function(){wa(null,e,null,null)}),t[Jn]=null}};function Na(e){this._internalRoot=e}Na.prototype.unstable_scheduleHydration=function(e){if(e){var t=sl();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Cn.length&&t!==0&&t<Cn[n].priority;n++);Cn.splice(n,0,e),n===0&&ol(e)}};function ai(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Sa(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Cc(){}function r0(e,t,n,r,s){if(s){if(typeof r=="function"){var a=r;r=function(){var C=ja(i);a.call(C)}}var i=jc(t,r,e,0,null,!1,!1,"",Cc);return e._reactRootContainer=i,e[Jn]=i.current,ls(e.nodeType===8?e.parentNode:e),Qr(),i}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var h=r;r=function(){var C=ja(g);h.call(C)}}var g=ri(e,0,!1,null,null,!1,!1,"",Cc);return e._reactRootContainer=g,e[Jn]=g.current,ls(e.nodeType===8?e.parentNode:e),Qr(function(){wa(t,g,n,r)}),g}function Ca(e,t,n,r,s){var a=n._reactRootContainer;if(a){var i=a;if(typeof s=="function"){var h=s;s=function(){var g=ja(i);h.call(g)}}wa(t,i,e,s)}else i=r0(n,t,e,s,r);return ja(i)}Es=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Qt(t.pendingLanes);n!==0&&(nl(t,n|1),Rt(t,pe()),(ke&6)===0&&(Ml=pe()+500,gr()))}break;case 13:Qr(function(){var r=Dn(e,1);if(r!==null){var s=St();pn(r,e,1,s)}}),li(e,1)}},cr=function(e){if(e.tag===13){var t=Dn(e,134217728);if(t!==null){var n=St();pn(t,e,134217728,n)}li(e,134217728)}},ll=function(e){if(e.tag===13){var t=jr(e),n=Dn(e,t);if(n!==null){var r=St();pn(n,e,t,r)}li(e,t)}},sl=function(){return ue},_s=function(e,t){var n=ue;try{return ue=e,t()}finally{ue=n}},rn=function(e,t,n){switch(t){case"input":if(Ln(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Ws(r);if(!s)throw Error(o(90));Rn(r),Ln(r,s)}}}break;case"textarea":Ft(e,n);break;case"select":t=n.value,t!=null&&et(e,!!n.multiple,t,!1)}},Wt=qo,vn=Qr;var l0={usingClientEntryPoint:!1,Events:[os,jl,Ws,Et,ar,qo]},ws={findFiberByHostInstance:Ir,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},s0={bundleType:ws.bundleType,version:ws.version,rendererPackageName:ws.rendererPackageName,rendererConfig:ws.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:oe.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ln(e),e===null?null:e.stateNode},findFiberByHostInstance:ws.findFiberByHostInstance||n0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ea=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ea.isDisabled&&Ea.supportsFiber)try{jn=Ea.inject(s0),bt=Ea}catch{}}return Lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=l0,Lt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ai(t))throw Error(o(200));return t0(e,t,null,n)},Lt.createRoot=function(e,t){if(!ai(e))throw Error(o(299));var n=!1,r="",s=Sc;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=ri(e,1,!1,null,null,n,!1,r,s),e[Jn]=t.current,ls(e.nodeType===8?e.parentNode:e),new si(t)},Lt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=ln(t),e=e===null?null:e.stateNode,e},Lt.flushSync=function(e){return Qr(e)},Lt.hydrate=function(e,t,n){if(!Sa(t))throw Error(o(200));return Ca(null,e,t,!0,n)},Lt.hydrateRoot=function(e,t,n){if(!ai(e))throw Error(o(405));var r=n!=null&&n.hydratedSources||null,s=!1,a="",i=Sc;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=jc(t,null,e,1,n??null,s,!1,a,i),e[Jn]=t.current,ls(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Na(t)},Lt.render=function(e,t,n){if(!Sa(t))throw Error(o(200));return Ca(null,e,t,!1,n)},Lt.unmountComponentAtNode=function(e){if(!Sa(e))throw Error(o(40));return e._reactRootContainer?(Qr(function(){Ca(null,null,e,!1,function(){e._reactRootContainer=null,e[Jn]=null})}),!0):!1},Lt.unstable_batchedUpdates=qo,Lt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Sa(n))throw Error(o(200));if(e==null||e._reactInternals===void 0)throw Error(o(38));return Ca(e,t,n,!1,r)},Lt.version="18.3.1-next-f1338f8080-20240426",Lt}var Pc;function Gc(){if(Pc)return ui.exports;Pc=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(d){console.error(d)}}return c(),ui.exports=m0(),ui.exports}var Oc;function p0(){if(Oc)return _a;Oc=1;var c=Gc();return _a.createRoot=c.createRoot,_a.hydrateRoot=c.hydrateRoot,_a}var h0=p0();const g0=Kc(h0);async function _e(c,d){const f=await(await fetch(c,{...d,headers:{"content-type":"application/json",...(d==null?void 0:d.headers)||{}}})).text();let p=null;try{p=f?JSON.parse(f):null}catch{p=null}return p}async function Mc(c,d,o){const p=await(await fetch(c,{method:"POST",body:d,headers:{}})).text();let u=null;try{u=p?JSON.parse(p):null}catch{u=null}return u}function k(...c){return c.filter(Boolean).join(" ")}function x0({actors:c,activeTab:d,onTabChange:o,unreadChatCount:f,isDark:p,onAddAgent:u,canAddAgent:x=!0}){const m=y.useRef(null),E=y.useRef(null);return y.useEffect(()=>{if(E.current&&m.current){const _=m.current,$=E.current,L=_.getBoundingClientRect(),z=$.getBoundingClientRect();z.left<L.left?_.scrollLeft-=L.left-z.left+16:z.right>L.right&&(_.scrollLeft+=z.right-L.right+16)}},[d]),l.jsxs("div",{ref:m,className:`flex items-center gap-2 px-4 border-b overflow-x-auto ${p?"bg-slate-900 border-slate-800":"bg-white border-gray-100"}`,style:{scrollbarWidth:"none",msOverflowStyle:"none"},role:"tablist","aria-label":"Navigation tabs",children:[l.jsxs("button",{ref:d==="chat"?E:null,onClick:()=>o("chat"),className:k("relative flex items-center gap-2 px-3 py-3 text-sm font-medium whitespace-nowrap transition-colors",d==="chat"?p?"text-white":"text-gray-900":p?"text-slate-500 hover:text-slate-300":"text-gray-500 hover:text-gray-700"),role:"tab","aria-selected":d==="chat",children:[l.jsx("span",{children:"Chat"}),f>0&&l.jsx("span",{className:"bg-blue-600 text-white text-[10px] px-1.5 py-0.5 rounded-full font-bold",children:f}),d==="chat"&&l.jsx("span",{className:`absolute bottom-0 left-0 right-0 h-0.5 rounded-t-full ${p?"bg-blue-500":"bg-blue-600"}`})]}),l.jsx("div",{className:`w-px h-4 flex-shrink-0 ${p?"bg-slate-800":"bg-gray-200"}`}),c.map(_=>{const $=d===_.id,L=_.running??_.enabled??!1;return l.jsxs("button",{ref:$?E:null,onClick:()=>o(_.id),className:k("relative flex items-center gap-2 px-3 py-3 text-sm font-medium whitespace-nowrap transition-colors",$?p?"text-white":"text-gray-900":p?"text-slate-500 hover:text-slate-300":"text-gray-500 hover:text-gray-700"),role:"tab","aria-selected":$,children:[l.jsx("span",{className:k("w-1.5 h-1.5 rounded-full",L?"bg-emerald-500":p?"bg-slate-700":"bg-gray-300")}),l.jsx("span",{children:_.id}),_.role==="foreman"&&l.jsx("span",{className:`text-[9px] px-1 py-0.5 rounded ${p?"bg-amber-900/30 text-amber-500":"bg-amber-50 text-amber-600"}`,children:"F"}),(_.unread_count??0)>0&&l.jsx("span",{className:k("text-white text-[10px] px-1.5 py-0.5 rounded-full font-bold shadow-sm",p?"bg-indigo-500":"bg-indigo-600"),children:_.unread_count}),$&&l.jsx("span",{className:`absolute bottom-0 left-0 right-0 h-0.5 rounded-t-full ${p?"bg-blue-500":"bg-blue-600"}`})]},_.id)}),u&&l.jsxs("button",{onClick:u,disabled:!x,className:k("ml-2 flex items-center gap-1.5 rounded-full border px-3 py-1.5 text-xs font-semibold transition-colors disabled:opacity-30 whitespace-nowrap",c.length===0?"bg-blue-600 text-white border-blue-500 hover:bg-blue-500":p?"bg-slate-900 border-slate-700 text-slate-300 hover:bg-slate-800":"bg-white border-gray-200 text-gray-700 hover:bg-gray-50"),title:c.length===0?"Add your first agent (foreman)":"Add agent","aria-label":"Add agent",children:[l.jsx("span",{className:"text-base leading-none",children:"+"}),l.jsx("span",{className:"hidden sm:inline",children:"Add"})]})]})}function y0({isOpen:c,onClose:d,groupId:o,context:f,onUpdateVision:p,onUpdateSketch:u,busy:x,isDark:m}){var ye;const[E,_]=y.useState(!1),[$,L]=y.useState(!1),[z,re]=y.useState(""),[se,H]=y.useState(""),[R,ie]=y.useState(null),[he,de]=y.useState(!1),[oe,K]=y.useState(""),[Q,Se]=y.useState(!1),[P,be]=y.useState(""),[ge,je]=y.useState(!1),[Pe,Me]=y.useState(!1),[Te,Oe]=y.useState(!1),[ze,Ce]=y.useState(""),W=y.useMemo(()=>{const T=R!=null&&R.path?String(R.path):"";return T||"PROJECT.md"},[R==null?void 0:R.path]),ee=y.useMemo(()=>`PROJECT.md updated. Please re-read and align. (${W})`,[W]);y.useEffect(()=>{if(!c||!o)return;let T=!1;return de(!0),K(""),Se(!1),Ce(""),je(!1),(async()=>{var $e;const ve=await _e(`/api/v1/groups/${encodeURIComponent(o)}/project_md`);if(!T){if(!ve.ok){ie(null),K((($e=ve.error)==null?void 0:$e.message)||"Failed to load PROJECT.md"),de(!1);return}ie(ve.result),de(!1)}})(),()=>{T=!0}},[o,c]);const G=()=>{re((f==null?void 0:f.vision)||""),_(!0)},w=async()=>{await p(z),_(!1)},O=()=>{H((f==null?void 0:f.sketch)||""),L(!0)},xe=async()=>{await u(se),L(!1)},B=()=>{be(R!=null&&R.content?String(R.content):""),K(""),Se(!0)},q=async()=>{var T;if(o){de(!0),K(""),Ce("");try{const ve=await _e(`/api/v1/groups/${encodeURIComponent(o)}/project_md`,{method:"PUT",body:JSON.stringify({content:P,by:"user"})});if(!ve.ok){K(((T=ve.error)==null?void 0:T.message)||"Failed to save PROJECT.md");return}ie(ve.result),Se(!1),Me(!1),je(!0)}finally{de(!1)}}},J=async()=>{var T;if(!o){je(!1);return}Oe(!0),Ce("");try{if(Pe){const ve=await _e(`/api/v1/groups/${encodeURIComponent(o)}/send`,{method:"POST",body:JSON.stringify({text:ee,by:"user",to:["@all"],path:""})});if(!ve.ok){Ce(((T=ve.error)==null?void 0:T.message)||"Failed to notify agents");return}}je(!1)}finally{Oe(!1)}};return c?l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 animate-fade-in",children:[l.jsx("div",{className:m?"absolute inset-0 bg-black/60":"absolute inset-0 bg-black/40",onClick:d,"aria-hidden":"true"}),l.jsxs("div",{className:`relative rounded-xl border shadow-2xl w-full max-w-2xl max-h-[80vh] flex flex-col animate-scale-in ${m?"bg-slate-900 border-slate-700":"bg-white border-gray-200"}`,role:"dialog","aria-modal":"true","aria-labelledby":"context-modal-title",children:[l.jsxs("div",{className:`flex items-center justify-between px-5 py-4 border-b ${m?"border-slate-800":"border-gray-200"}`,children:[l.jsx("h2",{id:"context-modal-title",className:`text-lg font-semibold ${m?"text-slate-100":"text-gray-900"}`,children:" Project Context"}),l.jsx("button",{onClick:d,className:`text-xl leading-none min-w-[44px] min-h-[44px] flex items-center justify-center rounded-lg transition-colors ${m?"text-slate-400 hover:text-slate-200 hover:bg-slate-800":"text-gray-400 hover:text-gray-600 hover:bg-gray-100"}`,"aria-label":"Close context modal",children:""})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-5 space-y-6",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-2 gap-2",children:[l.jsxs("div",{className:"min-w-0",children:[l.jsx("h3",{className:`text-sm font-medium ${m?"text-slate-300":"text-gray-700"}`,children:"PROJECT.md"}),l.jsx("div",{className:`text-[11px] truncate ${m?"text-slate-500":"text-gray-500"}`,title:W,children:he?"Loading":R!=null&&R.found?W:R!=null&&R.path?`Missing: ${R.path}`:"Missing"})]}),!Q&&l.jsx("button",{onClick:B,disabled:he||!o,className:`text-xs min-h-[36px] px-2 rounded transition-colors disabled:opacity-50 ${m?"text-slate-400 hover:text-slate-200":"text-gray-500 hover:text-gray-700"}`,children:R!=null&&R.found?" Edit":" Create"})]}),oe&&l.jsx("div",{className:`mb-2 text-xs rounded-lg border px-3 py-2 ${m?"border-rose-500/30 bg-rose-500/10 text-rose-300":"border-rose-300 bg-rose-50 text-rose-700"}`,children:oe}),Q?l.jsxs("div",{className:"space-y-2",children:[l.jsx("textarea",{value:P,onChange:T=>be(T.target.value),className:`w-full h-64 px-3 py-2 border rounded-lg text-sm resize-none font-mono transition-colors ${m?"bg-slate-800 border-slate-700 text-slate-200 focus:border-slate-500":"bg-white border-gray-300 text-gray-900 focus:border-blue-500"}`,placeholder:"Write your project constitution here"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:q,disabled:he||!o,className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-white text-sm rounded-lg disabled:opacity-50 min-h-[44px] transition-colors",children:he?"Saving...":"Save"}),l.jsx("button",{onClick:()=>Se(!1),disabled:he,className:`px-4 py-2 text-sm rounded-lg min-h-[44px] transition-colors disabled:opacity-50 ${m?"bg-slate-700 hover:bg-slate-600 text-slate-200":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,children:"Cancel"})]})]}):l.jsx("div",{className:`px-3 py-2 rounded-lg text-sm whitespace-pre-wrap min-h-[60px] max-h-[220px] overflow-auto ${m?"bg-slate-800/50 text-slate-300":"bg-gray-50 text-gray-700"}`,children:R!=null&&R.found&&R.content?String(R.content):l.jsx("span",{className:m?"text-slate-500 italic":"text-gray-400 italic",children:"No PROJECT.md found"})})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("h3",{className:`text-sm font-medium ${m?"text-slate-300":"text-gray-700"}`,children:"Vision"}),!E&&l.jsx("button",{onClick:G,className:`text-xs min-h-[36px] px-2 rounded transition-colors ${m?"text-slate-400 hover:text-slate-200":"text-gray-500 hover:text-gray-700"}`,children:" Edit"})]}),E?l.jsxs("div",{className:"space-y-2",children:[l.jsx("textarea",{value:z,onChange:T=>re(T.target.value),className:`w-full h-32 px-3 py-2 border rounded-lg text-sm resize-none transition-colors ${m?"bg-slate-800 border-slate-700 text-slate-200 focus:border-slate-500":"bg-white border-gray-300 text-gray-900 focus:border-blue-500"}`,placeholder:"Describe the project vision..."}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:w,disabled:x,className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-white text-sm rounded-lg disabled:opacity-50 min-h-[44px] transition-colors",children:x?"Saving...":"Save"}),l.jsx("button",{onClick:()=>_(!1),className:`px-4 py-2 text-sm rounded-lg min-h-[44px] transition-colors ${m?"bg-slate-700 hover:bg-slate-600 text-slate-200":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,children:"Cancel"})]})]}):l.jsx("div",{className:`px-3 py-2 rounded-lg text-sm whitespace-pre-wrap min-h-[60px] ${m?"bg-slate-800/50 text-slate-300":"bg-gray-50 text-gray-700"}`,children:(f==null?void 0:f.vision)||l.jsx("span",{className:m?"text-slate-500 italic":"text-gray-400 italic",children:"No vision set"})})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("h3",{className:`text-sm font-medium ${m?"text-slate-300":"text-gray-700"}`,children:"Sketch"}),!$&&l.jsx("button",{onClick:O,className:`text-xs min-h-[36px] px-2 rounded transition-colors ${m?"text-slate-400 hover:text-slate-200":"text-gray-500 hover:text-gray-700"}`,children:" Edit"})]}),$?l.jsxs("div",{className:"space-y-2",children:[l.jsx("textarea",{value:se,onChange:T=>H(T.target.value),className:`w-full h-32 px-3 py-2 border rounded-lg text-sm resize-none transition-colors ${m?"bg-slate-800 border-slate-700 text-slate-200 focus:border-slate-500":"bg-white border-gray-300 text-gray-900 focus:border-blue-500"}`,placeholder:"Technical sketch or architecture notes..."}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:xe,disabled:x,className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-white text-sm rounded-lg disabled:opacity-50 min-h-[44px] transition-colors",children:x?"Saving...":"Save"}),l.jsx("button",{onClick:()=>L(!1),className:`px-4 py-2 text-sm rounded-lg min-h-[44px] transition-colors ${m?"bg-slate-700 hover:bg-slate-600 text-slate-200":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,children:"Cancel"})]})]}):l.jsx("div",{className:`px-3 py-2 rounded-lg text-sm whitespace-pre-wrap min-h-[60px] ${m?"bg-slate-800/50 text-slate-300":"bg-gray-50 text-gray-700"}`,children:(f==null?void 0:f.sketch)||l.jsx("span",{className:m?"text-slate-500 italic":"text-gray-400 italic",children:"No sketch set"})})]}),l.jsxs("div",{children:[l.jsx("h3",{className:`text-sm font-medium mb-2 ${m?"text-slate-300":"text-gray-700"}`,children:"Milestones"}),f!=null&&f.milestones&&f.milestones.length>0?l.jsx("div",{className:"space-y-2",children:f.milestones.map(T=>l.jsxs("div",{className:`px-3 py-2 rounded-lg space-y-1 ${m?"bg-slate-800/50":"bg-gray-50"}`,children:[l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx("span",{className:k("text-[11px] px-1.5 py-0.5 rounded flex-shrink-0",m?"bg-slate-700 text-slate-300":"bg-gray-200 text-gray-700"),children:T.id}),l.jsx("span",{className:`text-sm font-medium min-w-0 truncate ${m?"text-slate-200":"text-gray-800"}`,children:T.name}),l.jsx("span",{className:k("text-[11px] px-2 py-0.5 rounded flex-shrink-0 ml-auto",T.status==="done"?m?"bg-emerald-900/50 text-emerald-300":"bg-emerald-100 text-emerald-700":T.status==="active"?m?"bg-blue-900/50 text-blue-300":"bg-blue-100 text-blue-700":m?"bg-slate-700 text-slate-400":"bg-gray-200 text-gray-600"),children:T.status||"pending"})]}),(T.started||T.completed)&&l.jsxs("div",{className:`text-[11px] ${m?"text-slate-500":"text-gray-500"}`,children:[T.started?`started ${T.started}`:"",T.started&&T.completed?"  ":"",T.completed?`completed ${T.completed}`:""]}),T.description&&l.jsx("div",{className:`text-xs whitespace-pre-wrap ${m?"text-slate-400":"text-gray-600"}`,children:T.description})]},T.id))}):l.jsx("div",{className:`px-3 py-2 rounded-lg text-sm italic ${m?"bg-slate-800/50 text-slate-500":"bg-gray-50 text-gray-400"}`,children:"No milestones"})]}),l.jsxs("div",{children:[l.jsx("h3",{className:`text-sm font-medium mb-2 ${m?"text-slate-300":"text-gray-700"}`,children:"Tasks"}),f!=null&&f.tasks_summary?l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:`px-3 py-2 rounded-lg text-xs ${m?"bg-slate-800/50 text-slate-300":"bg-gray-50 text-gray-700"}`,children:["total ",f.tasks_summary.total,"  active ",f.tasks_summary.active,"  planned ",f.tasks_summary.planned,"  done ",f.tasks_summary.done]}),f.active_task?l.jsxs("div",{className:`px-3 py-2 rounded-lg ${m?"bg-slate-800/50":"bg-gray-50"}`,children:[l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx("span",{className:`text-[11px] px-1.5 py-0.5 rounded ${m?"bg-slate-700 text-slate-300":"bg-gray-200 text-gray-700"}`,children:f.active_task.id}),l.jsxs("div",{className:"min-w-0 flex-1",children:[l.jsx("div",{className:`text-sm font-medium truncate ${m?"text-slate-200":"text-gray-800"}`,children:f.active_task.name}),f.active_task.goal&&l.jsx("div",{className:`text-xs mt-0.5 whitespace-pre-wrap ${m?"text-slate-400":"text-gray-600"}`,children:f.active_task.goal})]}),l.jsx("span",{className:k("text-[11px] px-2 py-0.5 rounded flex-shrink-0",f.active_task.status==="done"?m?"bg-emerald-900/50 text-emerald-300":"bg-emerald-100 text-emerald-700":f.active_task.status==="active"?m?"bg-blue-900/50 text-blue-300":"bg-blue-100 text-blue-700":m?"bg-slate-700 text-slate-400":"bg-gray-200 text-gray-600"),children:f.active_task.status||"planned"})]}),(f.active_task.assignee||f.active_task.milestone)&&l.jsxs("div",{className:`text-[11px] mt-1 ${m?"text-slate-500":"text-gray-500"}`,children:[f.active_task.milestone?`milestone ${f.active_task.milestone}`:"",f.active_task.milestone&&f.active_task.assignee?"  ":"",f.active_task.assignee?`assignee ${f.active_task.assignee}`:""]}),Array.isArray(f.active_task.steps)&&f.active_task.steps.length>0&&l.jsx("div",{className:"mt-2 space-y-1",children:f.active_task.steps.map(T=>l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx("span",{className:`text-[11px] px-1.5 py-0.5 rounded ${m?"bg-slate-700 text-slate-300":"bg-gray-200 text-gray-700"}`,children:T.id}),l.jsxs("div",{className:`text-xs flex-1 ${m?"text-slate-300":"text-gray-700"}`,children:[T.name,T.acceptance?l.jsx("div",{className:k("mt-0.5 whitespace-pre-wrap",m?"text-slate-500":"text-gray-500"),children:T.acceptance}):null]}),l.jsx("span",{className:`text-[11px] ${m?"text-slate-500":"text-gray-500"}`,children:T.status||""})]},T.id))})]}):l.jsx("div",{className:`px-3 py-2 rounded-lg text-sm italic ${m?"bg-slate-800/50 text-slate-500":"bg-gray-50 text-gray-400"}`,children:"No active task"})]}):l.jsx("div",{className:`px-3 py-2 rounded-lg text-sm italic ${m?"bg-slate-800/50 text-slate-500":"bg-gray-50 text-gray-400"}`,children:"No task summary"})]}),l.jsxs("div",{children:[l.jsx("h3",{className:`text-sm font-medium mb-2 ${m?"text-slate-300":"text-gray-700"}`,children:"Notes"}),f!=null&&f.notes&&f.notes.length>0?l.jsx("div",{className:"space-y-2",children:f.notes.map(T=>l.jsxs("div",{className:`px-3 py-2 rounded-lg ${m?"bg-slate-800/50":"bg-gray-50"}`,children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${m?"bg-slate-700 text-slate-300":"bg-gray-200 text-gray-700"}`,children:T.id}),typeof T.ttl=="number"&&l.jsxs("span",{className:`text-[11px] ${m?"text-slate-500":"text-gray-500"}`,children:["ttl ",T.ttl]}),T.expiring?l.jsx("span",{className:`text-[11px] ${m?"text-amber-300":"text-amber-600"}`,children:"expiring"}):null]}),l.jsx("div",{className:`text-xs mt-1 whitespace-pre-wrap ${m?"text-slate-300":"text-gray-700"}`,children:T.content})]},T.id))}):l.jsx("div",{className:`px-3 py-2 rounded-lg text-sm italic ${m?"bg-slate-800/50 text-slate-500":"bg-gray-50 text-gray-400"}`,children:"No notes"})]}),l.jsxs("div",{children:[l.jsx("h3",{className:`text-sm font-medium mb-2 ${m?"text-slate-300":"text-gray-700"}`,children:"References"}),f!=null&&f.references&&f.references.length>0?l.jsx("div",{className:"space-y-2",children:f.references.map(T=>l.jsxs("div",{className:`px-3 py-2 rounded-lg ${m?"bg-slate-800/50":"bg-gray-50"}`,children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${m?"bg-slate-700 text-slate-400":"bg-gray-200 text-gray-600"}`,children:T.id}),l.jsx("a",{href:T.url,target:"_blank",rel:"noopener noreferrer",className:`text-sm truncate hover:underline ${m?"text-blue-400":"text-blue-600"}`,title:T.url,children:T.url})]}),T.note?l.jsx("div",{className:`text-xs mt-1 whitespace-pre-wrap ${m?"text-slate-400":"text-gray-600"}`,children:T.note}):null]},T.id))}):l.jsx("div",{className:`px-3 py-2 rounded-lg text-sm italic ${m?"bg-slate-800/50 text-slate-500":"bg-gray-50 text-gray-400"}`,children:"No references"})]}),l.jsxs("div",{children:[l.jsx("h3",{className:`text-sm font-medium mb-2 ${m?"text-slate-300":"text-gray-700"}`,children:"Presence"}),(ye=f==null?void 0:f.presence)!=null&&ye.agents&&f.presence.agents.length>0?l.jsx("div",{className:"space-y-2",children:f.presence.agents.map(T=>l.jsxs("div",{className:`px-3 py-2 rounded-lg ${m?"bg-slate-800/50":"bg-gray-50"}`,children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:`text-sm font-medium ${m?"text-slate-200":"text-gray-800"}`,children:T.id}),T.updated_at?l.jsx("span",{className:`text-[11px] ml-auto ${m?"text-slate-500":"text-gray-500"}`,children:T.updated_at}):null]}),T.status?l.jsx("div",{className:`text-xs mt-1 whitespace-pre-wrap ${m?"text-slate-300":"text-gray-700"}`,children:T.status}):l.jsx("div",{className:`text-xs mt-1 italic ${m?"text-slate-500":"text-gray-500"}`,children:"No status"})]},T.id))}):l.jsx("div",{className:`px-3 py-2 rounded-lg text-sm italic ${m?"bg-slate-800/50 text-slate-500":"bg-gray-50 text-gray-400"}`,children:"No presence"})]})]})]}),ge&&l.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 animate-fade-in",children:[l.jsx("div",{className:m?"absolute inset-0 bg-black/70":"absolute inset-0 bg-black/50",onClick:()=>{Te||je(!1)},"aria-hidden":"true"}),l.jsxs("div",{className:`relative w-full max-w-md rounded-xl border shadow-2xl p-4 ${m?"bg-slate-900 border-slate-700":"bg-white border-gray-200"}`,role:"dialog","aria-modal":"true","aria-label":"Project updated",children:[l.jsx("div",{className:`text-sm font-semibold ${m?"text-slate-100":"text-gray-900"}`,children:"PROJECT.md saved"}),l.jsx("div",{className:`text-xs mt-1 ${m?"text-slate-400":"text-gray-500"}`,children:W}),ze&&l.jsx("div",{className:`mt-3 text-xs rounded-lg border px-3 py-2 ${m?"border-rose-500/30 bg-rose-500/10 text-rose-300":"border-rose-300 bg-rose-50 text-rose-700"}`,children:ze}),l.jsxs("label",{className:`mt-3 flex items-center gap-2 text-sm ${m?"text-slate-200":"text-gray-800"}`,children:[l.jsx("input",{type:"checkbox",checked:Pe,onChange:T=>Me(T.target.checked),disabled:Te}),"Notify agents in chat (@all)"]}),l.jsx("div",{className:`mt-2 text-[11px] rounded-lg px-3 py-2 whitespace-pre-wrap ${m?"bg-slate-800/60 text-slate-300":"bg-gray-50 text-gray-700"}`,children:ee}),l.jsxs("div",{className:"mt-3 flex gap-2",children:[l.jsx("button",{onClick:J,disabled:Te,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white text-sm rounded-lg disabled:opacity-50 min-h-[44px] transition-colors",children:Te?"Working...":"Done"}),l.jsx("button",{onClick:()=>je(!1),disabled:Te,className:`px-4 py-2 text-sm rounded-lg min-h-[44px] transition-colors disabled:opacity-50 ${m?"bg-slate-700 hover:bg-slate-600 text-slate-200":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,children:"Close"})]})]})]})]}):null}function v0({isOpen:c,onClose:d,settings:o,onUpdateSettings:f,busy:p,isDark:u,groupId:x}){const[m,E]=y.useState(x?"group":"global"),[_,$]=y.useState("timing"),[L,z]=y.useState("remote"),[re,se]=y.useState(300),[H,R]=y.useState(600),[ie,he]=y.useState(120),[de,oe]=y.useState(600),[K,Q]=y.useState(0),[Se,P]=y.useState(900),[be,ge]=y.useState("foreman"),[je,Pe]=y.useState(!1),[Me,Te]=y.useState(20),[Oe,ze]=y.useState(""),[Ce,W]=y.useState(8e3),[ee,G]=y.useState(!0),[w,O]=y.useState(!0),[xe,B]=y.useState(""),[q,J]=y.useState(""),[ye,T]=y.useState(""),[ve,$e]=y.useState(!1),[At,Rn]=y.useState(""),[qe,rr]=y.useState(null),[rt,hn]=y.useState("telegram"),[Ln,Pn]=y.useState(""),[gn,Pt]=y.useState(""),[et,ut]=y.useState(!1),[lt,Ft]=y.useState(!1),[tn,xn]=y.useState("INFO"),[lr,On]=y.useState(!1),[Mn,zn]=y.useState([]),[In,sr]=y.useState(""),[Er,Ut]=y.useState(""),[nn,yn]=y.useState(!1),[Bt,An]=y.useState("daemon"),[Fn,rn]=y.useState(200),[We,yt]=y.useState(""),[Ct,Et]=y.useState(""),[ar,Wt]=y.useState(!1);y.useEffect(()=>{c&&o&&(se(o.nudge_after_seconds),R(o.actor_idle_timeout_seconds),he(o.keepalive_delay_seconds),oe(o.silence_timeout_seconds),Q(o.min_interval_seconds),P(o.standup_interval_seconds??900),ge(o.terminal_transcript_visibility||"foreman"),Pe(!!o.terminal_transcript_notify_tail),Te(Number(o.terminal_transcript_notify_lines||20)))},[c,o]),y.useEffect(()=>{c&&E(x?"group":"global")},[c,x]),y.useEffect(()=>{c&&x&&vn()},[c,x]),y.useEffect(()=>{c&&Vt()},[c]),y.useEffect(()=>{c&&x&&_r()},[c,x]);const vn=async()=>{if(x)try{const pe=await(await fetch(`/api/im/status?group_id=${encodeURIComponent(x)}`)).json();pe.ok&&(rr(pe.result),pe.result.platform&&hn(pe.result.platform));const Ie=await(await fetch(`/api/im/config?group_id=${encodeURIComponent(x)}`)).json();if(Ie.ok&&Ie.result.im){const Fe=Ie.result.im;Fe.platform&&hn(Fe.platform),Pn(Fe.bot_token_env||Fe.token_env||Fe.bot_token||Fe.token||""),Pt(Fe.app_token_env||Fe.app_token||"")}}catch(F){console.error("Failed to load IM status:",F)}},Vt=async()=>{var F;try{const Re=await(await fetch("/api/v1/observability")).json();if(Re.ok&&((F=Re.result)!=null&&F.observability)){const Ie=Re.result.observability;Ft(!!Ie.developer_mode);const Fe=String(Ie.log_level||"INFO").toUpperCase();xn(Fe==="DEBUG"?"DEBUG":"INFO")}}catch{}},_r=async()=>{var F;if(x)try{const Re=await(await fetch(`/api/v1/groups/${encodeURIComponent(x)}/actors?include_unread=false`)).json();if(Re.ok&&((F=Re.result)!=null&&F.actors)){const Ie=Array.isArray(Re.result.actors)?Re.result.actors:[];zn(Ie),!Oe&&Ie.length>0&&ze(Ie[0].id)}}catch{}},bn=async()=>{var F;if(x){yn(!0),Ut("");try{const Re=await(await fetch(`/api/v1/debug/snapshot?group_id=${encodeURIComponent(x)}`)).json();Re.ok?sr(JSON.stringify(Re.result??{},null,2)):(sr(""),Ut(((F=Re.error)==null?void 0:F.message)||"Failed to load debug snapshot"))}catch{sr(""),Ut("Failed to load debug snapshot")}finally{yn(!1)}}},or=async()=>{var F,pe,Re;if(!(!x||!Oe)){$e(!0),T("");try{const Ie=new URLSearchParams({actor_id:Oe,max_chars:String(Ce||8e3),strip_ansi:String(!!ee),compact:String(!!w)}),Ze=await(await fetch(`/api/v1/groups/${encodeURIComponent(x)}/terminal/tail?${Ie.toString()}`)).json();Ze.ok?(B(String(((F=Ze.result)==null?void 0:F.text)||"")),J(String(((pe=Ze.result)==null?void 0:pe.hint)||""))):(B(""),J(""),T(((Re=Ze.error)==null?void 0:Re.message)||"Failed to load terminal transcript"))}catch{B(""),J(""),T("Failed to load terminal transcript")}finally{$e(!1)}}},wn=async()=>{var F,pe;Wt(!0),Et("");try{const Re=new URLSearchParams({component:Bt,group_id:x||"",lines:String(Fn||200)}),Fe=await(await fetch(`/api/v1/debug/tail_logs?${Re.toString()}`)).json();if(Fe.ok){const Ze=Array.isArray((F=Fe.result)==null?void 0:F.lines)?Fe.result.lines:[];yt(Ze.join(`
`))}else yt(""),Et(((pe=Fe.error)==null?void 0:pe.message)||"Failed to tail logs")}catch{yt(""),Et("Failed to tail logs")}finally{Wt(!1)}};if(!c)return null;const Al=async()=>{await f({nudge_after_seconds:re,actor_idle_timeout_seconds:H,keepalive_delay_seconds:ie,silence_timeout_seconds:de,min_interval_seconds:K,standup_interval_seconds:Se})},Un=async()=>{await f({terminal_transcript_visibility:be,terminal_transcript_notify_tail:je,terminal_transcript_notify_lines:Me})},Bn=async F=>{const pe=Math.max(1,Math.min(200,Number(F)||50)),Re=String(xe||"");if(!Re.trim())return;const Ie=Re.split(`
`),Fe=Ie.slice(Math.max(0,Ie.length-pe)).join(`
`).trimEnd();if(!Fe)return;const Ze=vt=>{Rn(vt),window.setTimeout(()=>Rn(""),1200)};try{if(navigator.clipboard&&typeof navigator.clipboard.writeText=="function"){await navigator.clipboard.writeText(Fe),Ze(`Copied last ${pe} lines`);return}}catch{}try{const vt=document.createElement("textarea");vt.value=Fe,vt.style.position="fixed",vt.style.left="-9999px",vt.style.top="0",document.body.appendChild(vt),vt.focus(),vt.select();const Tr=document.execCommand("copy");document.body.removeChild(vt),Ze(Tr?`Copied last ${pe} lines`:"Copy failed")}catch{Ze("Copy failed")}},Wn=async()=>{var F;if(!(!x||!Oe)){$e(!0),T("");try{const Re=await(await fetch(`/api/v1/groups/${encodeURIComponent(x)}/terminal/clear?actor_id=${encodeURIComponent(Oe)}`,{method:"POST"})).json();if(!Re.ok){T(((F=Re.error)==null?void 0:F.message)||"Failed to clear terminal transcript");return}B(""),J("")}catch{T("Failed to clear terminal transcript")}finally{$e(!1)}}},ir=async()=>{if(x){ut(!0);try{(await(await fetch("/api/im/set",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({group_id:x,platform:rt,bot_token_env:Ln,app_token_env:rt==="slack"?gn:void 0})})).json()).ok&&await vn()}catch(F){console.error("Failed to save IM config:",F)}finally{ut(!1)}}},Jr=async()=>{if(x){ut(!0);try{(await(await fetch("/api/im/unset",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({group_id:x})})).json()).ok&&(Pn(""),Pt(""),await vn())}catch(F){console.error("Failed to remove IM config:",F)}finally{ut(!1)}}},Xr=async()=>{if(x){ut(!0);try{await(await fetch("/api/im/start",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({group_id:x})})).json(),await vn()}catch(F){console.error("Failed to start bridge:",F)}finally{ut(!1)}}},$r=async()=>{if(x){ut(!0);try{await(await fetch("/api/im/stop",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({group_id:x})})).json(),await vn()}catch(F){console.error("Failed to stop bridge:",F)}finally{ut(!1)}}},Ht=async()=>{On(!0);try{(await(await fetch("/api/v1/observability",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({by:"user",developer_mode:lt,log_level:tn})})).json()).ok&&await Vt()}catch{}finally{On(!1)}},qr=m==="group"?[{id:"timing",label:"Timing"},{id:"im",label:"IM Bridge"},{id:"transcript",label:"Transcript"}]:[{id:"remote",label:"Remote Access"},{id:"developer",label:"Developer"}],ln=m==="group"?_:L,Zr=F=>{m==="group"?$(F):z(F)},Dr=()=>{switch(rt){case"telegram":return"Bot Token (token or env var)";case"slack":return"Bot Token (xoxb- or env var)";case"discord":return"Bot Token (token or env var)"}},el=()=>{switch(rt){case"telegram":return"TELEGRAM_BOT_TOKEN (or 123456:ABC...)";case"slack":return"SLACK_BOT_TOKEN (or xoxb-...)";case"discord":return"DISCORD_BOT_TOKEN (or <token>)"}},Ul=()=>!(!Ln||rt==="slack"&&!gn);return l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 animate-fade-in",children:[l.jsx("div",{className:u?"absolute inset-0 bg-black/60":"absolute inset-0 bg-black/40",onClick:d,"aria-hidden":"true"}),l.jsxs("div",{className:`relative rounded-xl border shadow-2xl w-full max-w-lg max-h-[80vh] flex flex-col animate-scale-in ${u?"bg-slate-900 border-slate-700":"bg-white border-gray-200"}`,role:"dialog","aria-modal":"true","aria-labelledby":"settings-modal-title",children:[l.jsxs("div",{className:`flex items-center justify-between px-5 py-4 border-b ${u?"border-slate-800":"border-gray-200"}`,children:[l.jsx("h2",{id:"settings-modal-title",className:`text-lg font-semibold ${u?"text-slate-100":"text-gray-900"}`,children:" Settings"}),l.jsx("button",{onClick:d,className:`text-xl leading-none min-w-[44px] min-h-[44px] flex items-center justify-center rounded-lg transition-colors ${u?"text-slate-400 hover:text-slate-200 hover:bg-slate-800":"text-gray-400 hover:text-gray-600 hover:bg-gray-100"}`,"aria-label":"Close settings",children:""})]}),l.jsxs("div",{className:`px-5 py-3 border-b ${u?"border-slate-800":"border-gray-200"}`,children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{type:"button",onClick:()=>E("group"),disabled:!x,className:`px-3 py-2 rounded-lg text-sm min-h-[44px] font-medium transition-colors ${m==="group"?u?"bg-emerald-500/15 text-emerald-300 border border-emerald-500/30":"bg-emerald-50 text-emerald-700 border border-emerald-200":u?"bg-slate-900 text-slate-300 border border-slate-800 hover:bg-slate-800":"bg-white text-gray-700 border border-gray-200 hover:bg-gray-50"} disabled:opacity-40`,children:"This group"}),l.jsx("button",{type:"button",onClick:()=>E("global"),className:`px-3 py-2 rounded-lg text-sm min-h-[44px] font-medium transition-colors ${m==="global"?u?"bg-emerald-500/15 text-emerald-300 border border-emerald-500/30":"bg-emerald-50 text-emerald-700 border border-emerald-200":u?"bg-slate-900 text-slate-300 border border-slate-800 hover:bg-slate-800":"bg-white text-gray-700 border border-gray-200 hover:bg-gray-50"}`,children:"Global"})]}),m==="group"&&x&&l.jsxs("div",{className:`mt-2 text-[11px] ${u?"text-slate-500":"text-gray-500"}`,children:["Applies to ",l.jsx("span",{className:"font-mono",children:x})," only."]}),m==="global"&&l.jsx("div",{className:`mt-2 text-[11px] ${u?"text-slate-500":"text-gray-500"}`,children:"Applies to your whole CCCC instance (daemon + Web)."})]}),l.jsx("div",{className:`flex border-b ${u?"border-slate-800":"border-gray-200"}`,children:qr.map(F=>l.jsx("button",{onClick:()=>Zr(F.id),className:`px-4 py-2.5 text-sm font-medium transition-colors ${ln===F.id?u?"text-emerald-400 border-b-2 border-emerald-400":"text-emerald-600 border-b-2 border-emerald-600":u?"text-slate-400 hover:text-slate-200":"text-gray-500 hover:text-gray-700"}`,children:F.label},F.id))}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-5 space-y-6",children:[ln==="timing"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:`text-sm font-medium ${u?"text-slate-300":"text-gray-700"}`,children:"Group Timing"}),l.jsx("p",{className:`text-xs mt-1 ${u?"text-slate-500":"text-gray-500"}`,children:"These settings apply to the current working group."})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:`block text-xs mb-1 ${u?"text-slate-400":"text-gray-500"}`,children:"Nudge After (sec)"}),l.jsx("input",{type:"number",value:re,onChange:F=>se(Number(F.target.value)),className:`w-full px-3 py-2.5 rounded-lg border text-sm min-h-[44px] transition-colors ${u?"bg-slate-800 border-slate-700 text-slate-200 focus:border-slate-500":"bg-white border-gray-300 text-gray-900 focus:border-blue-500"}`})]}),l.jsxs("div",{children:[l.jsx("label",{className:`block text-xs mb-1 ${u?"text-slate-400":"text-gray-500"}`,children:"Actor Idle (sec)"}),l.jsx("input",{type:"number",value:H,onChange:F=>R(Number(F.target.value)),className:`w-full px-3 py-2.5 rounded-lg border text-sm min-h-[44px] transition-colors ${u?"bg-slate-800 border-slate-700 text-slate-200 focus:border-slate-500":"bg-white border-gray-300 text-gray-900 focus:border-blue-500"}`})]}),l.jsxs("div",{children:[l.jsx("label",{className:`block text-xs mb-1 ${u?"text-slate-400":"text-gray-500"}`,children:"Keepalive (sec)"}),l.jsx("input",{type:"number",value:ie,onChange:F=>he(Number(F.target.value)),className:`w-full px-3 py-2.5 rounded-lg border text-sm min-h-[44px] transition-colors ${u?"bg-slate-800 border-slate-700 text-slate-200 focus:border-slate-500":"bg-white border-gray-300 text-gray-900 focus:border-blue-500"}`})]}),l.jsxs("div",{children:[l.jsx("label",{className:`block text-xs mb-1 ${u?"text-slate-400":"text-gray-500"}`,children:"Silence (sec)"}),l.jsx("input",{type:"number",value:de,onChange:F=>oe(Number(F.target.value)),className:`w-full px-3 py-2.5 rounded-lg border text-sm min-h-[44px] transition-colors ${u?"bg-slate-800 border-slate-700 text-slate-200 focus:border-slate-500":"bg-white border-gray-300 text-gray-900 focus:border-blue-500"}`})]}),l.jsxs("div",{children:[l.jsx("label",{className:`block text-xs mb-1 ${u?"text-slate-400":"text-gray-500"}`,children:"Delivery Interval (sec)"}),l.jsx("input",{type:"number",value:K,onChange:F=>Q(Number(F.target.value)),className:`w-full px-3 py-2.5 rounded-lg border text-sm min-h-[44px] transition-colors ${u?"bg-slate-800 border-slate-700 text-slate-200 focus:border-slate-500":"bg-white border-gray-300 text-gray-900 focus:border-blue-500"}`})]}),l.jsxs("div",{children:[l.jsx("label",{className:`block text-xs mb-1 ${u?"text-slate-400":"text-gray-500"}`,children:"Standup Interval (sec)"}),l.jsx("input",{type:"number",value:Se,onChange:F=>P(Number(F.target.value)),className:`w-full px-3 py-2.5 rounded-lg border text-sm min-h-[44px] transition-colors ${u?"bg-slate-800 border-slate-700 text-slate-200 focus:border-slate-500":"bg-white border-gray-300 text-gray-900 focus:border-blue-500"}`}),l.jsx("p",{className:`text-xs mt-1 ${u?"text-slate-500":"text-gray-400"}`,children:"Periodic review reminder (default 900 = 15 min)"})]})]}),l.jsx("button",{onClick:Al,disabled:p,className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-white text-sm rounded-lg disabled:opacity-50 min-h-[44px] transition-colors font-medium",children:p?"Saving...":"Save Timing Settings"})]}),ln==="im"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:`text-sm font-medium ${u?"text-slate-300":"text-gray-700"}`,children:"IM Bridge"}),l.jsx("p",{className:`text-xs mt-1 ${u?"text-slate-500":"text-gray-500"}`,children:"Connect this group to Telegram, Slack, or Discord."})]}),qe&&l.jsxs("div",{className:`p-3 rounded-lg ${u?"bg-slate-800":"bg-gray-100"}`,children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:`w-2 h-2 rounded-full ${qe.running?"bg-emerald-500":"bg-gray-400"}`}),l.jsx("span",{className:`text-sm ${u?"text-slate-300":"text-gray-700"}`,children:qe.running?"Running":"Stopped"}),qe.running&&qe.pid&&l.jsxs("span",{className:`text-xs ${u?"text-slate-500":"text-gray-500"}`,children:["(PID: ",qe.pid,")"]})]}),qe.configured&&l.jsxs("div",{className:`text-xs mt-1 ${u?"text-slate-400":"text-gray-500"}`,children:["Platform: ",qe.platform,"  Subscribers: ",qe.subscribers]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:`block text-xs mb-1 ${u?"text-slate-400":"text-gray-500"}`,children:"Platform"}),l.jsxs("select",{value:rt,onChange:F=>hn(F.target.value),className:`w-full px-3 py-2.5 rounded-lg border text-sm min-h-[44px] transition-colors ${u?"bg-slate-800 border-slate-700 text-slate-200 focus:border-slate-500":"bg-white border-gray-300 text-gray-900 focus:border-blue-500"}`,children:[l.jsx("option",{value:"telegram",children:"Telegram"}),l.jsx("option",{value:"slack",children:"Slack"}),l.jsx("option",{value:"discord",children:"Discord"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:`block text-xs mb-1 ${u?"text-slate-400":"text-gray-500"}`,children:Dr()}),l.jsx("input",{type:"text",value:Ln,onChange:F=>Pn(F.target.value),placeholder:el(),className:`w-full px-3 py-2.5 rounded-lg border text-sm min-h-[44px] transition-colors ${u?"bg-slate-800 border-slate-700 text-slate-200 focus:border-slate-500 placeholder:text-slate-600":"bg-white border-gray-300 text-gray-900 focus:border-blue-500 placeholder:text-gray-400"}`}),l.jsx("p",{className:`text-xs mt-1 ${u?"text-slate-500":"text-gray-400"}`,children:rt==="slack"?"Paste xoxb- token or an env var name; required for outbound messages.":"Paste the bot token or an env var name; required for bot authentication."})]}),rt==="slack"&&l.jsxs("div",{children:[l.jsx("label",{className:`block text-xs mb-1 ${u?"text-slate-400":"text-gray-500"}`,children:"App Token (xapp- or env var)"}),l.jsx("input",{type:"text",value:gn,onChange:F=>Pt(F.target.value),placeholder:"SLACK_APP_TOKEN (or xapp-...)",className:`w-full px-3 py-2.5 rounded-lg border text-sm min-h-[44px] transition-colors ${u?"bg-slate-800 border-slate-700 text-slate-200 focus:border-slate-500 placeholder:text-slate-600":"bg-white border-gray-300 text-gray-900 focus:border-blue-500 placeholder:text-gray-400"}`}),l.jsx("p",{className:`text-xs mt-1 ${u?"text-slate-500":"text-gray-400"}`,children:"Optional; needed for inbound messages (Socket Mode)."})]})]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsx("button",{onClick:ir,disabled:et||!Ul(),className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-white text-sm rounded-lg disabled:opacity-50 min-h-[44px] transition-colors font-medium",children:et?"Saving...":"Save Config"}),(qe==null?void 0:qe.configured)&&l.jsxs(l.Fragment,{children:[qe.running?l.jsx("button",{onClick:$r,disabled:et,className:`px-4 py-2 text-sm rounded-lg min-h-[44px] transition-colors font-medium ${u?"bg-red-900/50 hover:bg-red-800/50 text-red-300":"bg-red-100 hover:bg-red-200 text-red-700"} disabled:opacity-50`,children:"Stop Bridge"}):l.jsx("button",{onClick:Xr,disabled:et,className:`px-4 py-2 text-sm rounded-lg min-h-[44px] transition-colors font-medium ${u?"bg-blue-900/50 hover:bg-blue-800/50 text-blue-300":"bg-blue-100 hover:bg-blue-200 text-blue-700"} disabled:opacity-50`,children:"Start Bridge"}),l.jsx("button",{onClick:Jr,disabled:et,className:`px-4 py-2 text-sm rounded-lg min-h-[44px] transition-colors font-medium ${u?"bg-slate-800 hover:bg-slate-700 text-slate-300":"bg-gray-200 hover:bg-gray-300 text-gray-700"} disabled:opacity-50`,children:"Remove Config"})]})]}),l.jsxs("div",{className:`text-xs space-y-1 ${u?"text-slate-500":"text-gray-500"}`,children:[l.jsx("p",{children:"To use IM Bridge:"}),l.jsxs("ol",{className:"list-decimal list-inside space-y-0.5 ml-2",children:[l.jsx("li",{children:"Create a bot on your IM platform"}),l.jsx("li",{children:"Set the token(s) as environment variable(s)"}),l.jsx("li",{children:"Save the config and start the bridge"}),l.jsx("li",{children:"In your IM chat, send /subscribe to receive messages"})]})]})]}),ln==="transcript"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:`text-sm font-medium ${u?"text-slate-300":"text-gray-700"}`,children:"Terminal transcript"}),l.jsx("p",{className:`text-xs mt-1 ${u?"text-slate-500":"text-gray-500"}`,children:"Readable tail for troubleshooting. User can always view; agent access is controlled by the policy below."})]}),l.jsxs("div",{className:`rounded-lg border p-3 ${u?"border-slate-800 bg-slate-950/30":"border-gray-200 bg-gray-50"}`,children:[l.jsx("div",{className:`text-sm font-semibold ${u?"text-slate-200":"text-gray-800"}`,children:"Policy"}),l.jsxs("div",{className:"mt-3 space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:`block text-xs mb-1 ${u?"text-slate-400":"text-gray-600"}`,children:"Visibility to agents"}),l.jsxs("select",{value:be,onChange:F=>{const pe=F.target.value;(pe==="off"||pe==="foreman"||pe==="all")&&ge(pe)},className:`w-full px-3 py-2.5 rounded-lg border text-sm min-h-[44px] transition-colors ${u?"bg-slate-800 border-slate-700 text-slate-200 focus:border-slate-500":"bg-white border-gray-300 text-gray-900 focus:border-blue-500"}`,children:[l.jsx("option",{value:"off",children:"off (agents cannot read others)"}),l.jsx("option",{value:"foreman",children:"foreman (foreman can read peers)"}),l.jsx("option",{value:"all",children:"all (any agent can read others)"})]}),l.jsx("div",{className:`mt-1 text-[11px] ${u?"text-slate-500":"text-gray-600"}`,children:"Tip: This only affects agents. The Web UI user can always view transcripts."})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsxs("label",{className:`inline-flex items-center gap-2 text-sm ${u?"text-slate-300":"text-gray-700"}`,children:[l.jsx("input",{type:"checkbox",checked:je,onChange:F=>Pe(F.target.checked),className:"h-4 w-4"}),"Include tail in idle notifications"]}),l.jsxs("div",{children:[l.jsx("label",{className:`block text-xs mb-1 ${u?"text-slate-400":"text-gray-600"}`,children:"Notification lines"}),l.jsx("input",{type:"number",value:Me,min:1,max:80,onChange:F=>Te(Number(F.target.value||20)),disabled:!je,className:`w-full px-3 py-2.5 rounded-lg border text-sm min-h-[44px] transition-colors ${u?"bg-slate-800 border-slate-700 text-slate-200 focus:border-slate-500":"bg-white border-gray-300 text-gray-900 focus:border-blue-500"} disabled:opacity-60`})]})]}),l.jsx("button",{onClick:Un,disabled:p,className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-white text-sm rounded-lg disabled:opacity-50 min-h-[44px] transition-colors font-medium",children:p?"Saving...":"Save transcript settings"})]})]}),l.jsxs("div",{className:`rounded-lg border p-3 ${u?"border-slate-800 bg-slate-950/30":"border-gray-200 bg-gray-50"}`,children:[l.jsxs("div",{className:"flex items-center justify-between gap-3",children:[l.jsxs("div",{children:[l.jsx("div",{className:`text-sm font-semibold ${u?"text-slate-200":"text-gray-800"}`,children:"Tail viewer"}),l.jsx("div",{className:`text-xs mt-0.5 ${u?"text-slate-500":"text-gray-600"}`,children:"Best-effort transcript tail from the actor PTY ring buffer."})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:or,disabled:!x||!Oe||ve,className:`px-3 py-2 rounded-lg text-sm min-h-[44px] font-medium transition-colors ${u?"bg-slate-800 hover:bg-slate-700 text-slate-200":"bg-white hover:bg-gray-50 text-gray-800 border border-gray-200"} disabled:opacity-50`,children:ve?"Loading...":"Refresh"}),l.jsx("button",{onClick:()=>Bn(50),disabled:!xe.trim(),className:`px-3 py-2 rounded-lg text-sm min-h-[44px] font-medium transition-colors ${u?"bg-slate-900 hover:bg-slate-800 text-slate-300 border border-slate-800":"bg-white hover:bg-gray-50 text-gray-700 border border-gray-200"} disabled:opacity-50`,children:"Copy last 50 lines"})]})]}),l.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-2",children:[l.jsx("label",{className:`block text-xs ${u?"text-slate-400":"text-gray-600"}`,children:"Actor"}),l.jsxs("select",{value:Oe,onChange:F=>ze(F.target.value),className:`w-full px-3 py-2.5 rounded-lg border text-sm min-h-[44px] transition-colors ${u?"bg-slate-800 border-slate-700 text-slate-200 focus:border-slate-500":"bg-white border-gray-300 text-gray-900 focus:border-blue-500"}`,children:[Mn.map(F=>l.jsxs("option",{value:F.id,children:[F.id,F.role?` (${F.role})`:""]},F.id)),!Mn.length&&l.jsx("option",{value:"",children:"(no actors)"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsxs("div",{children:[l.jsx("label",{className:`block text-xs mb-1 ${u?"text-slate-400":"text-gray-600"}`,children:"Max chars"}),l.jsx("input",{type:"number",value:Ce,min:1e3,max:2e5,onChange:F=>W(Number(F.target.value||8e3)),className:`w-full px-3 py-2.5 rounded-lg border text-sm min-h-[44px] transition-colors ${u?"bg-slate-800 border-slate-700 text-slate-200 focus:border-slate-500":"bg-white border-gray-300 text-gray-900 focus:border-blue-500"}`})]}),l.jsx("div",{className:"flex items-end justify-end",children:l.jsx("button",{onClick:Wn,disabled:!x||!Oe||ve,className:`px-3 py-2 rounded-lg text-sm min-h-[44px] font-medium transition-colors ${u?"bg-rose-900/30 hover:bg-rose-900/40 text-rose-200 border border-rose-900/30":"bg-rose-50 hover:bg-rose-100 text-rose-700 border border-rose-200"} disabled:opacity-50`,children:"Clear (truncate)"})})]}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsxs("label",{className:`inline-flex items-center gap-2 text-sm ${u?"text-slate-300":"text-gray-700"}`,children:[l.jsx("input",{type:"checkbox",checked:ee,onChange:F=>G(F.target.checked),className:"h-4 w-4"}),"Strip ANSI"]}),l.jsxs("label",{className:`inline-flex items-center gap-2 text-sm ${u?"text-slate-300":"text-gray-700"}`,children:[l.jsx("input",{type:"checkbox",checked:w,disabled:!ee,onChange:F=>O(F.target.checked),className:"h-4 w-4"}),"Compact repeated frames"]})]})]}),!!At&&l.jsx("div",{className:`mt-2 text-xs ${u?"text-emerald-300":"text-emerald-700"}`,children:At}),ye&&l.jsx("div",{className:`mt-2 text-xs ${u?"text-rose-300":"text-rose-600"}`,children:ye}),q&&!ye&&l.jsx("div",{className:`mt-2 text-xs ${u?"text-slate-500":"text-gray-600"}`,children:q}),l.jsx("pre",{className:`mt-2 p-2 rounded overflow-x-auto whitespace-pre text-[11px] max-h-[300px] overflow-y-auto ${u?"bg-slate-900 text-slate-200":"bg-white text-gray-800 border border-gray-200"}`,children:l.jsx("code",{children:xe||""})})]})]}),ln==="remote"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:`text-sm font-medium ${u?"text-slate-300":"text-gray-700"}`,children:"Remote Access (Phone)"}),l.jsx("p",{className:`text-xs mt-1 ${u?"text-slate-500":"text-gray-500"}`,children:"Recommended for anywhere access: use Cloudflare Tunnel or Tailscale. CCCC does not manage these for you yetthis is a setup guide."}),l.jsxs("div",{className:`mt-2 rounded-lg border px-3 py-2 text-[11px] ${u?"border-amber-500/30 bg-amber-500/10 text-amber-200":"border-amber-200 bg-amber-50 text-amber-800"}`,children:[l.jsx("div",{className:"font-medium",children:"Security note"}),l.jsxs("div",{className:"mt-1",children:["Treat the Web UI as ",l.jsx("span",{className:"font-medium",children:"high privilege"})," (it can control agents and access project files). Do not expose it to the public internet without access control (e.g., Cloudflare Access)."]})]})]}),l.jsxs("div",{className:`rounded-lg border p-3 ${u?"border-slate-800 bg-slate-950/30":"border-gray-200 bg-gray-50"}`,children:[l.jsx("div",{className:`text-sm font-semibold ${u?"text-slate-200":"text-gray-800"}`,children:"Cloudflare Tunnel (recommended)"}),l.jsx("div",{className:`text-xs mt-1 ${u?"text-slate-500":"text-gray-600"}`,children:"Easiest for phone access: no VPN app required. Pair with Cloudflare Zero Trust Access for login protection."}),l.jsx("div",{className:`mt-3 text-xs font-medium ${u?"text-slate-300":"text-gray-700"}`,children:"Quick (temporary URL)"}),l.jsx("pre",{className:`mt-1.5 p-2 rounded overflow-x-auto whitespace-pre text-[11px] ${u?"bg-slate-900 text-slate-200":"bg-white text-gray-800 border border-gray-200"}`,children:l.jsx("code",{children:`# Install cloudflared first, then:
cloudflared tunnel --url http://127.0.0.1:8848
# It will print a https://....trycloudflare.com URL`})}),l.jsx("div",{className:`mt-3 text-xs font-medium ${u?"text-slate-300":"text-gray-700"}`,children:"Stable (your domain)"}),l.jsx("pre",{className:`mt-1.5 p-2 rounded overflow-x-auto whitespace-pre text-[11px] ${u?"bg-slate-900 text-slate-200":"bg-white text-gray-800 border border-gray-200"}`,children:l.jsx("code",{children:`# 1) Authenticate
cloudflared tunnel login

# 2) Create a named tunnel
cloudflared tunnel create cccc

# 3) Route DNS (replace with your hostname)
cloudflared tunnel route dns cccc cccc.example.com

# 4) Create ~/.cloudflared/config.yml (example):
# tunnel: <TUNNEL-UUID>
# credentials-file: /home/<you>/.cloudflared/<TUNNEL-UUID>.json
# ingress:
#   - hostname: cccc.example.com
#     service: http://127.0.0.1:8848
#   - service: http_status:404

# 5) Run
cloudflared tunnel run cccc`})}),l.jsx("div",{className:`mt-2 text-[11px] ${u?"text-slate-500":"text-gray-600"}`,children:"Tip: In Cloudflare Zero Trust  Access  Applications, create a Self-hosted app for your hostname to require login."})]}),l.jsxs("div",{className:`rounded-lg border p-3 ${u?"border-slate-800 bg-slate-950/30":"border-gray-200 bg-gray-50"}`,children:[l.jsx("div",{className:`text-sm font-semibold ${u?"text-slate-200":"text-gray-800"}`,children:"Tailscale (VPN)"}),l.jsx("div",{className:`text-xs mt-1 ${u?"text-slate-500":"text-gray-600"}`,children:"Strong option if youre okay installing Tailscale on your phone. You can keep CCCC bound to a private interface."}),l.jsx("pre",{className:`mt-2 p-2 rounded overflow-x-auto whitespace-pre text-[11px] ${u?"bg-slate-900 text-slate-200":"bg-white text-gray-800 border border-gray-200"}`,children:l.jsx("code",{children:`# 1) Install Tailscale on the server + phone, then on the server:
tailscale up

# 2) Get your tailnet IP
TAILSCALE_IP=$(tailscale ip -4)

# 3) Bind Web UI to that IP (so it's only reachable via tailnet)
CCCC_WEB_HOST=$TAILSCALE_IP CCCC_WEB_PORT=8848 cccc

# 4) On phone browser:
# http://<TAILSCALE_IP>:8848/ui/`})})]}),l.jsx("div",{className:`text-xs ${u?"text-slate-500":"text-gray-500"}`,children:"Phone tip: On iOS/Android you can Add to Home Screen for an app-like launcher (PWA-style)."})]}),ln==="developer"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:`text-sm font-medium ${u?"text-slate-300":"text-gray-700"}`,children:"Developer Mode (Global)"}),l.jsx("p",{className:`text-xs mt-1 ${u?"text-slate-500":"text-gray-500"}`,children:"These settings apply to the whole CCCC instance (daemon + Web). Use this only when debugging."}),l.jsxs("div",{className:`mt-2 rounded-lg border px-3 py-2 text-[11px] ${u?"border-amber-500/30 bg-amber-500/10 text-amber-200":"border-amber-200 bg-amber-50 text-amber-800"}`,children:[l.jsx("div",{className:"font-medium",children:"Warning"}),l.jsx("div",{className:"mt-1",children:"Developer mode enables verbose logs and extra diagnostics. Only enable it when you need it."})]})]}),l.jsxs("div",{className:`rounded-lg border p-3 ${u?"border-slate-800 bg-slate-950/30":"border-gray-200 bg-gray-50"}`,children:[l.jsxs("div",{className:"flex items-center justify-between gap-3",children:[l.jsxs("div",{children:[l.jsx("div",{className:`text-sm font-semibold ${u?"text-slate-200":"text-gray-800"}`,children:"Enable developer mode"}),l.jsx("div",{className:`text-xs mt-0.5 ${u?"text-slate-500":"text-gray-600"}`,children:"Enables debug snapshot and log tail tools."})]}),l.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"sr-only",checked:lt,onChange:F=>Ft(F.target.checked)}),l.jsx("div",{className:`w-11 h-6 rounded-full transition-colors ${lt?u?"bg-emerald-600":"bg-emerald-500":u?"bg-slate-700":"bg-gray-300"}`,children:l.jsx("div",{className:`w-5 h-5 bg-white rounded-full shadow transform transition-transform mt-0.5 ${lt?"translate-x-5":"translate-x-0.5"}`})})]})]}),l.jsxs("div",{className:"mt-3",children:[l.jsx("label",{className:`block text-xs mb-1 ${u?"text-slate-400":"text-gray-500"}`,children:"Log level"}),l.jsxs("select",{value:tn,onChange:F=>xn(F.target.value==="DEBUG"?"DEBUG":"INFO"),className:`w-full px-3 py-2.5 rounded-lg border text-sm min-h-[44px] transition-colors ${u?"bg-slate-800 border-slate-700 text-slate-200 focus:border-slate-500":"bg-white border-gray-300 text-gray-900 focus:border-blue-500"}`,children:[l.jsx("option",{value:"INFO",children:"INFO"}),l.jsx("option",{value:"DEBUG",children:"DEBUG"})]})]}),l.jsx("div",{className:"mt-3 flex gap-2",children:l.jsx("button",{onClick:Ht,disabled:lr,className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-white text-sm rounded-lg disabled:opacity-50 min-h-[44px] transition-colors font-medium",children:lr?"Saving...":"Save Developer Settings"})})]}),l.jsxs("div",{className:`rounded-lg border p-3 ${u?"border-slate-800 bg-slate-950/30":"border-gray-200 bg-gray-50"}`,children:[l.jsxs("div",{className:"flex items-center justify-between gap-3",children:[l.jsxs("div",{children:[l.jsx("div",{className:`text-sm font-semibold ${u?"text-slate-200":"text-gray-800"}`,children:"Debug snapshot (this group)"}),l.jsx("div",{className:`text-xs mt-0.5 ${u?"text-slate-500":"text-gray-600"}`,children:"Shows daemon/actors state + delivery throttle summary (developer mode only)."})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:bn,disabled:!lt||!x||nn,className:`px-3 py-2 rounded-lg text-sm min-h-[44px] font-medium transition-colors ${u?"bg-slate-800 hover:bg-slate-700 text-slate-200":"bg-white hover:bg-gray-50 text-gray-800 border border-gray-200"} disabled:opacity-50`,children:nn?"Loading...":"Refresh"}),l.jsx("button",{onClick:()=>{sr(""),Ut("")},disabled:nn,className:`px-3 py-2 rounded-lg text-sm min-h-[44px] font-medium transition-colors ${u?"bg-slate-900 hover:bg-slate-800 text-slate-300 border border-slate-800":"bg-white hover:bg-gray-50 text-gray-700 border border-gray-200"} disabled:opacity-50`,children:"Clear"})]})]}),!x&&l.jsx("div",{className:`mt-2 text-xs ${u?"text-slate-500":"text-gray-600"}`,children:"Open Settings from an active group to view group-scoped debug info."}),Er&&l.jsx("div",{className:`mt-2 text-xs ${u?"text-rose-300":"text-rose-600"}`,children:Er}),l.jsx("pre",{className:`mt-2 p-2 rounded overflow-x-auto whitespace-pre text-[11px] ${u?"bg-slate-900 text-slate-200":"bg-white text-gray-800 border border-gray-200"}`,children:l.jsx("code",{children:In||""})})]}),l.jsxs("div",{className:`rounded-lg border p-3 ${u?"border-slate-800 bg-slate-950/30":"border-gray-200 bg-gray-50"}`,children:[l.jsxs("div",{className:"flex items-center justify-between gap-3",children:[l.jsxs("div",{children:[l.jsx("div",{className:`text-sm font-semibold ${u?"text-slate-200":"text-gray-800"}`,children:"Log tail"}),l.jsx("div",{className:`text-xs mt-0.5 ${u?"text-slate-500":"text-gray-600"}`,children:"Tails local log files (developer mode only). Component im is group-scoped."})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:wn,disabled:!lt||ar,className:`px-3 py-2 rounded-lg text-sm min-h-[44px] font-medium transition-colors ${u?"bg-slate-800 hover:bg-slate-700 text-slate-200":"bg-white hover:bg-gray-50 text-gray-800 border border-gray-200"} disabled:opacity-50`,children:ar?"Loading...":"Refresh"}),l.jsx("button",{onClick:async()=>{var F;if(lt){if(Bt==="im"&&!x){Et("IM logs require a group_id; open Settings from a group.");return}Wt(!0),Et("");try{const Re=await(await fetch("/api/v1/debug/clear_logs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({component:Bt,group_id:x||"",by:"user"})})).json();if(!Re.ok){Et(((F=Re.error)==null?void 0:F.message)||"Failed to clear logs");return}yt("")}catch{Et("Failed to clear logs")}finally{Wt(!1)}}},disabled:!lt||ar,className:`px-3 py-2 rounded-lg text-sm min-h-[44px] font-medium transition-colors ${u?"bg-slate-900 hover:bg-slate-800 text-slate-300 border border-slate-800":"bg-white hover:bg-gray-50 text-gray-700 border border-gray-200"} disabled:opacity-50`,children:"Clear (truncate)"})]})]}),l.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[l.jsxs("div",{children:[l.jsx("label",{className:`block text-xs mb-1 ${u?"text-slate-400":"text-gray-600"}`,children:"Component"}),l.jsxs("select",{value:Bt,onChange:F=>An(F.target.value==="im"?"im":F.target.value==="web"?"web":"daemon"),className:`w-full px-3 py-2.5 rounded-lg border text-sm min-h-[44px] transition-colors ${u?"bg-slate-800 border-slate-700 text-slate-200 focus:border-slate-500":"bg-white border-gray-300 text-gray-900 focus:border-blue-500"}`,children:[l.jsx("option",{value:"daemon",children:"daemon"}),l.jsx("option",{value:"web",children:"web"}),l.jsx("option",{value:"im",children:"im"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:`block text-xs mb-1 ${u?"text-slate-400":"text-gray-600"}`,children:"Lines"}),l.jsx("input",{type:"number",value:Fn,min:50,max:2e3,onChange:F=>rn(Number(F.target.value||200)),className:`w-full px-3 py-2.5 rounded-lg border text-sm min-h-[44px] transition-colors ${u?"bg-slate-800 border-slate-700 text-slate-200 focus:border-slate-500":"bg-white border-gray-300 text-gray-900 focus:border-blue-500"}`})]})]}),Bt==="im"&&!x&&l.jsx("div",{className:`mt-2 text-xs ${u?"text-slate-500":"text-gray-600"}`,children:"IM logs require a group_id; open Settings from a group."}),Ct&&l.jsx("div",{className:`mt-2 text-xs ${u?"text-rose-300":"text-rose-600"}`,children:Ct}),l.jsx("pre",{className:`mt-2 p-2 rounded overflow-x-auto whitespace-pre text-[11px] max-h-[260px] overflow-y-auto ${u?"bg-slate-900 text-slate-200":"bg-white text-gray-800 border border-gray-200"}`,children:l.jsx("code",{children:We||""})})]})]})]})]})]})}function ka(c){if(!c)return"";try{const d=new Date(c);if(isNaN(d.getTime()))return c;const o=new Date,f=o.getTime()-d.getTime(),p=Math.floor(f/1e3),u=Math.floor(p/60),x=Math.floor(u/60),m=Math.floor(x/24);if(p<60)return"just now";if(u<60)return`${u}m ago`;if(x<24)return`${x}h ago`;if(m<7)return`${m}d ago`;const E=d.toLocaleString("en",{month:"short"}),_=d.getDate(),$=d.getFullYear(),L=o.getFullYear();return $===L?`${E} ${_}`:`${E} ${_}, ${$}`}catch{return c}}function Yc(c){if(!c)return"";try{const d=new Date(c);return isNaN(d.getTime())?c:d.toLocaleString()}catch{return c}}function b0(c){if(c.kind==="chat.message"&&c.data&&typeof c.data=="object")return String(c.data.text||"");if(c.kind==="system.notify"&&c.data&&typeof c.data=="object"){const d=String(c.data.kind||"info"),o=String(c.data.title||""),f=String(c.data.message||""),p=c.data.target_actor_id?`  ${c.data.target_actor_id}`:"";return`[${d}]${p}: ${o}${f?` - ${f}`:""}`}return String(c.kind||"event")}function w0(c,d,o){const f=(d||"").trim();if(!f)return c;const p=c.toLowerCase(),u=f.toLowerCase();if(!u)return c;const x=[];let m=0,E=0;for(;;){const _=p.indexOf(u,m);if(_===-1)break;_>m&&x.push(c.slice(m,_));const $=c.slice(_,_+f.length);if(x.push(l.jsx("mark",{className:k("px-0.5 rounded",o?"bg-amber-500/20 text-amber-200":"bg-amber-200 text-amber-900"),children:$},`m${E++}-${_}`)),m=_+f.length,m>=c.length)break}return m<c.length&&x.push(c.slice(m)),x}async function j0(c){var d;try{if((d=navigator.clipboard)!=null&&d.writeText)return await navigator.clipboard.writeText(c),!0}catch{}try{return window.prompt("Copy to clipboard:",c),!0}catch{return!1}}function N0({isOpen:c,onClose:d,groupId:o,actors:f,isDark:p,onReply:u}){const x=y.useRef(null),[m,E]=y.useState(""),[_,$]=y.useState("all"),[L,z]=y.useState(""),[re,se]=y.useState(!1),[H,R]=y.useState(""),[ie,he]=y.useState([]),[de,oe]=y.useState(!1),K=y.useMemo(()=>{const P=f.map(be=>String(be.id||"")).filter(Boolean);return P.sort(),P},[f]);y.useEffect(()=>{c&&(R(""),window.setTimeout(()=>{var P;return(P=x.current)==null?void 0:P.focus()},0))},[c]),y.useEffect(()=>{c&&(he([]),oe(!1),R(""))},[o,c]);const Q=async P=>{var be;if(c&&o){se(!0),R("");try{const ge=new URLSearchParams;ge.set("q",m),ge.set("kind",_),L&&ge.set("by",L),ge.set("limit","50"),P!=null&&P.before&&ge.set("before",P.before);const je=await _e(`/api/v1/groups/${encodeURIComponent(o)}/ledger/search?${ge.toString()}`);if(!je.ok){R(((be=je.error)==null?void 0:be.message)||"Search failed");return}const Pe=je.result.events||[];oe(!!je.result.has_more),he(Me=>(P==null?void 0:P.mode)==="prepend"?Pe.concat(Me):Pe)}finally{se(!1)}}},Se=async()=>{var be;const P=(be=ie[0])!=null&&be.id?String(ie[0].id):"";P&&await Q({before:P,mode:"prepend"})};return c?l.jsxs("div",{className:"fixed inset-0 z-50 flex items-stretch sm:items-center justify-center p-0 sm:p-4 animate-fade-in",children:[l.jsx("div",{className:p?"absolute inset-0 bg-black/60":"absolute inset-0 bg-black/40",onClick:d,"aria-hidden":"true"}),l.jsxs("div",{className:k("relative w-full h-full sm:h-auto sm:max-h-[80vh] sm:max-w-3xl flex flex-col border shadow-2xl animate-scale-in","rounded-none sm:rounded-xl",p?"bg-slate-900 border-slate-700":"bg-white border-gray-200"),role:"dialog","aria-modal":"true","aria-labelledby":"search-modal-title",children:[l.jsxs("div",{className:k("flex items-center justify-between px-4 pt-4 pb-3 border-b safe-area-inset-top",p?"border-slate-800":"border-gray-200"),children:[l.jsxs("div",{className:"min-w-0",children:[l.jsx("h2",{id:"search-modal-title",className:k("text-lg font-semibold truncate",p?"text-slate-100":"text-gray-900"),children:" Search Messages"}),l.jsx("div",{className:k("text-xs mt-0.5 truncate",p?"text-slate-400":"text-gray-500"),children:o})]}),l.jsx("button",{onClick:d,className:k("text-xl leading-none min-w-[44px] min-h-[44px] flex items-center justify-center rounded-lg transition-colors",p?"text-slate-400 hover:text-slate-200 hover:bg-slate-800":"text-gray-400 hover:text-gray-600 hover:bg-gray-100"),"aria-label":"Close search modal",children:""})]}),l.jsxs("div",{className:"px-4 py-3 border-b space-y-3 sm:space-y-0 sm:flex sm:items-end sm:gap-3",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("label",{className:k("block text-xs font-medium mb-1",p?"text-slate-300":"text-gray-700"),children:"Query"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{ref:x,value:m,onChange:P=>E(P.target.value),onKeyDown:P=>{P.key==="Enter"&&Q({mode:"replace"})},className:k("flex-1 px-3 py-2 border rounded-lg text-sm min-h-[44px]",p?"bg-slate-800 border-slate-700 text-slate-100":"bg-white border-gray-300 text-gray-900"),placeholder:"Search text (case-insensitive)"}),l.jsx("button",{onClick:()=>void Q({mode:"replace"}),disabled:re,className:k("px-4 py-2 rounded-lg text-sm font-medium min-h-[44px] disabled:opacity-50","bg-emerald-600 hover:bg-emerald-500 text-white"),children:re?"":"Search"})]})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:k("block text-xs font-medium mb-1",p?"text-slate-300":"text-gray-700"),children:"Kind"}),l.jsx("div",{className:k("flex items-center gap-1 p-1 rounded-lg",p?"bg-slate-800/60":"bg-gray-100"),children:[["all","All"],["chat","Chat"],["notify","Notify"]].map(([P,be])=>l.jsx("button",{onClick:()=>$(P),className:k("px-2.5 py-1.5 rounded-md text-xs font-medium min-h-[36px] transition-colors",_===P?p?"bg-slate-700 text-white":"bg-white text-gray-900 shadow-sm":p?"text-slate-300 hover:text-white":"text-gray-600 hover:text-gray-900"),"aria-pressed":_===P,children:be},P))})]}),l.jsxs("div",{children:[l.jsx("label",{className:k("block text-xs font-medium mb-1",p?"text-slate-300":"text-gray-700"),children:"By"}),l.jsxs("select",{value:L,onChange:P=>z(P.target.value),className:k("px-3 py-2 border rounded-lg text-sm min-h-[44px] min-w-[140px]",p?"bg-slate-800 border-slate-700 text-slate-100":"bg-white border-gray-300 text-gray-900"),children:[l.jsx("option",{value:"",children:"Any"}),l.jsx("option",{value:"user",children:"user"}),l.jsx("option",{value:"system",children:"system"}),K.map(P=>l.jsx("option",{value:P,children:P},P))]})]})]})]}),H&&l.jsx("div",{className:k("px-4 py-2 text-sm border-b",p?"border-rose-500/30 bg-rose-500/10 text-rose-300":"border-rose-300 bg-rose-50 text-rose-700"),role:"alert",children:H}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[de&&ie.length>0&&l.jsx("button",{className:k("w-full px-4 py-2 rounded-lg text-sm font-medium min-h-[44px] transition-colors",p?"bg-slate-800 hover:bg-slate-700 text-slate-200":"bg-gray-100 hover:bg-gray-200 text-gray-700"),onClick:()=>void Se(),disabled:re,children:"Load older results"}),ie.map((P,be)=>{const ge=b0(P),je=P.id?String(P.id):"",Pe=P.kind==="chat.message";return l.jsx("div",{className:k("rounded-lg border px-4 py-3",p?"border-slate-700/50 bg-slate-800/40":"border-gray-200 bg-gray-50"),children:l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3",children:[l.jsxs("div",{className:"min-w-0 flex-1",children:[l.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[l.jsx("span",{className:k("text-xs",p?"text-slate-400":"text-gray-500"),title:Yc(P.ts),children:ka(P.ts)}),l.jsx("span",{className:k("text-xs font-medium",p?"text-slate-200":"text-gray-800"),children:P.by||""}),l.jsx("span",{className:k("text-[10px] px-2 py-0.5 rounded-full font-medium",P.kind==="system.notify"?p?"bg-blue-500/20 text-blue-300":"bg-blue-100 text-blue-700":p?"bg-slate-700/60 text-slate-300":"bg-white text-gray-600 border border-gray-200"),children:P.kind||"event"}),je&&l.jsx("span",{className:k("text-[10px] truncate",p?"text-slate-500":"text-gray-400"),title:je,children:je})]}),l.jsx("div",{className:k("mt-2 text-sm whitespace-pre-wrap break-words",p?"text-slate-100":"text-gray-800"),children:w0(ge,m,p)})]}),l.jsxs("div",{className:"flex items-center gap-2 justify-end sm:flex-col sm:items-end",children:[Pe&&l.jsx("button",{className:k("text-[10px] px-2 py-1 rounded border min-h-[36px] transition-colors",p?"bg-slate-900 border-slate-800 hover:bg-slate-800/60 text-slate-300 hover:text-slate-100":"bg-white border-gray-200 hover:bg-gray-100 text-gray-600 hover:text-gray-900"),onClick:()=>u(P),"aria-label":`Reply to ${String(P.by||"message")}`,title:"Reply",children:" Reply"}),je&&l.jsx("button",{className:k("text-[10px] px-2 py-1 rounded border min-h-[36px] transition-colors",p?"bg-slate-900 border-slate-800 hover:bg-slate-800/60 text-slate-300 hover:text-slate-100":"bg-white border-gray-200 hover:bg-gray-100 text-gray-600 hover:text-gray-900"),onClick:()=>void j0(je),"aria-label":"Copy event id",title:"Copy event id",children:" Copy ID"})]})]})},je||`r${be}`)}),!re&&ie.length===0&&l.jsxs("div",{className:"text-center py-10",children:[l.jsx("div",{className:"text-3xl mb-2",children:""}),l.jsx("div",{className:k("text-sm",p?"text-slate-300":"text-gray-700"),children:"No results"}),l.jsx("div",{className:k("text-xs mt-1",p?"text-slate-500":"text-gray-500"),children:"Try a different query, sender, or kind filter."})]})]})]})]}):null}function S0({isOpen:c,isDark:d,maxFileMb:o}){return c?l.jsxs("div",{className:"fixed inset-0 z-[60]",children:[l.jsx("div",{className:k("absolute inset-0 backdrop-blur-sm",d?"bg-black/60":"bg-black/40"),"aria-hidden":"true"}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-6",children:l.jsxs("div",{className:k("w-full max-w-sm rounded-2xl border px-6 py-5 text-center shadow-2xl",d?"bg-slate-900/90 border-slate-700 text-slate-100":"bg-white/90 border-gray-200 text-gray-900"),role:"dialog","aria-label":"Drop files to attach",children:[l.jsx("div",{className:"text-3xl mb-2",children:""}),l.jsx("div",{className:"text-sm font-semibold",children:"Drop files to attach"}),l.jsx("div",{className:k("text-xs mt-1",d?"text-slate-400":"text-gray-500"),children:"Added to the composer. Click Send when ready."}),l.jsxs("div",{className:k("text-[11px] mt-3",d?"text-slate-500":"text-gray-500"),children:["Max ",o,"MB per file."]})]})})]}):null}function Ta(c,d){if(!c)return{label:" STOP",colorClass:"bg-slate-700/50 text-slate-500"};switch(d){case"paused":return{label:" PAUSED",colorClass:"bg-amber-500/20 text-amber-500"};case"idle":return{label:" IDLE",colorClass:"bg-blue-500/20 text-blue-400"};default:return{label:" RUN",colorClass:"bg-emerald-500/20 text-emerald-500"}}}function Ra(c,d){if(!c)return{label:" STOP",colorClass:"bg-gray-200 text-gray-500"};switch(d){case"paused":return{label:" PAUSED",colorClass:"bg-amber-100 text-amber-600"};case"idle":return{label:" IDLE",colorClass:"bg-blue-100 text-blue-600"};default:return{label:" RUN",colorClass:"bg-emerald-100 text-emerald-600"}}}function C0({theme:c,onThemeChange:d,isDark:o}){const f=()=>c==="light"?"dark":c==="dark"?"system":"light",p=c==="light"?"":c==="dark"?"":"",u=c==="light"?"Light":c==="dark"?"Dark":"System";return l.jsx("button",{onClick:()=>d(f()),className:k("flex items-center justify-center w-9 h-9 rounded-lg transition-colors min-h-[44px] min-w-[44px]",o?"bg-slate-800 hover:bg-slate-700 text-slate-300":"bg-gray-100 hover:bg-gray-200 text-gray-600"),title:`Theme: ${u}. Click to change.`,"aria-label":`Current theme: ${u}. Click to cycle through themes.`,children:l.jsx("span",{className:"text-lg","aria-hidden":"true",children:p})})}function E0({isDark:c,theme:d,onThemeChange:o,selectedGroupId:f,groupDoc:p,selectedGroupRunning:u,actors:x,busy:m,errorMsg:E,onDismissError:_,onOpenSidebar:$,onOpenGroupEdit:L,onOpenContext:z,onStartGroup:re,onStopGroup:se,onSetGroupState:H,onOpenSettings:R,onOpenMobileMenu:ie}){return l.jsxs("header",{className:`flex-shrink-0 border-b backdrop-blur z-20 px-4 h-14 flex items-center justify-between gap-3 transition-colors ${c?"border-slate-800/50 bg-slate-900/80":"border-gray-200 bg-white/80"}`,children:[l.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[l.jsx("button",{className:`md:hidden p-2 -ml-2 rounded-lg transition-colors ${c?"text-slate-400 hover:text-white hover:bg-slate-800":"text-gray-500 hover:text-gray-900 hover:bg-gray-100"}`,onClick:$,"aria-label":"Open sidebar",children:l.jsxs("div",{className:"space-y-1",children:[l.jsx("div",{className:"w-4 h-0.5 bg-current"}),l.jsx("div",{className:"w-4 h-0.5 bg-current"}),l.jsx("div",{className:"w-4 h-0.5 bg-current"})]})}),l.jsx("div",{className:"min-w-0 flex flex-col",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("h1",{className:`text-sm font-semibold truncate ${c?"text-slate-100":"text-gray-900"}`,children:(p==null?void 0:p.title)||f||"Select a group"}),f&&p&&(()=>{const he=c?Ta(u,p.state):Ra(u,p.state);return l.jsx("span",{className:`w-2 h-2 rounded-full ${he.colorClass.replace("text-","bg-").split(" ")[0]}`,title:he.label})})()]})}),f&&l.jsx("button",{className:k("hidden sm:inline-flex items-center justify-center gap-1 text-xs px-2.5 py-1.5 rounded-lg border shadow-sm transition-colors",c?"border-slate-700 bg-slate-800/60 text-slate-200 hover:bg-slate-800":"border-gray-200 bg-gray-50 text-gray-700 hover:bg-gray-100"),onClick:L,title:"Edit group","aria-label":"Edit group",children:""})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsxs("div",{className:"hidden sm:flex items-center gap-1.5 mr-2",children:[l.jsxs("button",{onClick:z,disabled:!f,className:`p-2 rounded-xl transition-colors ${c?"text-slate-400 hover:text-white hover:bg-slate-800":"text-gray-400 hover:text-gray-900 hover:bg-gray-100"}`,title:"Context (Clipboard)",children:[l.jsx("span",{className:"sr-only",children:"Context"}),""]}),l.jsx("div",{className:`w-px h-4 mx-1 ${c?"bg-slate-800":"bg-gray-200"}`}),l.jsxs("button",{onClick:re,disabled:!f||m==="group-start"||x.length===0,className:`p-2 rounded-xl transition-colors ${c?"text-emerald-500 hover:text-emerald-400 hover:bg-emerald-500/10":"text-emerald-600 hover:bg-emerald-50"}`,title:"Launch All Agents",children:[l.jsx("span",{className:"sr-only",children:"Launch"}),""]}),(p==null?void 0:p.state)==="paused"?l.jsxs("button",{onClick:()=>void H("active"),disabled:!f||m==="group-state",className:`p-2 rounded-xl transition-colors ${c?"text-amber-400 hover:bg-amber-500/10":"text-amber-600 hover:bg-amber-50"}`,title:"Resume Delivery",children:[l.jsx("span",{className:"sr-only",children:"Resume"}),""]}):l.jsxs("button",{onClick:()=>void H("paused"),disabled:!f||m==="group-state",className:`p-2 rounded-xl transition-colors ${c?"text-slate-400 hover:text-amber-300 hover:bg-amber-500/10":"text-gray-400 hover:text-amber-600 hover:bg-amber-50"}`,title:"Pause Delivery",children:[l.jsx("span",{className:"sr-only",children:"Pause"}),""]}),l.jsxs("button",{onClick:se,disabled:!f||m==="group-stop",className:`p-2 rounded-xl transition-colors ${c?"text-slate-400 hover:text-rose-400 hover:bg-rose-500/10":"text-gray-400 hover:text-rose-600 hover:bg-rose-50"}`,title:"Stop All Agents",children:[l.jsx("span",{className:"sr-only",children:"Stop"}),""]}),l.jsx("div",{className:`w-px h-4 mx-1 ${c?"bg-slate-800":"bg-gray-200"}`})]}),l.jsx("div",{className:"hidden sm:block",children:l.jsx(C0,{theme:d,onThemeChange:o,isDark:c})}),l.jsx("button",{onClick:R,disabled:!f,className:`hidden sm:flex p-2 rounded-lg transition-colors ${c?"text-slate-400 hover:text-slate-200 hover:bg-slate-800":"text-gray-400 hover:text-gray-600 hover:bg-gray-100"}`,title:"Settings",children:""}),l.jsx("button",{className:k("sm:hidden flex items-center justify-center w-8 h-8 rounded-lg transition-colors",c?"text-slate-400 hover:bg-slate-800":"text-gray-400 hover:bg-gray-100"),onClick:ie,title:"Menu",children:l.jsx("span",{className:"text-lg leading-none transform rotate-90","aria-hidden":"true",children:""})})]}),E&&l.jsx("div",{className:"absolute top-16 left-1/2 -translate-x-1/2 z-50 animate-slide-up",children:l.jsxs("div",{className:`rounded-xl border px-4 py-2.5 text-sm flex items-center gap-3 shadow-xl ${c?"border-rose-500/30 bg-rose-950/90 text-rose-300 backdrop-blur-md":"border-rose-200 bg-white/90 text-rose-700 backdrop-blur-md"}`,role:"alert",children:[l.jsx("span",{children:E}),l.jsx("button",{className:"opacity-70 hover:opacity-100",onClick:_,children:""})]})})]})}function _0({groups:c,selectedGroupId:d,isOpen:o,isDark:f,onSelectGroup:p,onCreateGroup:u,onClose:x}){return l.jsxs(l.Fragment,{children:[l.jsxs("aside",{className:k("h-full border-r flex flex-col","fixed md:relative z-40 w-[280px] transition-transform duration-300",o?"translate-x-0":"-translate-x-full","md:translate-x-0",f?"border-slate-700/50 bg-slate-900/80 backdrop-blur":"border-gray-200 bg-white/80 backdrop-blur"),children:[l.jsx("div",{className:`p-4 border-b ${f?"border-slate-700/50":"border-gray-200"}`,children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("img",{src:"/ui/logo.svg",alt:"CCCC Logo",className:"w-8 h-8 object-contain"}),l.jsx("span",{className:`text-lg font-bold tracking-tight ${f?"text-white":"text-gray-900"}`,children:"CCCC"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{className:`text-xs px-3 py-1.5 rounded-xl font-medium shadow-lg transition-all min-h-[36px] ${f?"bg-gradient-to-r from-blue-600 to-blue-500 text-white hover:from-blue-500 hover:to-blue-400 shadow-blue-500/20":"bg-blue-600 text-white hover:bg-blue-500"}`,onClick:u,title:"Create new working group","aria-label":"Create new working group",children:"+ New"}),l.jsx("button",{className:`md:hidden p-2 min-w-[44px] min-h-[44px] flex items-center justify-center rounded-xl transition-colors ${f?"text-slate-400 hover:text-white hover:bg-slate-800":"text-gray-500 hover:text-gray-900 hover:bg-gray-100"}`,onClick:x,"aria-label":"Close sidebar",children:""})]})]})}),l.jsxs("div",{className:"flex-1 overflow-auto p-3",children:[l.jsx("div",{className:`text-[10px] font-medium uppercase tracking-wider mb-2 px-2 ${f?"text-slate-500":"text-gray-500"}`,children:"Working Groups"}),c.map(m=>{const E=String(m.group_id||""),_=E===d;return l.jsx("button",{className:k("w-full text-left px-3 py-2.5 rounded-xl mb-1 transition-all min-h-[44px]",_?f?"bg-gradient-to-r from-blue-600/20 to-blue-500/10 border border-blue-500/30":"bg-blue-50 border border-blue-200":f?"hover:bg-slate-800/50 border border-transparent":"hover:bg-gray-100 border border-transparent"),onClick:()=>{p(E),window.matchMedia("(max-width: 767px)").matches&&x()},children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:k("text-sm font-medium truncate",_?f?"text-white":"text-blue-700":f?"text-slate-300":"text-gray-700"),children:m.title||E}),(()=>{const $=f?Ta(m.running??!1,m.state):Ra(m.running??!1,m.state);return l.jsx("div",{className:k("text-[9px] px-2 py-0.5 rounded-full font-medium",$.colorClass),children:$.label})})()]})},E)}),!c.length&&l.jsxs("div",{className:"p-6 text-center",children:[l.jsx("div",{className:"text-4xl mb-3",children:""}),l.jsx("div",{className:`text-sm mb-2 ${f?"text-slate-400":"text-gray-600"}`,children:"No working groups yet"}),l.jsx("div",{className:`text-xs mb-4 max-w-[200px] mx-auto ${f?"text-slate-500":"text-gray-500"}`,children:"A working group is a collaboration space where multiple AI agents work together on a project."}),l.jsx("button",{className:`text-sm px-4 py-2 rounded-xl font-medium shadow-lg min-h-[44px] transition-all ${f?"bg-gradient-to-r from-blue-600 to-blue-500 text-white hover:from-blue-500 hover:to-blue-400 shadow-blue-500/20":"bg-blue-600 text-white hover:bg-blue-500"}`,onClick:u,children:"Create Your First Group"})]})]})]}),o&&l.jsx("div",{className:`fixed inset-0 z-30 md:hidden ${f?"bg-black/50":"bg-black/30"}`,onClick:x,"aria-hidden":"true"})]})}function $0({isOpen:c,isDark:d,selectedGroupId:o,groupDoc:f,selectedGroupRunning:p,actors:u,busy:x,onClose:m,onToggleTheme:E,onOpenSearch:_,onOpenContext:$,onOpenSettings:L,onOpenGroupEdit:z,onStartGroup:re,onStopGroup:se,onSetGroupState:H}){return c?l.jsxs("div",{className:"fixed inset-0 z-50 sm:hidden animate-fade-in",children:[l.jsx("div",{className:d?"absolute inset-0 bg-black/60 backdrop-blur-sm":"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:m,"aria-hidden":"true"}),l.jsxs("div",{className:k("absolute bottom-0 left-0 right-0 rounded-t-3xl border shadow-2xl animate-slide-up transform transition-transform",d?"bg-slate-900 border-slate-700":"bg-white border-gray-200"),role:"dialog","aria-modal":"true","aria-label":"Menu",children:[l.jsx("div",{className:"flex justify-center pt-3 pb-1",onClick:m,children:l.jsx("div",{className:`w-12 h-1.5 rounded-full opacity-50 ${d?"bg-slate-600":"bg-gray-300"}`})}),l.jsxs("div",{className:"px-6 pb-4 flex items-center justify-between gap-3",children:[l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:k("text-lg font-bold truncate",d?"text-slate-100":"text-gray-900"),children:(f==null?void 0:f.title)||o||"Menu"}),o&&f&&l.jsx("div",{className:"flex items-center gap-2 mt-1",children:l.jsx("span",{className:k("text-xs px-2 py-0.5 rounded-full font-medium",d?Ta(p,f.state).colorClass:Ra(p,f.state).colorClass),children:(d?Ta(p,f.state):Ra(p,f.state)).label})})]}),l.jsx("button",{onClick:m,className:k("p-2 rounded-full transition-colors",d?"text-slate-400 hover:text-slate-200 hover:bg-slate-800":"text-gray-400 hover:text-gray-600 hover:bg-gray-100"),"aria-label":"Close menu",children:l.jsx("div",{className:"text-2xl leading-none",children:""})})]}),l.jsxs("div",{className:"p-4 space-y-2 safe-area-inset-bottom",children:[!o&&l.jsx("div",{className:k("text-sm px-1 pb-2",d?"text-slate-400":"text-gray-500"),children:"Select a group to enable actions."}),l.jsxs("button",{className:k("w-full flex items-center justify-center gap-3 px-4 py-3.5 rounded-2xl text-sm font-medium transition-all min-h-[52px] disabled:opacity-50",d?"bg-slate-800/80 hover:bg-slate-700 text-slate-200":"bg-gray-100 hover:bg-gray-200 text-gray-800"),onClick:()=>{m(),_()},disabled:!o,children:[l.jsx("span",{className:"text-lg","aria-hidden":"true",children:""}),l.jsx("span",{children:"Search Messages"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsxs("button",{className:k("w-full flex items-center justify-center gap-2 px-4 py-3.5 rounded-2xl text-sm font-medium transition-all min-h-[52px] disabled:opacity-50",d?"bg-slate-800/80 hover:bg-slate-700 text-slate-200":"bg-gray-100 hover:bg-gray-200 text-gray-800"),onClick:()=>{m(),$()},disabled:!o,children:[l.jsx("span",{className:"text-lg","aria-hidden":"true",children:""}),l.jsx("span",{children:"Context"})]}),l.jsxs("button",{className:k("w-full flex items-center justify-center gap-2 px-4 py-3.5 rounded-2xl text-sm font-medium transition-all min-h-[52px] disabled:opacity-50",d?"bg-slate-800/80 hover:bg-slate-700 text-slate-200":"bg-gray-100 hover:bg-gray-200 text-gray-800"),onClick:()=>{m(),L()},disabled:!o,children:[l.jsx("span",{className:"text-lg","aria-hidden":"true",children:""}),l.jsx("span",{children:"Settings"})]})]}),l.jsxs("button",{className:k("w-full flex items-center justify-center gap-3 px-4 py-3.5 rounded-2xl text-sm font-medium transition-all min-h-[52px] disabled:opacity-50",d?"bg-slate-800/80 hover:bg-slate-700 text-slate-200":"bg-gray-100 hover:bg-gray-200 text-gray-800"),onClick:E,children:[l.jsx("span",{className:"text-lg","aria-hidden":"true",children:d?"":""}),l.jsx("span",{children:d?"Light Mode":"Dark Mode"})]}),l.jsxs("button",{className:k("w-full flex items-center justify-center gap-3 px-4 py-3.5 rounded-2xl text-sm font-medium transition-all min-h-[52px] disabled:opacity-50",d?"bg-slate-800/80 hover:bg-slate-700 text-slate-200":"bg-gray-100 hover:bg-gray-200 text-gray-800"),onClick:()=>{m(),z()},disabled:!o,children:[l.jsx("span",{className:"text-lg","aria-hidden":"true",children:""}),l.jsx("span",{children:"Edit Group Details"})]}),l.jsx("div",{className:k("h-px my-3 mx-2",d?"bg-slate-800":"bg-gray-200")}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsxs("button",{className:k("w-full flex flex-col items-center justify-center gap-1 px-2 py-3 rounded-2xl text-sm font-medium transition-all min-h-[64px] disabled:opacity-50",d?"bg-emerald-900/30 border border-emerald-500/20 text-emerald-300 hover:bg-emerald-900/50":"bg-emerald-50 border border-emerald-100 text-emerald-700 hover:bg-emerald-100"),onClick:()=>{m(),re()},disabled:!o||x==="group-start"||u.length===0,children:[l.jsx("span",{className:"text-xl","aria-hidden":"true",children:""}),l.jsx("span",{children:"Launch All"})]}),l.jsxs("button",{className:k("w-full flex flex-col items-center justify-center gap-1 px-2 py-3 rounded-2xl text-sm font-medium transition-all min-h-[64px] disabled:opacity-50",d?"bg-slate-800 hover:bg-slate-700 text-slate-300":"bg-gray-100 hover:bg-gray-200 text-gray-600"),onClick:()=>{m(),se()},disabled:!o||x==="group-stop",children:[l.jsx("span",{className:"text-xl","aria-hidden":"true",children:""}),l.jsx("span",{children:"Quit All"})]})]}),(f==null?void 0:f.state)==="paused"?l.jsxs("button",{className:k("w-full flex items-center justify-center gap-2 px-4 py-3.5 rounded-2xl text-sm font-medium transition-all min-h-[52px] disabled:opacity-50",d?"bg-amber-900/30 border border-amber-500/20 text-amber-300 hover:bg-amber-900/50":"bg-amber-50 border border-amber-100 text-amber-700 hover:bg-amber-100"),onClick:()=>{m(),H("active")},disabled:!o||x==="group-state",children:[l.jsx("span",{className:"text-lg","aria-hidden":"true",children:""}),l.jsx("span",{children:"Resume Message Delivery"})]}):l.jsxs("button",{className:k("w-full flex items-center justify-center gap-2 px-4 py-3.5 rounded-2xl text-sm font-medium transition-all min-h-[52px] disabled:opacity-50",d?"bg-slate-800 hover:bg-slate-700 text-slate-300":"bg-gray-100 hover:bg-gray-200 text-gray-600"),onClick:()=>{m(),H("paused")},disabled:!o||x==="group-state",children:[l.jsx("span",{className:"text-lg","aria-hidden":"true",children:""}),l.jsx("span",{children:"Pause Message Delivery"})]})]})]})]}):null}const La=["claude","codex","droid","amp","auggie","neovate","gemini","cursor","kilocode","opencode","copilot","custom"],Ns={amp:{label:"Amp",desc:""},auggie:{label:"Auggie (Augment)",desc:""},claude:{label:"Claude Code",desc:""},codex:{label:"Codex CLI",desc:""},cursor:{label:"Cursor CLI",desc:"Manual MCP installation needed"},droid:{label:"Droid",desc:""},gemini:{label:"Gemini CLI",desc:""},kilocode:{label:"Kilo Code",desc:"Manual MCP installation needed"},neovate:{label:"Neovate Code",desc:""},opencode:{label:"OpenCode",desc:"Manual MCP installation needed"},copilot:{label:"GitHub Copilot",desc:"Manual MCP installation needed"},custom:{label:"Custom",desc:"Manual MCP installation needed"}},zc={amp:{bg:"bg-rose-900/30",text:"text-rose-300",border:"border-rose-600/50",dot:"bg-rose-400",bgLight:"bg-rose-50",textLight:"text-rose-700",borderLight:"border-rose-300",dotLight:"bg-rose-500"},auggie:{bg:"bg-teal-900/30",text:"text-teal-300",border:"border-teal-600/50",dot:"bg-teal-400",bgLight:"bg-teal-50",textLight:"text-teal-700",borderLight:"border-teal-300",dotLight:"bg-teal-500"},claude:{bg:"bg-orange-900/30",text:"text-orange-300",border:"border-orange-600/50",dot:"bg-orange-400",bgLight:"bg-orange-50",textLight:"text-orange-700",borderLight:"border-orange-300",dotLight:"bg-orange-500"},codex:{bg:"bg-emerald-900/30",text:"text-emerald-300",border:"border-emerald-600/50",dot:"bg-emerald-400",bgLight:"bg-emerald-50",textLight:"text-emerald-700",borderLight:"border-emerald-300",dotLight:"bg-emerald-500"},cursor:{bg:"bg-indigo-900/30",text:"text-indigo-300",border:"border-indigo-600/50",dot:"bg-indigo-400",bgLight:"bg-indigo-50",textLight:"text-indigo-700",borderLight:"border-indigo-300",dotLight:"bg-indigo-500"},droid:{bg:"bg-violet-900/30",text:"text-violet-300",border:"border-violet-600/50",dot:"bg-violet-400",bgLight:"bg-violet-50",textLight:"text-violet-700",borderLight:"border-violet-300",dotLight:"bg-violet-500"},gemini:{bg:"bg-yellow-900/30",text:"text-yellow-300",border:"border-yellow-600/50",dot:"bg-yellow-400",bgLight:"bg-yellow-50",textLight:"text-yellow-700",borderLight:"border-yellow-300",dotLight:"bg-yellow-500"},kilocode:{bg:"bg-pink-900/30",text:"text-pink-300",border:"border-pink-600/50",dot:"bg-pink-400",bgLight:"bg-pink-50",textLight:"text-pink-700",borderLight:"border-pink-300",dotLight:"bg-pink-500"},neovate:{bg:"bg-fuchsia-900/30",text:"text-fuchsia-300",border:"border-fuchsia-600/50",dot:"bg-fuchsia-400",bgLight:"bg-fuchsia-50",textLight:"text-fuchsia-700",borderLight:"border-fuchsia-300",dotLight:"bg-fuchsia-500"},opencode:{bg:"bg-cyan-900/30",text:"text-cyan-300",border:"border-cyan-600/50",dot:"bg-cyan-400",bgLight:"bg-cyan-50",textLight:"text-cyan-700",borderLight:"border-cyan-300",dotLight:"bg-cyan-500"},copilot:{bg:"bg-slate-800/50",text:"text-slate-300",border:"border-slate-500/50",dot:"bg-slate-400",bgLight:"bg-gray-100",textLight:"text-gray-700",borderLight:"border-gray-300",dotLight:"bg-gray-500"},custom:{bg:"bg-zinc-800/50",text:"text-zinc-300",border:"border-zinc-500/50",dot:"bg-zinc-400",bgLight:"bg-zinc-100",textLight:"text-zinc-700",borderLight:"border-zinc-300",dotLight:"bg-zinc-500"},user:{bg:"bg-sky-900/30",text:"text-sky-300",border:"border-sky-600/50",dot:"bg-sky-400",bgLight:"bg-sky-50",textLight:"text-sky-700",borderLight:"border-sky-300",dotLight:"bg-sky-500"}};function df(c,d=!0){const o=zc[c||"codex"]||zc.codex;return d?{bg:o.bg,text:o.text,border:o.border,dot:o.dot}:{bg:o.bgLight,text:o.textLight,border:o.borderLight,dot:o.dotLight}}const fi=[{ring:"ring-sky-400/35",text:"text-sky-300",ringLight:"ring-sky-300",textLight:"text-sky-700"},{ring:"ring-indigo-400/35",text:"text-indigo-300",ringLight:"ring-indigo-300",textLight:"text-indigo-700"},{ring:"ring-violet-400/35",text:"text-violet-300",ringLight:"ring-violet-300",textLight:"text-violet-700"},{ring:"ring-fuchsia-400/35",text:"text-fuchsia-300",ringLight:"ring-fuchsia-300",textLight:"text-fuchsia-700"},{ring:"ring-cyan-400/35",text:"text-cyan-300",ringLight:"ring-cyan-300",textLight:"text-cyan-700"},{ring:"ring-teal-400/35",text:"text-teal-300",ringLight:"ring-teal-300",textLight:"text-teal-700"},{ring:"ring-emerald-400/35",text:"text-emerald-300",ringLight:"ring-emerald-300",textLight:"text-emerald-700"},{ring:"ring-amber-400/35",text:"text-amber-300",ringLight:"ring-amber-300",textLight:"text-amber-700"}];function k0(c){let d=2166136261;for(let o=0;o<c.length;o++)d^=c.charCodeAt(o),d=Math.imul(d,16777619);return d>>>0}function T0(c,d=!0){const o=String(c||"").trim(),f=o?k0(o)%fi.length:0,p=fi[f]||fi[0];return d?{ring:p.ring,text:p.text}:{ring:p.ringLight,text:p.textLight}}const Jc=JSON.stringify({mcpServers:{cccc:{command:"cccc",args:["mcp"]}}},null,2),Xc=JSON.stringify({mcpServers:{cccc:{command:"cccc",args:["mcp"],tools:["*"]}}},null,2),qc=JSON.stringify({mcp:{cccc:{type:"local",command:["cccc","mcp"]}}},null,2);function R0({isOpen:c,isDark:d,busy:o,hasForeman:f,runtimes:p,suggestedActorId:u,newActorId:x,setNewActorId:m,newActorRole:E,setNewActorRole:_,newActorRuntime:$,setNewActorRuntime:L,newActorCommand:z,setNewActorCommand:re,showAdvancedActor:se,setShowAdvancedActor:H,addActorError:R,setAddActorError:ie,canAddActor:he,addActorDisabledReason:de,onAddActor:oe,onClose:K,onCancelAndReset:Q}){var P,be;if(!c)return null;const Se=((P=p.find(ge=>ge.name===$))==null?void 0:P.recommended_command)||"";return l.jsx("div",{className:`fixed inset-0 backdrop-blur-sm flex items-start justify-center p-4 sm:p-6 z-50 animate-fade-in ${d?"bg-black/50":"bg-black/30"}`,onMouseDown:ge=>{ge.target===ge.currentTarget&&K()},role:"dialog","aria-modal":"true","aria-labelledby":"add-actor-title",children:l.jsxs("div",{className:`w-full max-w-lg mt-8 sm:mt-16 rounded-2xl border shadow-2xl max-h-[80vh] overflow-y-auto animate-scale-in ${d?"border-slate-700/50 bg-gradient-to-b from-slate-800 to-slate-900":"border-gray-200 bg-white"}`,children:[l.jsxs("div",{className:`px-6 py-4 border-b sticky top-0 ${d?"border-slate-700/50 bg-slate-800":"border-gray-200 bg-white"}`,children:[l.jsx("div",{id:"add-actor-title",className:`text-lg font-semibold ${d?"text-white":"text-gray-900"}`,children:"Add AI Agent"}),l.jsx("div",{className:`text-sm mt-1 ${d?"text-slate-400":"text-gray-500"}`,children:"Choose an AI runtime to add to your team"})]}),l.jsxs("div",{className:"p-6 space-y-5",children:[R&&l.jsxs("div",{className:`rounded-xl border px-4 py-2.5 text-sm flex items-center justify-between gap-3 ${d?"border-rose-500/30 bg-rose-500/10 text-rose-300":"border-rose-300 bg-rose-50 text-rose-700"}`,role:"alert",children:[l.jsx("span",{children:R}),l.jsx("button",{className:d?"text-rose-300 hover:text-rose-100":"text-rose-500 hover:text-rose-700",onClick:()=>ie(""),children:""})]}),l.jsxs("div",{children:[l.jsxs("label",{className:`block text-xs font-medium mb-2 ${d?"text-slate-400":"text-gray-500"}`,children:["Agent Name ",l.jsx("span",{className:d?"text-slate-500":"text-gray-400",children:"(supports Unicode, incl. CJK)"})]}),l.jsx("input",{className:`w-full rounded-xl border px-4 py-2.5 text-sm min-h-[44px] transition-colors ${d?"bg-slate-900/80 border-slate-600/50 text-white placeholder-slate-500 focus:border-blue-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400 focus:border-blue-500"}`,value:x,onChange:ge=>m(ge.target.value),placeholder:u}),l.jsxs("div",{className:`text-[10px] mt-1 ${d?"text-slate-500":"text-gray-500"}`,children:["Leave empty to use:"," ",l.jsx("code",{className:`px-1 rounded ${d?"bg-slate-800":"bg-gray-100"}`,children:u})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:`block text-xs font-medium mb-2 ${d?"text-slate-400":"text-gray-500"}`,children:"AI Runtime"}),l.jsx("select",{className:`w-full rounded-xl border px-4 py-2.5 text-sm min-h-[44px] transition-colors ${d?"bg-slate-900/80 border-slate-600/50 text-white focus:border-blue-500":"bg-white border-gray-300 text-gray-900 focus:border-blue-500"}`,value:$,onChange:ge=>{const je=ge.target.value;L(je),re("")},children:La.map(ge=>{const je=Ns[ge],Pe=p.find(Oe=>Oe.name===ge),Me=(Pe==null?void 0:Pe.available)??!1,Te=Me||ge==="custom";return l.jsxs("option",{value:ge,disabled:!Te,children:[(je==null?void 0:je.label)||ge,!Me&&ge!=="custom"?" (not installed)":""]},ge)})}),(be=Ns[$])!=null&&be.desc?l.jsx("div",{className:`text-[10px] mt-1 ${d?"text-slate-500":"text-gray-500"}`,children:Ns[$].desc}):null,($==="cursor"||$==="kilocode"||$==="opencode"||$==="copilot"||$==="custom")&&l.jsxs("div",{className:`mt-2 rounded-xl border px-3 py-2 text-[11px] ${d?"border-amber-500/30 bg-amber-500/10 text-amber-200":"border-amber-200 bg-amber-50 text-amber-800"}`,children:[l.jsx("div",{className:"font-medium",children:"Manual MCP install required"}),$==="custom"?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"mt-1",children:["Provide a command for your runtime in ",l.jsx("span",{className:"font-medium",children:"Advanced options  Command Override"}),"."]}),l.jsxs("div",{className:"mt-1",children:["Configure your runtime to add an MCP stdio server named"," ",l.jsx("code",{className:`px-1 rounded ${d?"bg-amber-900/30":"bg-amber-100"}`,children:"cccc"})," that runs"," ",l.jsx("code",{className:`px-1 rounded ${d?"bg-amber-900/30":"bg-amber-100"}`,children:"cccc mcp"}),"."]})]}):$==="cursor"?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"mt-1",children:["1) Create/edit"," ",l.jsx("code",{className:`px-1 rounded ${d?"bg-amber-900/30":"bg-amber-100"}`,children:"~/.cursor/mcp.json"})," (or"," ",l.jsx("code",{className:`px-1 rounded ${d?"bg-amber-900/30":"bg-amber-100"}`,children:".cursor/mcp.json"})," in this project)"]}),l.jsx("div",{className:"mt-1",children:"2) Add this MCP server config:"})]}):$==="kilocode"?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"mt-1",children:["1) Create/edit"," ",l.jsx("code",{className:`px-1 rounded ${d?"bg-amber-900/30":"bg-amber-100"}`,children:".kilocode/mcp.json"})," in this project root"]}),l.jsx("div",{className:"mt-1",children:"2) Add this MCP server config:"})]}):$==="opencode"?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"mt-1",children:["1) Create/edit"," ",l.jsx("code",{className:`px-1 rounded ${d?"bg-amber-900/30":"bg-amber-100"}`,children:"~/.config/opencode/opencode.json"})]}),l.jsx("div",{className:"mt-1",children:"2) Add this MCP server config:"})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"mt-1",children:["1) Create/edit"," ",l.jsx("code",{className:`px-1 rounded ${d?"bg-amber-900/30":"bg-amber-100"}`,children:"~/.copilot/mcp-config.json"})]}),l.jsxs("div",{className:"mt-1",children:["2) Add this MCP server config (or pass it via"," ",l.jsx("code",{className:`px-1 rounded ${d?"bg-amber-900/30":"bg-amber-100"}`,children:"--additional-mcp-config"}),"):"]})]}),$!=="custom"?l.jsx("pre",{className:`mt-1.5 p-2 rounded overflow-x-auto whitespace-pre ${d?"bg-amber-900/20 text-amber-100":"bg-amber-50 text-amber-900"}`,children:l.jsx("code",{children:$==="opencode"?qc:$==="copilot"?Xc:Jc})}):null,l.jsx("div",{className:`mt-1 text-[10px] ${d?"text-amber-200/80":"text-amber-800/80"}`,children:"Restart the runtime after updating this config."})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:`block text-xs font-medium mb-2 ${d?"text-slate-400":"text-gray-500"}`,children:"Role"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{className:k("flex-1 px-4 py-2.5 rounded-xl border text-sm font-medium transition-all min-h-[44px]",E==="foreman"?"bg-amber-500/20 border-amber-500 text-amber-600":f?d?"bg-slate-900/30 border-slate-700/30 text-slate-500 cursor-not-allowed":"bg-gray-100 border-gray-200 text-gray-400 cursor-not-allowed":d?"bg-slate-800/50 border-slate-600/50 text-slate-300 hover:border-slate-500":"bg-gray-50 border-gray-200 text-gray-600 hover:border-gray-300"),onClick:()=>{f||_("foreman")},disabled:f,children:[" Foreman ",f&&"(exists)"]}),l.jsxs("button",{className:k("flex-1 px-4 py-2.5 rounded-xl border text-sm font-medium transition-all min-h-[44px]",E==="peer"?"bg-blue-500/20 border-blue-500 text-blue-600":f?d?"bg-slate-800/50 border-slate-600/50 text-slate-300 hover:border-slate-500":"bg-gray-50 border-gray-200 text-gray-600 hover:border-gray-300":d?"bg-slate-900/30 border-slate-700/30 text-slate-500 cursor-not-allowed":"bg-gray-100 border-gray-200 text-gray-400 cursor-not-allowed"),onClick:()=>{f&&_("peer")},disabled:!f,children:["Peer ",!f&&"(need foreman first)"]})]}),l.jsx("div",{className:`text-[10px] mt-1.5 ${d?"text-slate-500":"text-gray-500"}`,children:f?"Foreman leads the team. Peers are worker agents.":"First agent must be the foreman (team leader)."})]}),l.jsxs("button",{className:`flex items-center gap-2 text-xs min-h-[36px] ${d?"text-slate-400 hover:text-slate-300":"text-gray-500 hover:text-gray-700"}`,onClick:()=>H(!se),children:[l.jsx("span",{className:k("transition-transform",se&&"rotate-90"),children:""}),"Advanced options"]}),se&&l.jsx("div",{className:`space-y-4 pl-4 border-l-2 ${d?"border-slate-700/50":"border-gray-200"}`,children:l.jsxs("div",{children:[l.jsx("label",{className:`block text-xs font-medium mb-2 ${d?"text-slate-400":"text-gray-500"}`,children:"Command Override"}),l.jsx("input",{className:`w-full rounded-xl border px-3 py-2 text-sm font-mono min-h-[44px] transition-colors ${d?"bg-slate-900/80 border-slate-600/50 text-white placeholder-slate-500 focus:border-blue-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400 focus:border-blue-500"}`,value:z,onChange:ge=>re(ge.target.value),placeholder:Se||"Enter command..."}),Se.trim()?l.jsxs("div",{className:`text-[10px] mt-1 ${d?"text-slate-500":"text-gray-500"}`,children:["Default:"," ",l.jsx("code",{className:`px-1 rounded ${d?"bg-slate-800":"bg-gray-100"}`,children:Se})]}):null]})}),l.jsxs("div",{className:"flex gap-3 pt-2",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("button",{className:"w-full rounded-xl bg-blue-600 hover:bg-blue-500 text-white px-4 py-2.5 text-sm font-semibold shadow-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all min-h-[44px]",onClick:oe,disabled:!he,children:o==="actor-add"?"Adding...":"Add Agent"}),de&&l.jsx("div",{className:"text-[10px] text-amber-500 mt-1.5",children:de})]}),l.jsx("button",{className:`px-4 py-2.5 rounded-xl text-sm font-medium transition-colors min-h-[44px] ${d?"bg-slate-700 hover:bg-slate-600 text-slate-200":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,onClick:Q,children:"Cancel"})]})]})]})})}function L0({isOpen:c,isDark:d,busy:o,dirSuggestions:f,dirItems:p,currentDir:u,parentDir:x,showDirBrowser:m,createGroupPath:E,setCreateGroupPath:_,createGroupName:$,setCreateGroupName:L,onFetchDirContents:z,onCreateGroup:re,onClose:se,onCancelAndReset:H}){return c?l.jsx("div",{className:`fixed inset-0 backdrop-blur-sm flex items-start justify-center p-4 sm:p-6 z-50 animate-fade-in ${d?"bg-black/50":"bg-black/30"}`,onMouseDown:R=>{R.target===R.currentTarget&&se()},role:"dialog","aria-modal":"true","aria-labelledby":"create-group-title",children:l.jsxs("div",{className:`w-full max-w-lg mt-8 sm:mt-16 rounded-2xl border shadow-2xl animate-scale-in ${d?"border-slate-700/50 bg-gradient-to-b from-slate-800 to-slate-900":"border-gray-200 bg-white"}`,children:[l.jsxs("div",{className:`px-6 py-4 border-b ${d?"border-slate-700/50":"border-gray-200"}`,children:[l.jsx("div",{id:"create-group-title",className:`text-lg font-semibold ${d?"text-white":"text-gray-900"}`,children:"Create Working Group"}),l.jsx("div",{className:`text-sm mt-1 ${d?"text-slate-400":"text-gray-500"}`,children:"Select a project directory to start collaborating"})]}),l.jsxs("div",{className:"p-6 space-y-5",children:[f.length>0&&!E&&l.jsxs("div",{children:[l.jsx("label",{className:`block text-xs font-medium mb-2 ${d?"text-slate-400":"text-gray-500"}`,children:"Quick Select"}),l.jsx("div",{className:"grid grid-cols-2 gap-2",children:f.slice(0,6).map(R=>l.jsxs("button",{className:`flex items-center gap-2 px-3 py-2 rounded-xl border transition-colors text-left min-h-[56px] ${d?"border-slate-600/50 bg-slate-800/50 hover:bg-slate-700/50 hover:border-slate-500":"border-gray-200 bg-gray-50 hover:bg-gray-100 hover:border-gray-300"}`,onClick:()=>{_(R.path),L(R.path.split("/").filter(Boolean).pop()||""),z(R.path)},children:[l.jsx("span",{className:"text-lg",children:R.icon}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:`text-sm font-medium truncate ${d?"text-slate-200":"text-gray-700"}`,children:R.name}),l.jsx("div",{className:`text-[10px] truncate ${d?"text-slate-500":"text-gray-500"}`,children:R.path})]})]},R.path))})]}),l.jsxs("div",{children:[l.jsx("label",{className:`block text-xs font-medium mb-2 ${d?"text-slate-400":"text-gray-500"}`,children:"Project Directory"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{className:`flex-1 rounded-xl border px-4 py-2.5 text-sm font-mono min-h-[44px] transition-colors ${d?"bg-slate-900/80 border-slate-600/50 text-white placeholder-slate-500 focus:border-blue-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400 focus:border-blue-500"}`,value:E,onChange:R=>{_(R.target.value);const ie=R.target.value.split("/").filter(Boolean).pop()||"";(!$||$===u.split("/").filter(Boolean).pop())&&L(ie)},placeholder:"/path/to/your/project",autoFocus:!0}),l.jsx("button",{className:`px-4 py-2 rounded-xl text-sm font-medium transition-colors min-h-[44px] ${d?"bg-slate-700 hover:bg-slate-600 text-slate-200":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,onClick:()=>z(E||"~"),children:"Browse"})]})]}),m&&l.jsxs("div",{className:`border rounded-xl max-h-48 overflow-auto ${d?"border-slate-600/50 bg-slate-900/50":"border-gray-200 bg-gray-50"}`,children:[u&&l.jsx("div",{className:`px-3 py-1.5 border-b text-xs font-mono truncate ${d?"border-slate-700/30 bg-slate-800/30 text-slate-400":"border-gray-200 bg-gray-100 text-gray-500"}`,children:u}),x&&l.jsxs("button",{className:`w-full flex items-center gap-2 px-3 py-2 text-left border-b min-h-[44px] ${d?"hover:bg-slate-800/50 border-slate-700/30":"hover:bg-gray-100 border-gray-200"}`,onClick:()=>{z(x),_(x),L(x.split("/").filter(Boolean).pop()||"")},children:[l.jsx("span",{className:d?"text-slate-400":"text-gray-400",children:""}),l.jsx("span",{className:`text-sm ${d?"text-slate-400":"text-gray-500"}`,children:".."})]}),p.filter(R=>R.is_dir).length===0&&l.jsx("div",{className:`px-3 py-4 text-center text-sm ${d?"text-slate-500":"text-gray-500"}`,children:"No subdirectories"}),p.filter(R=>R.is_dir).map(R=>l.jsxs("button",{className:`w-full flex items-center gap-2 px-3 py-2 text-left min-h-[44px] ${d?"hover:bg-slate-800/50":"hover:bg-gray-100"}`,onClick:()=>{_(R.path),L(R.name),z(R.path)},children:[l.jsx("span",{className:"text-blue-500",children:""}),l.jsx("span",{className:`text-sm ${d?"text-slate-200":"text-gray-700"}`,children:R.name})]},R.path))]}),l.jsxs("div",{children:[l.jsx("label",{className:`block text-xs font-medium mb-2 ${d?"text-slate-400":"text-gray-500"}`,children:"Group Name"}),l.jsx("input",{className:`w-full rounded-xl border px-4 py-2.5 text-sm min-h-[44px] transition-colors ${d?"bg-slate-900/80 border-slate-600/50 text-white placeholder-slate-500 focus:border-blue-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400 focus:border-blue-500"}`,value:$,onChange:R=>L(R.target.value),placeholder:"Auto-filled from directory name"})]}),l.jsxs("div",{className:"flex gap-3 pt-2",children:[l.jsx("button",{className:"flex-1 rounded-xl bg-blue-600 hover:bg-blue-500 text-white px-4 py-2.5 text-sm font-semibold shadow-lg disabled:opacity-50 transition-all min-h-[44px]",onClick:re,disabled:!E.trim()||o==="create",children:o==="create"?"Creating...":"Create Group"}),l.jsx("button",{className:`px-4 py-2.5 rounded-xl text-sm font-medium transition-colors min-h-[44px] ${d?"bg-slate-700 hover:bg-slate-600 text-slate-200":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,onClick:H,children:"Cancel"})]})]})]})}):null}function P0({isOpen:c,isDark:d,busy:o,actorId:f,runtimes:p,runtime:u,onChangeRuntime:x,command:m,onChangeCommand:E,onSave:_,onCancel:$}){if(!c)return null;const L=p.find(H=>H.name===u),z=(L==null?void 0:L.available)??!1,re=(L==null?void 0:L.recommended_command)||"",se=u==="custom"||!z;return l.jsx("div",{className:`fixed inset-0 flex items-start justify-center p-4 sm:p-6 z-50 animate-fade-in ${d?"bg-black/60":"bg-black/40"}`,onMouseDown:H=>{H.target===H.currentTarget&&$()},role:"dialog","aria-modal":"true","aria-labelledby":"edit-actor-title",children:l.jsxs("div",{className:`w-full max-w-md mt-8 sm:mt-16 rounded-2xl border shadow-2xl animate-scale-in ${d?"border-slate-700/50 bg-gradient-to-b from-slate-800 to-slate-900":"border-gray-200 bg-white"}`,children:[l.jsxs("div",{className:`px-6 py-4 border-b ${d?"border-slate-700/50":"border-gray-200"}`,children:[l.jsxs("div",{id:"edit-actor-title",className:`text-lg font-semibold ${d?"text-white":"text-gray-900"}`,children:["Edit Agent: ",f]}),l.jsx("div",{className:`text-sm mt-1 ${d?"text-slate-400":"text-gray-500"}`,children:"Change the AI runtime for this agent"})]}),l.jsxs("div",{className:"p-6 space-y-5",children:[l.jsxs("div",{children:[l.jsx("label",{className:`block text-xs font-medium mb-2 ${d?"text-slate-400":"text-gray-500"}`,children:"Runtime"}),l.jsx("select",{className:`w-full rounded-xl border px-4 py-2.5 text-sm min-h-[44px] transition-colors ${d?"bg-slate-900/80 border-slate-600/50 text-white focus:border-blue-500":"bg-white border-gray-300 text-gray-900 focus:border-blue-500"}`,value:u,onChange:H=>{const R=H.target.value;x(R),E("")},children:La.map(H=>{const R=Ns[H],ie=p.find(oe=>oe.name===H),he=(ie==null?void 0:ie.available)??!1,de=he||H==="custom";return l.jsxs("option",{value:H,disabled:!de,children:[(R==null?void 0:R.label)||H,!he&&H!=="custom"?" (not installed)":""]},H)})}),(u==="cursor"||u==="kilocode"||u==="opencode"||u==="copilot"||u==="custom")&&l.jsxs("div",{className:`mt-2 rounded-xl border px-3 py-2 text-[11px] ${d?"border-amber-500/30 bg-amber-500/10 text-amber-200":"border-amber-200 bg-amber-50 text-amber-800"}`,children:[l.jsx("div",{className:"font-medium",children:"Manual MCP install required"}),u==="custom"?l.jsx(l.Fragment,{children:l.jsxs("div",{className:"mt-1",children:["Configure your runtime to add an MCP stdio server named"," ",l.jsx("code",{className:`px-1 rounded ${d?"bg-amber-900/30":"bg-amber-100"}`,children:"cccc"})," ","that runs ",l.jsx("code",{className:`px-1 rounded ${d?"bg-amber-900/30":"bg-amber-100"}`,children:"cccc mcp"}),"."]})}):u==="cursor"?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"mt-1",children:["1) Create/edit"," ",l.jsx("code",{className:`px-1 rounded ${d?"bg-amber-900/30":"bg-amber-100"}`,children:"~/.cursor/mcp.json"})," (or"," ",l.jsx("code",{className:`px-1 rounded ${d?"bg-amber-900/30":"bg-amber-100"}`,children:".cursor/mcp.json"})," in this project)"]}),l.jsx("div",{className:"mt-1",children:"2) Add this MCP server config:"})]}):u==="kilocode"?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"mt-1",children:["1) Create/edit"," ",l.jsx("code",{className:`px-1 rounded ${d?"bg-amber-900/30":"bg-amber-100"}`,children:".kilocode/mcp.json"})," in this project root"]}),l.jsx("div",{className:"mt-1",children:"2) Add this MCP server config:"})]}):u==="opencode"?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"mt-1",children:["1) Create/edit"," ",l.jsx("code",{className:`px-1 rounded ${d?"bg-amber-900/30":"bg-amber-100"}`,children:"~/.config/opencode/opencode.json"})]}),l.jsx("div",{className:"mt-1",children:"2) Add this MCP server config:"})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"mt-1",children:["1) Create/edit"," ",l.jsx("code",{className:`px-1 rounded ${d?"bg-amber-900/30":"bg-amber-100"}`,children:"~/.copilot/mcp-config.json"})]}),l.jsxs("div",{className:"mt-1",children:["2) Add this MCP server config (or pass it via"," ",l.jsx("code",{className:`px-1 rounded ${d?"bg-amber-900/30":"bg-amber-100"}`,children:"--additional-mcp-config"}),"):"]})]}),u!=="custom"?l.jsx("pre",{className:`mt-1.5 p-2 rounded overflow-x-auto whitespace-pre ${d?"bg-amber-900/20 text-amber-100":"bg-amber-50 text-amber-900"}`,children:l.jsx("code",{children:u==="opencode"?qc:u==="copilot"?Xc:Jc})}):null,l.jsx("div",{className:`mt-1 text-[10px] ${d?"text-amber-200/80":"text-amber-800/80"}`,children:"Restart the runtime after updating this config."})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:`block text-xs font-medium mb-2 ${d?"text-slate-400":"text-gray-500"}`,children:"Command"}),l.jsx("input",{className:`w-full rounded-xl border px-4 py-2.5 text-sm font-mono min-h-[44px] transition-colors ${d?"bg-slate-900/80 border-slate-600/50 text-white focus:border-blue-500":"bg-white border-gray-300 text-gray-900 focus:border-blue-500"}`,value:m,onChange:H=>E(H.target.value),placeholder:re||"Enter command..."}),re.trim()?l.jsxs("div",{className:`text-[10px] mt-1.5 ${d?"text-slate-500":"text-gray-500"}`,children:["Default:"," ",l.jsx("code",{className:`px-1 rounded ${d?"bg-slate-800":"bg-gray-100"}`,children:re})]}):null]}),l.jsxs("div",{className:"flex gap-3 pt-2",children:[l.jsx("button",{className:"flex-1 rounded-xl bg-blue-600 hover:bg-blue-500 text-white px-4 py-2.5 text-sm font-semibold shadow-lg disabled:opacity-50 transition-all min-h-[44px]",onClick:_,disabled:o==="actor-update"||se&&!m.trim(),children:"Save"}),l.jsx("button",{className:`px-4 py-2.5 rounded-xl text-sm font-medium transition-colors min-h-[44px] ${d?"bg-slate-700 hover:bg-slate-600 text-slate-200":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,onClick:$,children:"Cancel"})]})]})]})})}function O0({isOpen:c,isDark:d,busy:o,title:f,topic:p,onChangeTitle:u,onChangeTopic:x,onSave:m,onCancel:E,onDelete:_}){return c?l.jsx("div",{className:`fixed inset-0 backdrop-blur-sm flex items-start justify-center p-4 sm:p-6 z-50 animate-fade-in ${d?"bg-black/50":"bg-black/30"}`,onMouseDown:$=>{$.target===$.currentTarget&&E()},role:"dialog","aria-modal":"true","aria-labelledby":"group-edit-title",children:l.jsxs("div",{className:`w-full max-w-md mt-8 sm:mt-16 rounded-2xl border shadow-2xl animate-scale-in ${d?"border-slate-700/50 bg-gradient-to-b from-slate-800 to-slate-900":"border-gray-200 bg-white"}`,children:[l.jsx("div",{className:`px-6 py-4 border-b ${d?"border-slate-700/50":"border-gray-200"}`,children:l.jsx("div",{id:"group-edit-title",className:`text-lg font-semibold ${d?"text-white":"text-gray-900"}`,children:"Edit Group"})}),l.jsxs("div",{className:"p-6 space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:`block text-xs font-medium mb-2 ${d?"text-slate-400":"text-gray-500"}`,children:"Name"}),l.jsx("input",{className:`w-full rounded-xl border px-4 py-2.5 text-sm min-h-[44px] transition-colors ${d?"bg-slate-900/80 border-slate-600/50 text-white focus:border-blue-500":"bg-white border-gray-300 text-gray-900 focus:border-blue-500"}`,value:f,onChange:$=>u($.target.value),placeholder:"Group name"})]}),l.jsxs("div",{children:[l.jsx("label",{className:`block text-xs font-medium mb-2 ${d?"text-slate-400":"text-gray-500"}`,children:"Description (optional)"}),l.jsx("input",{className:`w-full rounded-xl border px-4 py-2.5 text-sm min-h-[44px] transition-colors ${d?"bg-slate-900/80 border-slate-600/50 text-white focus:border-blue-500":"bg-white border-gray-300 text-gray-900 focus:border-blue-500"}`,value:p,onChange:$=>x($.target.value),placeholder:"What is this group working on?"})]}),l.jsxs("div",{className:"flex gap-3 pt-3 flex-wrap",children:[l.jsx("button",{className:"flex-1 rounded-xl bg-blue-600 hover:bg-blue-500 text-white px-4 py-2.5 text-sm font-semibold shadow-lg disabled:opacity-50 transition-all min-h-[44px]",onClick:m,disabled:!f.trim()||o==="group-update",children:"Save"}),l.jsx("button",{className:`px-4 py-2.5 rounded-xl text-sm font-medium transition-colors min-h-[44px] ${d?"bg-slate-700 hover:bg-slate-600 text-slate-200":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,onClick:E,children:"Cancel"}),l.jsx("button",{className:`px-4 py-2.5 rounded-xl border text-sm font-medium disabled:opacity-50 transition-colors min-h-[44px] ${d?"bg-rose-500/20 border-rose-500/30 text-rose-400 hover:bg-rose-500/30":"bg-rose-50 border-rose-200 text-rose-600 hover:bg-rose-100"}`,onClick:()=>{E(),_()},disabled:o==="group-delete",title:"Delete this group permanently",children:"Delete"})]})]})]})}):null}function M0(c){if(c.kind==="chat.message"&&c.data&&typeof c.data=="object")return String(c.data.text||"");if(c.kind==="system.notify"&&c.data&&typeof c.data=="object"){const f=String(c.data.kind||"info"),p=String(c.data.title||""),u=String(c.data.message||""),x=c.data.target_actor_id?`  ${c.data.target_actor_id}`:"";return`[${f}]${x}: ${p}${u?` - ${u}`:""}`}const d=String(c.kind||"event"),o=c.by?` by ${c.by}`:"";return`${d}${o}`}function z0({isOpen:c,isDark:d,actorId:o,messages:f,busy:p,onClose:u,onMarkAllRead:x}){return c?l.jsx("div",{className:`fixed inset-0 backdrop-blur-sm flex items-start justify-center p-4 sm:p-6 z-50 animate-fade-in ${d?"bg-black/50":"bg-black/30"}`,onMouseDown:m=>{m.target===m.currentTarget&&u()},role:"dialog","aria-modal":"true","aria-labelledby":"inbox-title",children:l.jsxs("div",{className:`w-full max-w-2xl mt-8 sm:mt-16 rounded-2xl border shadow-2xl animate-scale-in ${d?"border-slate-700/50 bg-gradient-to-b from-slate-800 to-slate-900":"border-gray-200 bg-white"}`,children:[l.jsxs("div",{className:`px-4 sm:px-6 py-4 border-b flex items-center justify-between gap-3 ${d?"border-slate-700/50":"border-gray-200"}`,children:[l.jsxs("div",{className:"min-w-0",children:[l.jsxs("div",{id:"inbox-title",className:`text-lg font-semibold truncate ${d?"text-white":"text-gray-900"}`,children:["Inbox  ",o]}),l.jsxs("div",{className:`text-sm ${d?"text-slate-400":"text-gray-500"}`,children:[f.length," unread messages"]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{className:`rounded-xl px-4 py-2 text-sm font-medium disabled:opacity-50 transition-colors min-h-[44px] ${d?"bg-slate-700 hover:bg-slate-600 text-slate-200":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,onClick:x,disabled:!f.length||p.startsWith("inbox"),children:"Mark all read"}),l.jsx("button",{className:`rounded-xl px-4 py-2 text-sm font-medium transition-colors min-h-[44px] ${d?"bg-slate-600 hover:bg-slate-500 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-800"}`,onClick:u,children:"Close"})]})]}),l.jsxs("div",{className:"max-h-[60vh] overflow-auto p-4 space-y-2",children:[f.map((m,E)=>l.jsxs("div",{className:`rounded-xl border px-4 py-3 ${d?"border-slate-700/50 bg-slate-800/50":"border-gray-200 bg-gray-50"}`,children:[l.jsxs("div",{className:"flex items-center justify-between gap-3",children:[l.jsx("div",{className:`text-xs truncate ${d?"text-slate-400":"text-gray-500"}`,title:Yc(m.ts),children:ka(m.ts)}),l.jsx("div",{className:`text-xs font-medium truncate ${d?"text-slate-300":"text-gray-700"}`,children:m.by||""})]}),l.jsx("div",{className:`mt-2 text-sm whitespace-pre-wrap break-words ${d?"text-slate-200":"text-gray-800"}`,children:M0(m)})]},String(m.id||E))),!f.length&&l.jsxs("div",{className:"text-center py-8",children:[l.jsx("div",{className:"text-3xl mb-2",children:""}),l.jsx("div",{className:`text-sm ${d?"text-slate-400":"text-gray-500"}`,children:"No unread messages"})]})]})]})}):null}function I0({isOpen:c,isDark:d,isSmallScreen:o,toLabel:f,entries:p,onClose:u}){return c?l.jsxs("div",{className:k("fixed inset-0 z-50 flex animate-fade-in",o?"items-end justify-center":"items-center justify-center p-4"),role:"dialog","aria-modal":"true","aria-label":"Recipient status",children:[l.jsx("div",{className:k("absolute inset-0",d?"bg-black/60":"bg-black/40"),onClick:u,"aria-hidden":"true"}),l.jsxs("div",{className:k("relative w-full border shadow-2xl",o?"rounded-t-2xl max-h-[80vh] animate-slide-up safe-area-inset-bottom":"max-w-md rounded-2xl animate-scale-in",d?"bg-slate-900 border-slate-700 text-slate-100":"bg-white border-gray-200 text-gray-900"),children:[l.jsxs("div",{className:k("px-5 py-4 border-b flex items-center justify-between gap-3",d?"border-slate-800":"border-gray-200"),children:[l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:k("text-sm font-semibold truncate",d?"text-slate-100":"text-gray-900"),children:"Recipients"}),l.jsxs("div",{className:k("text-[11px] truncate",d?"text-slate-500":"text-gray-500"),title:`to ${f}`,children:["to ",f]})]}),l.jsx("button",{type:"button",className:k("touch-target-sm min-w-[36px] min-h-[36px] flex items-center justify-center rounded-lg",d?"text-slate-400 hover:text-slate-200 hover:bg-slate-800":"text-gray-400 hover:text-gray-700 hover:bg-gray-100"),onClick:u,"aria-label":"Close",children:""})]}),l.jsxs("div",{className:"p-4 sm:p-5 overflow-auto max-h-[70vh]",children:[p.length>0?l.jsx("div",{className:k("rounded-xl border divide-y",d?"border-slate-800 divide-slate-800 bg-slate-950/40":"border-gray-200 divide-gray-200 bg-gray-50"),children:p.map(([x,m])=>l.jsxs("div",{className:"flex items-center justify-between gap-3 px-4 py-3",children:[l.jsx("div",{className:k("text-sm font-medium truncate",d?"text-slate-200":"text-gray-800"),children:x}),l.jsx("div",{className:k("text-sm font-semibold tracking-tight",m?d?"text-emerald-400":"text-emerald-600":d?"text-slate-500":"text-gray-500"),"aria-label":m?"read":"pending",children:m?"":""})]},x))}):l.jsx("div",{className:k("text-sm py-6 text-center",d?"text-slate-400":"text-gray-500"),children:"No recipient tracking for this message."}),l.jsx("div",{className:k("text-[11px] mt-3",d?"text-slate-500":"text-gray-500"),children:"Legend:  pending   read"})]})]})]}):null}const Zc="cccc-theme";function $a(){return typeof window>"u"||window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function mi(){if(typeof window>"u")return"system";const c=localStorage.getItem(Zc);return c==="light"||c==="dark"||c==="system"?c:"system"}function Ic(c){const d=document.documentElement,o=c==="system"?$a():c;d.classList.remove("light","dark"),d.classList.add(o);const f=document.querySelector('meta[name="theme-color"]');f&&f.setAttribute("content",o==="dark"?"#020617":"#f8fafc")}function A0(){const[c,d]=y.useState(mi),[o,f]=y.useState(()=>mi()==="system"?$a():mi());y.useEffect(()=>{Ic(c),f(c==="system"?$a():c),localStorage.setItem(Zc,c)},[c]),y.useEffect(()=>{const x=window.matchMedia("(prefers-color-scheme: dark)"),m=()=>{c==="system"&&(Ic("system"),f($a()))};return x.addEventListener("change",m),()=>x.removeEventListener("change",m)},[c]);const p=y.useCallback(x=>{d(x)},[]),u=y.useCallback(()=>{d(x=>x==="light"?"dark":x==="dark"?"system":"light")},[]);return{theme:c,resolvedTheme:o,setTheme:p,toggleTheme:u,isDark:o==="dark"}}function ff(c){return{background:c?"#0f172a":"#fafafa",foreground:c?"#e2e8f0":"#1e293b",cursor:c?"#e2e8f0":"#1e293b",cursorAccent:c?"#0f172a":"#fafafa",selectionBackground:c?"#334155":"#bfdbfe",black:c?"#1e293b":"#64748b",red:c?"#f87171":"#dc2626",green:c?"#4ade80":"#16a34a",yellow:c?"#facc15":"#ca8a04",blue:c?"#60a5fa":"#2563eb",magenta:c?"#c084fc":"#9333ea",cyan:c?"#22d3ee":"#0891b2",white:"#f1f5f9",brightBlack:c?"#475569":"#94a3b8",brightRed:c?"#fca5a5":"#ef4444",brightGreen:c?"#86efac":"#22c55e",brightYellow:c?"#fde047":"#eab308",brightBlue:c?"#93c5fd":"#3b82f6",brightMagenta:c?"#d8b4fe":"#a855f7",brightCyan:c?"#67e8f9":"#06b6d4",brightWhite:"#f8fafc"}}const F0="modulepreload",U0=function(c){return"/ui/"+c},Ac={},B0=function(d,o,f){let p=Promise.resolve();if(o&&o.length>0){let x=function(_){return Promise.all(_.map($=>Promise.resolve($).then(L=>({status:"fulfilled",value:L}),L=>({status:"rejected",reason:L}))))};document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),E=(m==null?void 0:m.nonce)||(m==null?void 0:m.getAttribute("nonce"));p=x(o.map(_=>{if(_=U0(_),_ in Ac)return;Ac[_]=!0;const $=_.endsWith(".css"),L=$?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${_}"]${L}`))return;const z=document.createElement("link");if(z.rel=$?"stylesheet":F0,$||(z.as="script"),z.crossOrigin="",z.href=_,E&&z.setAttribute("nonce",E),document.head.appendChild(z),$)return new Promise((re,se)=>{z.addEventListener("load",re),z.addEventListener("error",()=>se(new Error(`Unable to preload CSS for ${_}`)))})}))}function u(x){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=x,window.dispatchEvent(m),!m.defaultPrevented)throw x}return p.then(x=>{for(const m of x||[])m.status==="rejected"&&u(m.reason);return d().catch(u)})},W0=y.lazy(()=>B0(()=>import("./chunk-AgentTab.js"),[]).then(c=>({default:c.AgentTab})));function V0({actor:c,groupId:d,termEpoch:o,busy:f,isDark:p,onToggleEnabled:u,onRelaunch:x,onEdit:m,onRemove:E,onInbox:_,onStatusChange:$}){return c?l.jsx(y.Suspense,{fallback:l.jsx("div",{className:`flex-1 flex items-center justify-center ${p?"text-slate-400":"text-gray-500"}`,children:"Loading agent"}),children:l.jsx(W0,{actor:c,groupId:d,isVisible:!0,onQuit:u,onLaunch:u,onRelaunch:x,onEdit:m,onRemove:E,onInbox:_,busy:f,isDark:p,onStatusChange:$},`${d}:${c.id}:${o}`)}):l.jsx("div",{className:"flex-1 flex items-center justify-center text-slate-500",children:"Agent not found"})}var H0=Gc();function Il(c,d,o){let f=o.initialDeps??[],p,u=!0;function x(){var m,E,_;let $;o.key&&((m=o.debug)!=null&&m.call(o))&&($=Date.now());const L=c();if(!(L.length!==f.length||L.some((se,H)=>f[H]!==se)))return p;f=L;let re;if(o.key&&((E=o.debug)!=null&&E.call(o))&&(re=Date.now()),p=d(...L),o.key&&((_=o.debug)!=null&&_.call(o))){const se=Math.round((Date.now()-$)*100)/100,H=Math.round((Date.now()-re)*100)/100,R=H/16,ie=(he,de)=>{for(he=String(he);he.length<de;)he=" "+he;return he};console.info(`%c ${ie(H,5)} /${ie(se,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*R,120))}deg 100% 31%);`,o==null?void 0:o.key)}return o!=null&&o.onChange&&!(u&&o.skipInitialOnChange)&&o.onChange(p),u=!1,p}return x.updateDeps=m=>{f=m},x}function Fc(c,d){if(c===void 0)throw new Error("Unexpected undefined");return c}const Q0=(c,d)=>Math.abs(c-d)<1.01,K0=(c,d,o)=>{let f;return function(...p){c.clearTimeout(f),f=c.setTimeout(()=>d.apply(this,p),o)}},Uc=c=>{const{offsetWidth:d,offsetHeight:o}=c;return{width:d,height:o}},G0=c=>c,Y0=c=>{const d=Math.max(c.startIndex-c.overscan,0),o=Math.min(c.endIndex+c.overscan,c.count-1),f=[];for(let p=d;p<=o;p++)f.push(p);return f},J0=(c,d)=>{const o=c.scrollElement;if(!o)return;const f=c.targetWindow;if(!f)return;const p=x=>{const{width:m,height:E}=x;d({width:Math.round(m),height:Math.round(E)})};if(p(Uc(o)),!f.ResizeObserver)return()=>{};const u=new f.ResizeObserver(x=>{const m=()=>{const E=x[0];if(E!=null&&E.borderBoxSize){const _=E.borderBoxSize[0];if(_){p({width:_.inlineSize,height:_.blockSize});return}}p(Uc(o))};c.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(m):m()});return u.observe(o,{box:"border-box"}),()=>{u.unobserve(o)}},Bc={passive:!0},Wc=typeof window>"u"?!0:"onscrollend"in window,X0=(c,d)=>{const o=c.scrollElement;if(!o)return;const f=c.targetWindow;if(!f)return;let p=0;const u=c.options.useScrollendEvent&&Wc?()=>{}:K0(f,()=>{d(p,!1)},c.options.isScrollingResetDelay),x=$=>()=>{const{horizontal:L,isRtl:z}=c.options;p=L?o.scrollLeft*(z&&-1||1):o.scrollTop,u(),d(p,$)},m=x(!0),E=x(!1);E(),o.addEventListener("scroll",m,Bc);const _=c.options.useScrollendEvent&&Wc;return _&&o.addEventListener("scrollend",E,Bc),()=>{o.removeEventListener("scroll",m),_&&o.removeEventListener("scrollend",E)}},q0=(c,d,o)=>{if(d!=null&&d.borderBoxSize){const f=d.borderBoxSize[0];if(f)return Math.round(f[o.options.horizontal?"inlineSize":"blockSize"])}return c[o.options.horizontal?"offsetWidth":"offsetHeight"]},Z0=(c,{adjustments:d=0,behavior:o},f)=>{var p,u;const x=c+d;(u=(p=f.scrollElement)==null?void 0:p.scrollTo)==null||u.call(p,{[f.options.horizontal?"left":"top"]:x,behavior:o})};class D0{constructor(d){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.laneAssignments=new Map,this.pendingMeasuredCacheIndexes=[],this.prevLanes=void 0,this.lanesChangedFlag=!1,this.lanesSettling=!1,this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let o=null;const f=()=>o||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:o=new this.targetWindow.ResizeObserver(p=>{p.forEach(u=>{const x=()=>{this._measureElement(u.target,u)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(x):x()})}));return{disconnect:()=>{var p;(p=f())==null||p.disconnect(),o=null},observe:p=>{var u;return(u=f())==null?void 0:u.observe(p,{box:"border-box"})},unobserve:p=>{var u;return(u=f())==null?void 0:u.unobserve(p)}}})(),this.range=null,this.setOptions=o=>{Object.entries(o).forEach(([f,p])=>{typeof p>"u"&&delete o[f]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:G0,rangeExtractor:Y0,onChange:()=>{},measureElement:q0,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...o}},this.notify=o=>{var f,p;(p=(f=this.options).onChange)==null||p.call(f,this,o)},this.maybeNotify=Il(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),o=>{this.notify(o)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(o=>o()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var o;const f=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==f){if(this.cleanup(),!f){this.maybeNotify();return}this.scrollElement=f,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((o=this.scrollElement)==null?void 0:o.window)??null,this.elementsCache.forEach(p=>{this.observer.observe(p)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,p=>{this.scrollRect=p,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(p,u)=>{this.scrollAdjustments=0,this.scrollDirection=u?this.getScrollOffset()<p?"forward":"backward":null,this.scrollOffset=p,this.isScrolling=u,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(o,f)=>{const p=new Map,u=new Map;for(let x=f-1;x>=0;x--){const m=o[x];if(p.has(m.lane))continue;const E=u.get(m.lane);if(E==null||m.end>E.end?u.set(m.lane,m):m.end<E.end&&p.set(m.lane,!0),p.size===this.options.lanes)break}return u.size===this.options.lanes?Array.from(u.values()).sort((x,m)=>x.end===m.end?x.index-m.index:x.end-m.end)[0]:void 0},this.getMeasurementOptions=Il(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled,this.options.lanes],(o,f,p,u,x,m)=>(this.prevLanes!==void 0&&this.prevLanes!==m&&(this.lanesChangedFlag=!0),this.prevLanes=m,this.pendingMeasuredCacheIndexes=[],{count:o,paddingStart:f,scrollMargin:p,getItemKey:u,enabled:x,lanes:m}),{key:!1,skipInitialOnChange:!0,onChange:()=>{this.notify(this.isScrolling)}}),this.getMeasurements=Il(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:o,paddingStart:f,scrollMargin:p,getItemKey:u,enabled:x,lanes:m},E)=>{if(!x)return this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),[];if(this.laneAssignments.size>o)for(const z of this.laneAssignments.keys())z>=o&&this.laneAssignments.delete(z);this.lanesChangedFlag&&(this.lanesChangedFlag=!1,this.lanesSettling=!0,this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),this.pendingMeasuredCacheIndexes=[]),this.measurementsCache.length===0&&!this.lanesSettling&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(z=>{this.itemSizeCache.set(z.key,z.size)}));const _=this.lanesSettling?0:this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[],this.lanesSettling&&this.measurementsCache.length===o&&(this.lanesSettling=!1);const $=this.measurementsCache.slice(0,_),L=new Array(m).fill(void 0);for(let z=0;z<_;z++){const re=$[z];re&&(L[re.lane]=z)}for(let z=_;z<o;z++){const re=u(z),se=this.laneAssignments.get(z);let H,R;if(se!==void 0&&this.options.lanes>1){H=se;const oe=L[H],K=oe!==void 0?$[oe]:void 0;R=K?K.end+this.options.gap:f+p}else{const oe=this.options.lanes===1?$[z-1]:this.getFurthestMeasurement($,z);R=oe?oe.end+this.options.gap:f+p,H=oe?oe.lane:z%this.options.lanes,this.options.lanes>1&&this.laneAssignments.set(z,H)}const ie=E.get(re),he=typeof ie=="number"?ie:this.options.estimateSize(z),de=R+he;$[z]={index:z,start:R,size:he,end:de,key:re,lane:H},L[H]=z}return this.measurementsCache=$,$},{key:!1,debug:()=>this.options.debug}),this.calculateRange=Il(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(o,f,p,u)=>this.range=o.length>0&&f>0?ef({measurements:o,outerSize:f,scrollOffset:p,lanes:u}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=Il(()=>{let o=null,f=null;const p=this.calculateRange();return p&&(o=p.startIndex,f=p.endIndex),this.maybeNotify.updateDeps([this.isScrolling,o,f]),[this.options.rangeExtractor,this.options.overscan,this.options.count,o,f]},(o,f,p,u,x)=>u===null||x===null?[]:o({startIndex:u,endIndex:x,overscan:f,count:p}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=o=>{const f=this.options.indexAttribute,p=o.getAttribute(f);return p?parseInt(p,10):(console.warn(`Missing attribute name '${f}={index}' on measured element.`),-1)},this._measureElement=(o,f)=>{const p=this.indexFromElement(o),u=this.measurementsCache[p];if(!u)return;const x=u.key,m=this.elementsCache.get(x);m!==o&&(m&&this.observer.unobserve(m),this.observer.observe(o),this.elementsCache.set(x,o)),o.isConnected&&this.resizeItem(p,this.options.measureElement(o,f,this))},this.resizeItem=(o,f)=>{const p=this.measurementsCache[o];if(!p)return;const u=this.itemSizeCache.get(p.key)??p.size,x=f-u;x!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(p,x,this):p.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=x,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(p.index),this.itemSizeCache=new Map(this.itemSizeCache.set(p.key,f)),this.notify(!1))},this.measureElement=o=>{if(!o){this.elementsCache.forEach((f,p)=>{f.isConnected||(this.observer.unobserve(f),this.elementsCache.delete(p))});return}this._measureElement(o,void 0)},this.getVirtualItems=Il(()=>[this.getVirtualIndexes(),this.getMeasurements()],(o,f)=>{const p=[];for(let u=0,x=o.length;u<x;u++){const m=o[u],E=f[m];p.push(E)}return p},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=o=>{const f=this.getMeasurements();if(f.length!==0)return Fc(f[Dc(0,f.length-1,p=>Fc(f[p]).start,o)])},this.getOffsetForAlignment=(o,f,p=0)=>{const u=this.getSize(),x=this.getScrollOffset();f==="auto"&&(f=o>=x+u?"end":"start"),f==="center"?o+=(p-u)/2:f==="end"&&(o-=u);const m=this.getTotalSize()+this.options.scrollMargin-u;return Math.max(Math.min(m,o),0)},this.getOffsetForIndex=(o,f="auto")=>{o=Math.max(0,Math.min(o,this.options.count-1));const p=this.measurementsCache[o];if(!p)return;const u=this.getSize(),x=this.getScrollOffset();if(f==="auto")if(p.end>=x+u-this.options.scrollPaddingEnd)f="end";else if(p.start<=x+this.options.scrollPaddingStart)f="start";else return[x,f];const m=f==="end"?p.end+this.options.scrollPaddingEnd:p.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(m,f,p.size),f]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(o,{align:f="start",behavior:p}={})=>{p==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(o,f),{adjustments:void 0,behavior:p})},this.scrollToIndex=(o,{align:f="auto",behavior:p}={})=>{p==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),o=Math.max(0,Math.min(o,this.options.count-1));let u=0;const x=10,m=_=>{if(!this.targetWindow)return;const $=this.getOffsetForIndex(o,_);if(!$){console.warn("Failed to get offset for index:",o);return}const[L,z]=$;this._scrollToOffset(L,{adjustments:void 0,behavior:p}),this.targetWindow.requestAnimationFrame(()=>{const re=this.getScrollOffset(),se=this.getOffsetForIndex(o,z);if(!se){console.warn("Failed to get offset for index:",o);return}Q0(se[0],re)||E(z)})},E=_=>{this.targetWindow&&(u++,u<x?this.targetWindow.requestAnimationFrame(()=>m(_)):console.warn(`Failed to scroll to index ${o} after ${x} attempts.`))};m(f)},this.scrollBy=(o,{behavior:f}={})=>{f==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+o,{adjustments:void 0,behavior:f})},this.getTotalSize=()=>{var o;const f=this.getMeasurements();let p;if(f.length===0)p=this.options.paddingStart;else if(this.options.lanes===1)p=((o=f[f.length-1])==null?void 0:o.end)??0;else{const u=Array(this.options.lanes).fill(null);let x=f.length-1;for(;x>=0&&u.some(m=>m===null);){const m=f[x];u[m.lane]===null&&(u[m.lane]=m.end),x--}p=Math.max(...u.filter(m=>m!==null))}return Math.max(p-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(o,{adjustments:f,behavior:p})=>{this.options.scrollToFn(o,{behavior:p,adjustments:f},this)},this.measure=()=>{this.itemSizeCache=new Map,this.laneAssignments=new Map,this.notify(!1)},this.setOptions(d)}}const Dc=(c,d,o,f)=>{for(;c<=d;){const p=(c+d)/2|0,u=o(p);if(u<f)c=p+1;else if(u>f)d=p-1;else return p}return c>0?c-1:0};function ef({measurements:c,outerSize:d,scrollOffset:o,lanes:f}){const p=c.length-1,u=E=>c[E].start;if(c.length<=f)return{startIndex:0,endIndex:p};let x=Dc(0,p,u,o),m=x;if(f===1)for(;m<p&&c[m].end<o+d;)m++;else if(f>1){const E=Array(f).fill(0);for(;m<p&&E.some($=>$<o+d);){const $=c[m];E[$.lane]=$.end,m++}const _=Array(f).fill(o+d);for(;x>=0&&_.some($=>$>=o);){const $=c[x];_[$.lane]=$.start,x--}x=Math.max(0,x-x%f),m=Math.min(p,m+(f-1-m%f))}return{startIndex:x,endIndex:m}}const Vc=typeof document<"u"?y.useLayoutEffect:y.useEffect;function tf(c){const d=y.useReducer(()=>({}),{})[1],o={...c,onChange:(p,u)=>{var x;u?H0.flushSync(d):d(),(x=c.onChange)==null||x.call(c,p,u)}},[f]=y.useState(()=>new D0(o));return f.setOptions(o),Vc(()=>f._didMount(),[]),Vc(()=>f._willUpdate()),f}function nf(c){return tf({observeElementRect:J0,observeElementOffset:X0,scrollToFn:Z0,...c})}function rf(c){return c.kind==="chat.message"&&c.data&&typeof c.data=="object"?String(c.data.text||""):""}const lf=y.memo(function({event:d,actors:o,isDark:f,groupId:p,onReply:u,onShowRecipients:x}){var he,de,oe;const m=d.by==="user",E=m?null:T0(String(d.by||""),f),_=(he=d.data)==null?void 0:he.quote_text,L=(Array.isArray((de=d.data)==null?void 0:de.attachments)?d.data.attachments:[]).filter(K=>K&&typeof K=="object").map(K=>({kind:String(K.kind||"file"),path:String(K.path||""),title:String(K.title||""),bytes:Number(K.bytes||0),mime_type:String(K.mime_type||"")})).filter(K=>K.path.startsWith("state/blobs/")),z=d._read_status,re=(oe=d.data)==null?void 0:oe.to,se=z?o.map(K=>String(K.id||"")).filter(K=>K&&Object.prototype.hasOwnProperty.call(z,K)).map(K=>[K,!!z[K]]):[],H=re&&re.length>0?re.join(", "):"@all",R=se.slice(0,3),ie=Math.max(0,se.length-R.length);return l.jsxs("div",{className:k("flex gap-2 sm:gap-3 group",m?"flex-col items-end sm:items-start sm:flex-row-reverse":"flex-col items-start sm:flex-row"),children:[l.jsx("div",{className:k("hidden sm:flex flex-shrink-0 w-8 h-8 rounded-full items-center justify-center text-xs font-bold shadow-sm mt-1",m?"bg-gradient-to-br from-blue-500 to-blue-600 text-white":f?"bg-slate-700 text-slate-200":"bg-white border border-gray-200 text-gray-700",!m&&E?`ring-1 ring-inset ${E.ring}`:""),children:m?"U":(d.by||"?")[0].toUpperCase()}),l.jsxs("div",{className:k("flex flex-col w-full sm:w-auto sm:max-w-[75%]",m?"items-end":"items-start"),children:[l.jsxs("div",{className:k("flex items-center gap-2 mb-1 sm:hidden",m?"flex-row-reverse":"flex-row"),children:[l.jsx("div",{className:k("flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center text-[10px] font-bold shadow-sm",m?"bg-gradient-to-br from-blue-500 to-blue-600 text-white":f?"bg-slate-700 text-slate-200":"bg-white border border-gray-200 text-gray-700",!m&&E?`ring-1 ring-inset ${E.ring}`:""),children:m?"U":(d.by||"?")[0].toUpperCase()}),l.jsx("span",{className:k("text-xs font-medium",m?f?"text-slate-300":"text-gray-700":E?E.text:f?"text-slate-300":"text-gray-700"),children:d.by}),l.jsx("span",{className:`text-[10px] ${f?"text-slate-500":"text-gray-400"}`,children:ka(d.ts)})]}),l.jsxs("div",{className:"hidden sm:flex items-center gap-2 mb-1 px-1",children:[l.jsx("span",{className:k("text-[11px] font-medium",m?f?"text-slate-400":"text-gray-500":E?E.text:f?"text-slate-400":"text-gray-500"),children:d.by}),l.jsx("span",{className:`text-[10px] ${f?"text-slate-600":"text-gray-400"}`,children:ka(d.ts)})]}),l.jsxs("div",{className:k("relative px-4 py-2.5 shadow-sm text-sm leading-relaxed",m?"bg-blue-600 text-white rounded-2xl rounded-tr-none":f?"bg-slate-800 text-slate-200 border border-slate-700 rounded-2xl rounded-tl-none":"bg-white text-gray-800 border border-gray-200 rounded-2xl rounded-tl-none"),children:[_&&l.jsxs("div",{className:`mb-2 text-xs border-l-2 pl-2 italic truncate opacity-80 ${m?"border-blue-400":f?"border-slate-600":"border-gray-300"}`,children:['"',_,'"']}),l.jsx("div",{className:"whitespace-pre-wrap break-words",children:rf(d)}),L.length>0&&p&&l.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:L.map((K,Q)=>{const Se=K.path.split("/"),P=Se[Se.length-1]||"",be=`/api/v1/groups/${encodeURIComponent(p)}/blobs/${encodeURIComponent(P)}`,ge=K.title||P||"file";return l.jsxs("a",{href:be,className:k("inline-flex items-center gap-2 rounded px-2 py-1.5 text-xs transition-colors max-w-full",m?"bg-blue-700/50 hover:bg-blue-700 text-white border border-blue-500":f?"bg-slate-900/50 hover:bg-slate-900 text-slate-300 border border-slate-700":"bg-gray-50 hover:bg-gray-100 text-gray-700 border border-gray-200"),title:`Download ${ge}`,download:!0,children:[l.jsx("span",{className:"opacity-70",children:""}),l.jsx("span",{className:"truncate",children:ge})]},`${P}:${Q}`)})})]}),l.jsxs("div",{className:k("flex items-center justify-between gap-3 mt-1 px-1 text-[10px] transition-opacity","opacity-70 group-hover:opacity-100",f?"text-slate-500":"text-gray-500"),children:[l.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[l.jsx("button",{type:"button",className:k("touch-target-sm px-1 rounded hover:underline transition-colors",f?"text-slate-400 hover:text-slate-200":"text-gray-500 hover:text-gray-700"),onClick:u,children:"Reply"}),l.jsxs("span",{className:"min-w-0 truncate",title:`to ${H}`,children:["to ",H]})]}),se.length>0&&l.jsx("button",{type:"button",className:k("touch-target-sm flex items-center gap-2 min-w-0 rounded-lg px-2 py-1",f?"hover:bg-slate-800/60":"hover:bg-gray-100"),onClick:x,"aria-label":"Show recipient status",children:l.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[R.map(([K,Q])=>l.jsxs("span",{className:"inline-flex items-center gap-1 min-w-0",children:[l.jsx("span",{className:"truncate max-w-[10ch]",children:K}),l.jsx("span",{className:k("text-[10px] font-semibold tracking-tight",Q?f?"text-emerald-400":"text-emerald-600":f?"text-slate-500":"text-gray-500"),"aria-label":Q?"read":"pending",children:Q?"":""})]},K)),ie>0&&l.jsxs("span",{className:k("text-[10px]",f?"text-slate-500":"text-gray-500"),children:["+",ie]})]})})]})]})]})},(c,d)=>c.event===d.event&&c.actors===d.actors&&c.isDark===d.isDark&&c.groupId===d.groupId),sf=y.memo(function({messages:d,actors:o,isDark:f,groupId:p,scrollRef:u,onReply:x,onShowRecipients:m,showScrollButton:E,onScrollButtonClick:_,chatUnreadCount:$,onScrollChange:L}){const z=y.useRef(null),re=y.useRef(d.length),se=y.useRef(!0),H=y.useRef(!1),R=y.useRef(null),ie=nf({count:d.length,getScrollElement:()=>z.current,estimateSize:()=>120,overscan:5}),he=y.useCallback(()=>{const P=z.current;return P?P.scrollHeight-P.scrollTop-P.clientHeight<100:!0},[]),de=y.useCallback(()=>{d.length>0&&ie.scrollToIndex(d.length-1,{align:"end"})},[d.length,ie]),oe=y.useCallback(()=>{const P=R.current;P!=null&&(R.current=null,window.clearTimeout(P))},[]),K=y.useCallback(P=>{oe(),R.current=window.setTimeout(()=>{R.current=null,P()},0)},[oe]),Q=y.useCallback(P=>{K(()=>{P!=null&&P.requireAtBottom&&!se.current||de()})},[K,de]),Se=y.useCallback(()=>{const P=he();se.current=P,L==null||L(P)},[he,L]);return y.useEffect(()=>{const P=re.current,be=d.length;re.current=be,be>P&&se.current&&Q({requireAtBottom:!0})},[d.length,Q]),y.useEffect(()=>{H.current||d.length<=0||(H.current=!0,Q())},[d.length,Q]),y.useEffect(()=>{re.current=0,se.current=!0,H.current=!1,oe()},[p,oe]),y.useEffect(()=>oe,[oe]),l.jsx("div",{ref:P=>{z.current=P,u&&(u.current=P)},className:"flex-1 min-h-0 overflow-auto px-4 py-4 relative",onScroll:d.length>0?Se:void 0,role:"log","aria-label":"Chat messages",children:d.length===0?l.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center pb-20 opacity-50",children:[l.jsx("div",{className:"text-4xl mb-4 grayscale",children:""}),l.jsx("p",{className:`text-sm font-medium ${f?"text-slate-400":"text-gray-500"}`,children:"No messages yet"}),l.jsx("p",{className:`text-xs mt-1 ${f?"text-slate-600":"text-gray-400"}`,children:"Start the conversation with your AI team."})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{style:{height:`${ie.getTotalSize()}px`,width:"100%",position:"relative"},children:ie.getVirtualItems().map(P=>{const be=d[P.index];return l.jsx("div",{"data-index":P.index,ref:ie.measureElement,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${P.start}px)`},className:"pb-6",children:l.jsx(lf,{event:be,actors:o,isDark:f,groupId:p,onReply:()=>x(be),onShowRecipients:()=>{be.id&&m(String(be.id))}})},be.id||P.index)})}),E&&l.jsxs("button",{className:`fixed bottom-24 right-6 p-3 rounded-full shadow-xl transition-all z-10 ${f?"bg-slate-800 text-white hover:bg-slate-700 border border-slate-700":"bg-white text-gray-600 hover:bg-gray-50 border border-gray-100"}`,onClick:_,"aria-label":"Scroll to bottom",children:[l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})}),$>0&&l.jsxs("span",{className:"absolute -top-1 -right-1 flex h-4 w-4",children:[l.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-indigo-400 opacity-60"}),l.jsx("span",{className:"relative inline-flex rounded-full h-4 w-4 bg-indigo-500 text-[9px] text-white items-center justify-center font-bold",children:$>9?"!":$})]})]})]})})});function af({isDark:c,isSmallScreen:d,selectedGroupId:o,actors:f,busy:p,showSetupCard:u,needsScope:x,needsActors:m,needsStart:E,hasForeman:_,onAddAgent:$,onStartGroup:L,chatMessages:z,scrollRef:re,showScrollButton:se,chatUnreadCount:H,onScrollButtonClick:R,onScrollChange:ie,onReply:he,onShowRecipients:de,replyTarget:oe,onCancelReply:K,toTokens:Q,onToggleRecipient:Se,onClearRecipients:P,composerFiles:be,onRemoveComposerFile:ge,appendComposerFiles:je,fileInputRef:Pe,composerRef:Me,composerText:Te,setComposerText:Oe,onSendMessage:ze,showMentionMenu:Ce,setShowMentionMenu:W,mentionSuggestions:ee,mentionSelectedIndex:G,setMentionSelectedIndex:w,setMentionFilter:O,onAppendRecipientToken:xe}){return l.jsxs(l.Fragment,{children:[u&&z.length>0&&l.jsx("div",{className:"flex-shrink-0 px-4 pt-4",children:l.jsxs("div",{className:k("rounded-2xl border p-4 sm:p-5",c?"border-slate-700/50 bg-slate-900/40":"border-gray-200 bg-white/70"),role:"region","aria-label":"Setup checklist",children:[l.jsx("div",{className:k("text-sm font-semibold",c?"text-slate-200":"text-gray-800"),children:"Next steps"}),l.jsxs("div",{className:"mt-3 space-y-2",children:[x&&l.jsxs("div",{className:k("rounded-xl border px-3 py-2",c?"border-slate-700 bg-slate-900/60":"border-gray-200 bg-white"),children:[l.jsx("div",{className:k("text-xs font-medium",c?"text-slate-200":"text-gray-800"),children:"Attach a project folder"}),l.jsxs("div",{className:k("mt-1 flex items-center justify-between gap-2 text-[11px]",c?"text-slate-500":"text-gray-500"),children:[l.jsxs("code",{className:k("truncate",c?"text-slate-300":"text-gray-700"),children:["cccc attach . --group ",o]}),l.jsx("button",{type:"button",className:k("flex-shrink-0 rounded-lg px-2 py-1 text-[11px] font-medium border",c?"border-slate-700 text-slate-300 hover:bg-slate-800":"border-gray-200 text-gray-700 hover:bg-gray-50"),onClick:async()=>{const B=`cccc attach . --group ${o}`;try{await navigator.clipboard.writeText(B)}catch{window.prompt("Copy command:",B)}},children:"Copy"})]})]}),m&&l.jsxs("div",{className:k("flex items-center justify-between gap-3 rounded-xl border px-3 py-2",c?"border-slate-700 bg-slate-900/60":"border-gray-200 bg-white"),children:[l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:k("text-xs font-medium",c?"text-slate-200":"text-gray-800"),children:"Add an agent"}),l.jsx("div",{className:k("text-[11px] truncate",c?"text-slate-500":"text-gray-500"),children:"Add a foreman first, then peers."})]}),l.jsx("button",{type:"button",className:k("flex-shrink-0 rounded-xl px-3 py-1.5 text-[11px] font-semibold","bg-blue-600 hover:bg-blue-500 text-white"),onClick:$,children:"Add Agent"})]}),E&&l.jsxs("div",{className:k("flex items-center justify-between gap-3 rounded-xl border px-3 py-2",c?"border-slate-700 bg-slate-900/60":"border-gray-200 bg-white"),children:[l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:k("text-xs font-medium",c?"text-slate-200":"text-gray-800"),children:"Start the group"}),l.jsx("div",{className:k("text-[11px] truncate",c?"text-slate-500":"text-gray-500"),children:"Launch your agents and begin chatting."})]}),l.jsx("button",{type:"button",className:k("flex-shrink-0 rounded-xl px-3 py-1.5 text-[11px] font-semibold","bg-emerald-600 hover:bg-emerald-500 text-white",p==="group-start"?"opacity-60":""),onClick:L,disabled:p==="group-start",children:p==="group-start"?"Starting":"Start"})]})]})]})}),z.length===0&&u?l.jsx("div",{ref:re,className:"flex-1 min-h-0 overflow-auto px-4 py-4 relative",role:"log","aria-label":"Chat messages",children:l.jsx("div",{className:"flex flex-col items-center justify-center h-full text-center pb-20",children:l.jsxs("div",{className:k("w-full max-w-md",c?"text-slate-200":"text-gray-800"),children:[l.jsx("div",{className:k("text-4xl mb-4",""),children:""}),l.jsx("div",{className:k("text-sm font-semibold",c?"text-slate-200":"text-gray-800"),children:"Next steps"}),l.jsxs("div",{className:k("mt-4 space-y-2",""),children:[x&&l.jsxs("div",{className:k("rounded-2xl border p-4 text-left",c?"border-slate-700/50 bg-slate-900/40":"border-gray-200 bg-white/70"),children:[l.jsx("div",{className:"text-xs font-semibold",children:"Attach a project folder"}),l.jsxs("div",{className:k("mt-2 flex items-center justify-between gap-2 text-[11px]",c?"text-slate-500":"text-gray-500"),children:[l.jsxs("code",{className:k("truncate",c?"text-slate-300":"text-gray-700"),children:["cccc attach . --group ",o]}),l.jsx("button",{type:"button",className:k("flex-shrink-0 rounded-lg px-2 py-1 text-[11px] font-medium border",c?"border-slate-700 text-slate-300 hover:bg-slate-800":"border-gray-200 text-gray-700 hover:bg-gray-50"),onClick:async()=>{const B=`cccc attach . --group ${o}`;try{await navigator.clipboard.writeText(B)}catch{window.prompt("Copy command:",B)}},children:"Copy"})]})]}),m&&l.jsxs("div",{className:k("rounded-2xl border p-4 text-left",c?"border-slate-700/50 bg-slate-900/40":"border-gray-200 bg-white/70"),children:[l.jsx("div",{className:"text-xs font-semibold",children:"Add an agent"}),l.jsx("div",{className:k("mt-1 text-[11px]",c?"text-slate-500":"text-gray-500"),children:"Add a foreman first, then peers."}),l.jsx("button",{type:"button",className:"mt-3 w-full rounded-xl px-4 py-2 text-sm font-semibold bg-blue-600 hover:bg-blue-500 text-white",onClick:$,children:"Add Agent"})]}),E&&l.jsxs("div",{className:k("rounded-2xl border p-4 text-left",c?"border-slate-700/50 bg-slate-900/40":"border-gray-200 bg-white/70"),children:[l.jsx("div",{className:"text-xs font-semibold",children:"Start the group"}),l.jsx("div",{className:k("mt-1 text-[11px]",c?"text-slate-500":"text-gray-500"),children:"Launch your agents and begin chatting."}),l.jsx("button",{type:"button",className:k("mt-3 w-full rounded-xl px-4 py-2 text-sm font-semibold","bg-emerald-600 hover:bg-emerald-500 text-white",p==="group-start"?"opacity-60":""),onClick:L,disabled:p==="group-start",children:p==="group-start"?"Starting":"Start Group"})]}),!x&&!m&&!E&&l.jsx("div",{className:k("text-xs mt-4",c?"text-slate-400":"text-gray-500"),children:"Team is ready. Say hi to your agents."})]})]})})}):l.jsx(sf,{messages:z,actors:f,isDark:c,groupId:o||"",scrollRef:re,onReply:he,onShowRecipients:de,showScrollButton:se,onScrollButtonClick:R,chatUnreadCount:H,onScrollChange:ie}),l.jsxs("footer",{className:`flex-shrink-0 border-t px-4 py-3 safe-area-inset-bottom ${c?"border-slate-800 bg-slate-950/80 backdrop-blur":"border-gray-200 bg-white/80 backdrop-blur"}`,children:[oe&&l.jsxs("div",{className:`mb-2 flex items-center gap-2 text-xs rounded-xl px-3 py-2 ${c?"text-slate-400 bg-slate-900/50":"text-gray-500 bg-gray-100"}`,children:[l.jsx("span",{className:c?"text-slate-500":"text-gray-400",children:"Replying to"}),l.jsx("span",{className:`font-medium ${c?"text-slate-300":"text-gray-700"}`,children:oe.by}),l.jsxs("span",{className:`truncate flex-1 ${c?"text-slate-500":"text-gray-400"}`,children:['"',oe.text,'"']}),l.jsx("button",{className:`p-1 rounded-full ${c?"hover:bg-slate-800 text-slate-400 hover:text-slate-200":"hover:bg-gray-200 text-gray-400 hover:text-gray-600"}`,onClick:K,title:"Cancel reply","aria-label":"Cancel reply",children:""})]}),l.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[l.jsx("div",{className:`text-xs font-medium flex-shrink-0 ${c?"text-slate-500":"text-gray-400"}`,children:"To"}),l.jsx("div",{className:"flex-1 min-w-0 overflow-x-auto scrollbar-hide sm:overflow-visible",children:l.jsx("div",{className:"flex items-center gap-1.5 flex-nowrap sm:flex-wrap",children:["@all","@foreman","@peers",...f.map(B=>String(B.id||""))].map(B=>{const q=B.trim();if(!q)return null;const J=Q.includes(q);return l.jsx("button",{className:k("flex-shrink-0 whitespace-nowrap text-[11px] px-2.5 py-1 rounded-full border transition-all",J?"bg-emerald-600 text-white border-emerald-500 shadow-sm":c?"bg-slate-900 text-slate-400 border-slate-800 hover:border-slate-600 hover:text-slate-200":"bg-white text-gray-600 border-gray-200 hover:border-gray-300 hover:text-gray-800"),onClick:()=>Se(q),disabled:!o||p==="send",title:J?"Remove recipient":"Add recipient","aria-pressed":J,children:q},q)})})}),Q.length>0&&l.jsx("button",{className:`flex-shrink-0 text-[10px] px-2 py-1 rounded-full transition-colors ${c?"text-slate-500 hover:text-slate-300 hover:bg-slate-800":"text-gray-400 hover:text-gray-600 hover:bg-gray-100"}`,onClick:P,disabled:p==="send",title:"Clear recipients",children:"clear"})]}),be.length>0&&l.jsx("div",{className:`mb-3 flex flex-wrap gap-2 ${c?"text-slate-300":"text-gray-700"}`,children:be.map((B,q)=>l.jsxs("span",{className:k("inline-flex items-center gap-2 rounded-lg border px-2.5 py-1.5 text-xs max-w-full shadow-sm",c?"border-slate-700 bg-slate-900":"border-gray-200 bg-white"),title:B.name,children:[l.jsx("span",{className:"truncate",children:B.name}),l.jsx("button",{className:k("flex-shrink-0 p-0.5 rounded-full",c?"text-slate-400 hover:text-white hover:bg-slate-700":"text-slate-400 hover:text-gray-700 hover:bg-gray-100"),onClick:()=>ge(q),title:"Remove file",children:""})]},`${B.name}:${q}`))}),l.jsxs("div",{className:"flex gap-2 relative items-end",children:[l.jsx("input",{ref:Pe,type:"file",multiple:!0,className:"hidden",onChange:B=>{const q=Array.from(B.target.files||[]);q.length>0&&je(q),B.target.value=""}}),l.jsx("button",{className:k("rounded-full p-2.5 text-lg transition-colors flex-shrink-0 shadow-sm border",c?"bg-slate-800 border-slate-700 text-slate-400 hover:text-slate-200 hover:bg-slate-700 hover:border-slate-600":"bg-white border-gray-200 text-gray-400 hover:text-gray-600 hover:bg-gray-50 hover:border-gray-300"),onClick:()=>{var B;return(B=Pe.current)==null?void 0:B.click()},disabled:!o||p==="send",title:"Attach file",children:""}),l.jsx("textarea",{ref:Me,className:`w-full rounded-3xl border px-4 py-3 text-sm resize-none min-h-[48px] max-h-[140px] transition-all focus:ring-2 focus:ring-offset-1 ${c?"bg-slate-900 border-slate-700 text-slate-200 placeholder-slate-500 focus:border-blue-500/50 focus:ring-blue-500/20 focus:ring-offset-slate-900":"bg-white border-gray-200 text-gray-900 placeholder-gray-400 focus:border-blue-400 focus:ring-blue-100 focus:ring-offset-white"}`,placeholder:d?"Message":"Message (@ to mention, Ctrl+Enter to send)",rows:1,value:Te,onPaste:B=>{const q=B.clipboardData;if(!q)return;const J=[];try{const ve=Array.from(q.items||[]);for(const $e of ve){if(!$e||$e.kind!=="file")continue;const At=$e.getAsFile();At&&J.push(At)}}catch{}if(J.length===0)try{J.push(...Array.from(q.files||[]))}catch{}if(J.length===0||!o)return;const ye=new Set,T=[];for(const ve of J){const $e=`${ve.name}:${ve.size}:${ve.type}`;ye.has($e)||(ye.add($e),T.push(ve))}T.length!==0&&(B.preventDefault(),je(T))},onChange:B=>{const q=B.target.value;Oe(q);const J=B.target;J.style.height="auto",J.style.height=Math.min(J.scrollHeight,140)+"px";const ye=q.lastIndexOf("@");if(ye>=0){const T=q.slice(ye+1);(ye===0||q[ye-1]===" "||q[ye-1]===`
`)&&!T.includes(" ")&&!T.includes(`
`)?(O(T),W(!0),w(0)):W(!1)}else W(!1)},onKeyDown:B=>{if(Ce&&ee.length>0){const q=Math.min(ee.length,8)-1;if(B.key==="ArrowDown"){B.preventDefault(),w(J=>J>=q?0:J+1);return}if(B.key==="ArrowUp"){B.preventDefault(),w(J=>J<=0?q:J-1);return}if(B.key==="Enter"||B.key==="Tab"){B.preventDefault();const J=ee[G];if(J){const ye=Te.lastIndexOf("@");if(ye>=0){const T=Te.slice(0,ye);Oe(T+J+" ")}Q.includes(J)||xe(J),W(!1),w(0)}return}if(B.key==="Escape"){B.preventDefault(),W(!1),w(0);return}}B.key==="Enter"&&!Ce?(B.ctrlKey||B.metaKey)&&(B.preventDefault(),ze()):B.key==="Escape"&&(W(!1),K())},onBlur:()=>setTimeout(()=>W(!1),150),"aria-label":"Message input"}),Ce&&ee.length>0&&l.jsx("div",{className:`absolute bottom-full left-0 mb-2 w-56 max-h-48 overflow-auto rounded-xl border shadow-xl z-20 ${c?"border-slate-700 bg-slate-900":"border-gray-200 bg-white"}`,role:"listbox","aria-label":"Mention suggestions",children:ee.slice(0,8).map((B,q)=>l.jsx("button",{className:k("w-full text-left px-4 py-2.5 text-sm transition-colors",c?"text-slate-200":"text-gray-700",q===G?c?"bg-slate-800":"bg-blue-50 text-blue-700":c?"hover:bg-slate-800":"hover:bg-gray-50"),onMouseDown:J=>{var T;J.preventDefault();const ye=Te.lastIndexOf("@");if(ye>=0){const ve=Te.slice(0,ye);Oe(ve+B+" ")}Q.includes(B)||xe(B),W(!1),w(0),(T=Me.current)==null||T.focus()},onMouseEnter:()=>w(q),children:B},B))}),l.jsx("button",{className:`rounded-full px-5 py-2.5 text-sm font-semibold disabled:opacity-50 min-h-[48px] shadow-sm transition-all flex items-center justify-center ${p==="send"||!Te.trim()&&be.length===0?c?"bg-slate-800 text-slate-500":"bg-gray-100 text-gray-400":"bg-blue-600 hover:bg-blue-500 text-white shadow-blue-500/20"}`,onClick:ze,disabled:p==="send"||!Te.trim()&&be.length===0,"aria-label":"Send message",children:p==="send"?l.jsx("span",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):"Send"})]})]})]})}function of(c){return La.includes(c)}function pi(c,d){if(!d.length)return[];const o=d.map(_=>String(_.id||"")).filter(_=>_),f=new Set(o),u=(c.data&&typeof c.data=="object"&&Array.isArray(c.data.to)?c.data.to:[]).map(_=>String(_||"").trim()).filter(_=>_.length>0),x=new Set(u),m=String(c.by||"").trim();if(x.size===0||x.has("@all"))return o.filter(_=>_!==m);const E=new Set;for(const _ of x)if(!(_==="user"||_==="@user")){if(_==="@peers"){for(const $ of d)$.role==="peer"&&E.add(String($.id));continue}if(_==="@foreman"){for(const $ of d)$.role==="foreman"&&E.add(String($.id));continue}f.has(_)&&E.add(_)}return E.delete(m),Array.from(E)}function uf(c){if(!c)return"";const d=String(c.active_scope_key||"");if(!d)return"";const f=(Array.isArray(c.scopes)?c.scopes:[]).find(p=>String(p.scope_key||"")===d);return String((f==null?void 0:f.url)||"")}const Hc=800,hi=20,Qc=hi*1024*1024;function cf(){const{theme:c,setTheme:d,isDark:o}=A0(),[f,p]=y.useState([]),[u,x]=y.useState(""),[m,E]=y.useState(null),[_,$]=y.useState([]),[L,z]=y.useState([]),[re,se]=y.useState(null),[H,R]=y.useState(null),[ie,he]=y.useState([]),[de,oe]=y.useState("chat"),[K,Q]=y.useState(""),[Se,P]=y.useState(""),[be,ge]=y.useState(!1),[je,Pe]=y.useState(!0),[Me,Te]=y.useState({}),[Oe,ze]=y.useState(!1),[Ce,W]=y.useState(0),[ee,G]=y.useState(!1);y.useEffect(()=>{const b=window.matchMedia("(max-width: 639px)"),S=()=>G(b.matches);return S(),typeof b.addEventListener=="function"?(b.addEventListener("change",S),()=>b.removeEventListener("change",S)):(b.addListener(S),()=>b.removeListener(S))},[]);const[w,O]=y.useState(!1),[xe,B]=y.useState(!1),[q,J]=y.useState(!1),[ye,T]=y.useState(!1),[ve,$e]=y.useState(!1),[At,Rn]=y.useState(!1),[qe,rr]=y.useState(!1),[rt,hn]=y.useState(null),[Ln,Pn]=y.useState(!1),[gn,Pt]=y.useState(""),[et,ut]=y.useState([]),[lt,Ft]=y.useState(""),[tn,xn]=y.useState(null),[lr,On]=y.useState(!1),[Mn,zn]=y.useState(""),[In,sr]=y.useState(0),[Er,Ut]=y.useState(!1),[nn,yn]=y.useState(null),[Bt,An]=y.useState(""),[Fn,rn]=y.useState("peer"),[We,yt]=y.useState("codex"),[Ct,Et]=y.useState(""),[ar,Wt]=y.useState(!1),[vn,Vt]=y.useState(""),[_r,bn]=y.useState("codex"),[or,wn]=y.useState(""),[Al,Un]=y.useState(""),[Bn,Wn]=y.useState(""),[ir,Jr]=y.useState(""),[Xr,$r]=y.useState(""),[Ht,kr]=y.useState(""),[Fl,qr]=y.useState([]),[ln,Zr]=y.useState([]),[Dr,el]=y.useState(""),[Ul,F]=y.useState(null),[pe,Re]=y.useState(!1),[Ie,Fe]=y.useState(""),[Ze,vt]=y.useState([]),Tr=y.useRef(null),jn=y.useRef(null),bt=y.useRef(null),Vn=y.useRef(null),st=y.useRef(null),Pa=y.useRef(null),Ss=y.useRef("chat"),Hn=y.useRef(""),Qn=y.useRef(!0),ur=y.useRef([]),Qt=y.useRef(0),Kt=y.useRef(null),Bl=y.useRef([]),Wl=y.useRef(!1),Rr=y.useRef(!1),tl=y.useRef(new Set),Lr=y.useRef(new Set),sn=y.useRef(0),Cs=y.useRef(0),nl=y.useRef(0),ue=y.useCallback(b=>{bt.current&&window.clearTimeout(bt.current),P(b),bt.current=window.setTimeout(()=>{P(""),bt.current=null},8e3)},[]),rl=y.useCallback(b=>{const S=Array.from(b||[]);if(S.length===0)return;const M=S.filter(ne=>ne.size>Qc),Y=S.filter(ne=>ne.size<=Qc);if(M.length>0){const ne=M.slice(0,3).map(Ee=>Ee.name||"file"),ce=M.length>3?` (+${M.length-3} more)`:"";ue(`File too large (> ${hi}MB): ${ne.join(", ")}${ce}`)}if(Y.length===0)return;const Z=ne=>`${ne.name}:${ne.size}:${ne.lastModified}`;ut(ne=>{const ce=ne.slice(),Ee=new Set(ce.map(Z));for(const Ge of Y){const Je=Z(Ge);Ee.has(Je)||(Ee.add(Je),ce.push(Ge))}return ce})},[ue]),Es=y.useMemo(()=>uf(m),[m]),cr=y.useMemo(()=>L.some(b=>b.role==="foreman"),[L]),ll=y.useMemo(()=>f.find(b=>String(b.group_id||"")===u)||null,[f,u]),sl=(ll==null?void 0:ll.running)??!1,_s=y.useMemo(()=>{const b=We,S=new Set(L.map(M=>String(M.id||"")));for(let M=1;M<=999;M++){const Y=`${b}-${M}`;if(!S.has(Y))return Y}return`${b}-${Date.now()}`},[L,We]),Vl=y.useMemo(()=>{if(K==="actor-add")return!1;const b=ie.find(M=>M.name===We),S=(b==null?void 0:b.available)??!1;return!(We==="custom"&&!Ct.trim()||!S&&!Ct.trim())},[K,We,Ct,ie]),al=y.useMemo(()=>{var M;if(K==="actor-add")return"";const b=ie.find(Y=>Y.name===We),S=(b==null?void 0:b.available)??!1;return We==="custom"&&!Ct.trim()?"Custom runtime requires a command.":!S&&!Ct.trim()?`${((M=Ns[We])==null?void 0:M.label)||We} is not installed. Install it, or set a command override.`:""},[K,We,Ct,ie]),Ot=y.useMemo(()=>{const b=new Set(["@all","@foreman","@peers"]);for(const S of L){const M=String(S.id||"").trim();M&&b.add(M)}return b},[L]),Gt=y.useMemo(()=>{const S=lt.split(",").map(Z=>Z.trim()).filter(Z=>Z.length>0).filter(Z=>Z!=="user"&&Z!=="@user"&&Z!=="@"),M=[],Y=new Set;for(const Z of S)Ot.has(Z)&&(Y.has(Z)||(Y.add(Z),M.push(Z)));return M},[lt,Ot]);y.useEffect(()=>{if(!lt)return;const S=lt.split(",").map(ne=>ne.trim()).filter(ne=>ne.length>0).filter(ne=>ne!=="user"&&ne!=="@user"&&ne!=="@"),M=[],Y=new Set;for(const ne of S)Ot.has(ne)&&(Y.has(ne)||(Y.add(ne),M.push(ne)));const Z=M.join(", ");Z!==lt&&Ft(Z)},[lt,Ot]);const Nn=y.useMemo(()=>{const b=["@all","@foreman","@peers"],S=L.map(Z=>String(Z.id||"")).filter(Z=>Z),M=[...b,...S];if(!Mn)return M;const Y=Mn.toLowerCase();return M.filter(Z=>Z.toLowerCase().includes(Y))},[L,Mn]),Sn=y.useMemo(()=>["chat",...L.map(b=>b.id)],[L]);async function wt(){if(Wl.current){Rr.current=!0;return}Wl.current=!0;try{const b=await _e("/api/v1/groups");if(b.ok){const S=b.result.groups||[];p(S);const M=Hn.current;!(!!M&&S.some(Z=>String(Z.group_id||"")===M))&&S.length>0&&x(String(S[0].group_id||""))}}catch{}finally{Wl.current=!1,Rr.current&&(Rr.current=!1,wt())}}async function Cn(){const b=await _e("/api/v1/runtimes");if(b.ok){he(b.result.runtimes||[]);const S=(b.result.runtimes||[]).filter(M=>M.available).map(M=>M.name);if(S.length>0&&!S.includes(We)){const M=La.find(Y=>S.includes(Y));M&&yt(M)}}}async function $s(){const b=await _e("/api/v1/fs/recent");b.ok&&Zr(b.result.suggestions||[])}async function ks(b){var M;Re(!0);const S=await _e(`/api/v1/fs/list?path=${encodeURIComponent(b)}`);S.ok?(qr(S.result.items||[]),el(S.result.path||b),F(S.result.parent||null)):ue(((M=S.error)==null?void 0:M.message)||"Failed to list directory")}async function an(b){const S=await _e(`/api/v1/groups/${encodeURIComponent(b)}/context`);S.ok&&S.result&&typeof S.result=="object"?se(S.result):se(null)}async function Oa(b){const S=await _e(`/api/v1/groups/${encodeURIComponent(b)}/settings`);S.ok&&S.result.settings&&R(S.result.settings)}async function ol(b){const S=String(b||"").trim();if(!S)return;sn.current+=1;const M=sn.current,Y=ne=>new Promise(ce=>window.setTimeout(ce,ne)),Z=async ne=>{try{return await ne}catch{return{ok:!1,error:{code:"network_error",message:"Network error"}}}};ge(!0);try{if(await Y(150),sn.current!==M||Hn.current!==S)return;const[ne,ce,Ee,Ge,Je]=await Promise.all([Z(_e(`/api/v1/groups/${encodeURIComponent(S)}`)),Z(_e(`/api/v1/groups/${encodeURIComponent(S)}/ledger/tail?lines=120&with_read_status=true`)),Z(_e(`/api/v1/groups/${encodeURIComponent(S)}/actors?include_unread=true`)),Z(_e(`/api/v1/groups/${encodeURIComponent(S)}/context`)),Z(_e(`/api/v1/groups/${encodeURIComponent(S)}/settings`))]);if(sn.current!==M||Hn.current!==S)return;E(ne.ok?ne.result.group:null),$(ce.ok?(ce.result.events||[]).filter(Yt=>Yt&&Yt.kind!=="context.sync"):[]),z(Ee.ok?Ee.result.actors||[]:[]),se(Ge.ok?Ge.result:null),R(Je.ok&&Je.result.settings?Je.result.settings:null),P(""),oe("chat"),await Y(0)}finally{sn.current===M&&ge(!1)}}function il(b){Vn.current&&(Vn.current.close(),Vn.current=null);const S=new EventSource(`/api/v1/groups/${encodeURIComponent(b)}/ledger/stream`);S.addEventListener("ledger",M=>{var Z,ne;const Y=M;try{const ce=JSON.parse(String(Y.data||"{}"));if(ce&&typeof ce=="object"&&ce.kind==="context.sync"){Kt.current&&window.clearTimeout(Kt.current),Kt.current=window.setTimeout(()=>{Kt.current=null,an(b)},150);return}if(ce&&typeof ce=="object"&&ce.kind==="chat.read"){const Ge=String(((Z=ce.data)==null?void 0:Z.actor_id)||""),Je=String(((ne=ce.data)==null?void 0:ne.event_id)||"");Ge&&Je&&$(Yt=>{const hl=Yt.findIndex(Gn=>Gn.kind==="chat.message"&&String(Gn.id||"")===Je);if(hl<0)return Yt;const gl=Yt.slice();for(let Gn=0;Gn<=hl;Gn++){const Yn=gl[Gn];if(!Yn||Yn.kind!=="chat.message"||!pi(Yn,ur.current).includes(Ge))continue;const ql=Yn._read_status&&typeof Yn._read_status=="object"?{...Yn._read_status}:{};ql[Ge]!==!0&&(ql[Ge]=!0,gl[Gn]={...Yn,_read_status:ql})}return gl}),jt(b);return}if(ce&&typeof ce=="object"&&ce.kind==="chat.message"&&!ce._read_status){const Ge=pi(ce,ur.current);if(Ge.length>0){const Je={};for(const Yt of Ge)Je[Yt]=!1;ce._read_status=Je}}if($(Ge=>{const Je=Ge.concat([ce]);return Je.length>Hc?Je.slice(Je.length-Hc):Je}),ce&&typeof ce=="object"&&ce.kind==="chat.message"){const Ge=String(ce.by||"");if(Ge&&Ge!=="user"){const Je=Ss.current==="chat",Yt=Qn.current;(!Je||!Yt)&&W(hl=>hl+1)}}const Ee=String(ce.kind||"");(Ee==="chat.message"||Ee==="chat.read"||Ee.startsWith("actor.")||Ee==="group.start"||Ee==="group.stop"||Ee==="group.set_state")&&jt(b)}catch{}}),Vn.current=S}async function jt(b){const S=String(b||Hn.current||u||"").trim();if(S){if(tl.current.has(S)){Lr.current.add(S);return}tl.current.add(S);try{const M=await _e(`/api/v1/groups/${encodeURIComponent(S)}/actors?include_unread=true`);M.ok&&Hn.current===S&&z(M.result.actors||[])}catch{}finally{tl.current.delete(S),Lr.current.has(S)&&(Lr.current.delete(S),jt(S))}}}function Hl(){for(const b of Bl.current)window.clearTimeout(b);Bl.current=[]}function Pr(b){const S=String(b||"").trim();if(!S)return;Hl();const M=[1e3,2500,5e3,1e4,15e3];for(const Y of M){const Z=window.setTimeout(()=>{Hn.current===S&&jt(S)},Y);Bl.current.push(Z)}}function Or(b){const S=b.trim();if(!S)return;const M=Gt,Y=M.findIndex(Z=>Z===S);if(Y>=0){const Z=M.slice(0,Y).concat(M.slice(Y+1));Ft(Z.join(", "))}else Ft(M.concat([S]).join(", "))}async function dr(){const b=gn.trim();if(u&&!(!b&&et.length===0)){Q("send");try{P("");const S=Gt;let M;if(tn){const Y=String(tn.by||"").trim(),Z=Y&&Y!=="user"&&Y!=="unknown"?[Y]:["@all"],ne=S.length?S:Z;if(et.length>0){const ce=new FormData;ce.append("by","user"),ce.append("text",b),ce.append("to_json",JSON.stringify(ne)),ce.append("reply_to",tn.eventId);for(const Ee of et)ce.append("files",Ee);M=await Mc(`/api/v1/groups/${encodeURIComponent(u)}/reply_upload`,ce)}else M=await _e(`/api/v1/groups/${encodeURIComponent(u)}/reply`,{method:"POST",body:JSON.stringify({text:b,by:"user",to:ne,reply_to:tn.eventId})})}else if(et.length>0){const Y=new FormData;Y.append("by","user"),Y.append("text",b),Y.append("to_json",JSON.stringify(S)),Y.append("path","");for(const Z of et)Y.append("files",Z);M=await Mc(`/api/v1/groups/${encodeURIComponent(u)}/send_upload`,Y)}else M=await _e(`/api/v1/groups/${encodeURIComponent(u)}/send`,{method:"POST",body:JSON.stringify({text:b,by:"user",to:S,path:""})});if(!M.ok){ue(`${M.error.code}: ${M.error.message}`);return}Pt(""),ut([]),jn.current&&(jn.current.value=""),xn(null)}finally{Q("")}}}function Mr(b){var M;if(!b.id||b.kind!=="chat.message")return;const S=(M=b.data)!=null&&M.text?String(b.data.text):"";xn({eventId:String(b.id),by:String(b.by||"unknown"),text:S.slice(0,100)+(S.length>100?"...":"")})}async function Ma(){var S;if(!u)return;const b=Bt.trim();Q("actor-add"),Vt("");try{const M=await _e(`/api/v1/groups/${encodeURIComponent(u)}/actors`,{method:"POST",body:JSON.stringify({actor_id:b,role:Fn,runner:"pty",runtime:We,command:Ct,env:{},default_scope_key:"",by:"user"})});if(!M.ok){Vt(((S=M.error)==null?void 0:S.message)||"Failed to add agent");return}T(!1),An(""),Et(""),rn("peer"),yt("codex"),Wt(!1),Vt(""),await jt()}finally{Q("")}}async function za(b){if(!u)return;const S=String(b.id||"").trim();if(!S)return;const M=b.running??b.enabled??!1;Q(`actor-${M?"stop":"start"}:${S}`);try{P("");const Y=M?"stop":"start",Z=await _e(`/api/v1/groups/${encodeURIComponent(u)}/actors/${encodeURIComponent(S)}/${Y}`,{method:"POST"});if(!Z.ok){ue(`${Z.error.code}: ${Z.error.message}`);return}await jt()}finally{Q("")}}async function Ql(b){if(!u)return;const S=String(b.id||"").trim();if(S&&window.confirm(`Remove actor ${S}?`)){Q(`actor-remove:${S}`);try{P("");const M=await _e(`/api/v1/groups/${encodeURIComponent(u)}/actors/${encodeURIComponent(S)}?by=user`,{method:"DELETE"});if(!M.ok){ue(`${M.error.code}: ${M.error.message}`);return}de===S&&oe("chat"),await jt(),await ol(u)}finally{Q("")}}}function ul(b){if(b.running??b.enabled??!1){ue("Stop the actor before editing. Use stop  edit  start workflow.");return}hn(b);const M=String(b.runtime||"").trim(),Y=of(M)?M:"codex";bn(Y);const Z=Array.isArray(b.command)?b.command.join(" "):"";wn(Z),Un(b.title||"")}async function Kl(){if(!u||!rt)return;const b=String(rt.id||"").trim();if(b){Q("actor-update");try{P("");const S=await _e(`/api/v1/groups/${encodeURIComponent(u)}/actors/${encodeURIComponent(b)}`,{method:"POST",body:JSON.stringify({runtime:_r,command:or.trim(),title:Al.trim(),by:"user"})});if(!S.ok){ue(`${S.error.code}: ${S.error.message}`);return}hn(null),await jt()}finally{Q("")}}}async function cl(){if(u){Q("group-start");try{P("");const b=await _e(`/api/v1/groups/${encodeURIComponent(u)}/start?by=user`,{method:"POST"});if(!b.ok){ue(`${b.error.code}: ${b.error.message}`);return}await jt(),await wt()}finally{Q("")}}}async function on(){if(u){Q("group-stop");try{P("");const b=await _e(`/api/v1/groups/${encodeURIComponent(u)}/stop?by=user`,{method:"POST"});if(!b.ok){ue(`${b.error.code}: ${b.error.message}`);return}await jt(),await wt()}finally{Q("")}}}async function Gl(){const b=Xr.trim();if(!b)return;const S=b.split("/").filter(Boolean).pop()||"working-group",M=Ht.trim()||S;Q("create");try{P("");const Y=await _e("/api/v1/groups",{method:"POST",body:JSON.stringify({title:M,topic:"",by:"user"})});if(!Y.ok){ue(`${Y.error.code}: ${Y.error.message}`);return}const Z=Y.result.group_id,ne=await _e(`/api/v1/groups/${encodeURIComponent(Z)}/attach`,{method:"POST",body:JSON.stringify({path:b,by:"user"})});ne.ok||ue(`Created group but failed to attach: ${ne.error.message}`),$r(""),kr(""),$e(!1),await wt(),x(Z)}finally{Q("")}}async function dl(){if(u){Q("group-update");try{P("");const b=await _e(`/api/v1/groups/${encodeURIComponent(u)}`,{method:"PUT",body:JSON.stringify({title:Bn.trim(),topic:ir.trim(),by:"user"})});if(!b.ok){ue(`${b.error.code}: ${b.error.message}`);return}Rn(!1),await wt(),await ol(u)}finally{Q("")}}}async function Ts(){if(u&&window.confirm(`Delete group "${(m==null?void 0:m.title)||u}"? This cannot be undone.`)){Q("group-delete");try{P("");const b=await _e(`/api/v1/groups/${encodeURIComponent(u)}?confirm=${encodeURIComponent(u)}&by=user`,{method:"DELETE"});if(!b.ok){ue(`${b.error.code}: ${b.error.message}`);return}x(""),E(null),$([]),z([]),se(null),R(null),await wt()}finally{Q("")}}}async function fl(b){if(u){Q("context-update");try{const S=await _e(`/api/v1/groups/${encodeURIComponent(u)}/context`,{method:"POST",body:JSON.stringify({ops:[{op:"vision.update",vision:b}],by:"user"})});S.ok||ue(`${S.error.code}: ${S.error.message}`),await an(u)}finally{Q("")}}}async function ml(b){if(u){Q("context-update");try{const S=await _e(`/api/v1/groups/${encodeURIComponent(u)}/context`,{method:"POST",body:JSON.stringify({ops:[{op:"sketch.update",sketch:b}],by:"user"})});S.ok||ue(`${S.error.code}: ${S.error.message}`),await an(u)}finally{Q("")}}}async function Rs(b){if(u){Q("settings-update");try{const S=await _e(`/api/v1/groups/${encodeURIComponent(u)}/settings`,{method:"PUT",body:JSON.stringify({...b,by:"user"})});S.ok||ue(`${S.error.code}: ${S.error.message}`),await Oa(u)}finally{Q("")}}}async function mt(b){var M;if(!u)return;Q("group-state");const S=((M=st.current)==null?void 0:M.scrollTop)??null;try{const Y=await _e(`/api/v1/groups/${encodeURIComponent(u)}/state?state=${encodeURIComponent(b)}&by=user`,{method:"POST"});Y.ok?(E(Z=>Z&&{...Z,state:b}),await wt()):ue(`${Y.error.code}: ${Y.error.message}`)}finally{Q(""),S!==null&&st.current&&(st.current.scrollTop=S)}}async function Kn(b){const S=String(b||"").trim();if(!(!S||!u)){Q(`inbox:${S}`);try{P(""),Fe(S),vt([]),rr(!0);const M=await _e(`/api/v1/groups/${encodeURIComponent(u)}/inbox/${encodeURIComponent(S)}?by=user&limit=200`);if(!M.ok){ue(`${M.error.code}: ${M.error.message}`);return}vt(M.result.messages||[])}finally{Q("")}}}async function Yl(){if(!u||!Ie)return;const b=Ze.length?Ze[Ze.length-1]:null,S=b!=null&&b.id?String(b.id):"";if(S){Q(`inbox-read:${Ie}`);try{P("");const M=await _e(`/api/v1/groups/${encodeURIComponent(u)}/inbox/${encodeURIComponent(Ie)}/read`,{method:"POST",body:JSON.stringify({event_id:S,by:"user"})});if(!M.ok){ue(`${M.error.code}: ${M.error.message}`);return}await Kn(Ie)}finally{Q("")}}}y.useEffect(()=>{wt(),Cn(),$s();const b=window.setInterval(wt,5e3);return()=>window.clearInterval(b)},[]),y.useEffect(()=>{if(Hn.current=u,Pt(""),ut([]),Ft(""),xn(null),jn.current&&(jn.current.value=""),Kt.current&&(window.clearTimeout(Kt.current),Kt.current=null),Hl(),Qt.current=0,Ut(!1),!!u)return ol(u),il(u),Pr(u),()=>{Vn.current&&(Vn.current.close(),Vn.current=null),Hl()}},[u]),y.useEffect(()=>{const b=ne=>{const ce=ne.dataTransfer;if(!ce)return!1;try{if(ce.types&&Array.from(ce.types).includes("Files")||ce.items&&Array.from(ce.items).some(Ee=>Ee.kind==="file"))return!0}catch{}return ce.files&&ce.files.length>0},S=ne=>{b(ne)&&(ne.preventDefault(),Qt.current+=1,Ut(!0))},M=ne=>{b(ne)&&ne.preventDefault()},Y=ne=>{b(ne)&&(Qt.current=Math.max(0,Qt.current-1),Qt.current===0&&Ut(!1))},Z=ne=>{var Ee;if(!b(ne))return;ne.preventDefault(),Qt.current=0,Ut(!1);const ce=Array.from(((Ee=ne.dataTransfer)==null?void 0:Ee.files)||[]);if(ce.length!==0){if(!u){ue("Select a group to attach files.");return}rl(ce)}};return window.addEventListener("dragenter",S,!0),window.addEventListener("dragover",M,!0),window.addEventListener("dragleave",Y,!0),window.addEventListener("drop",Z,!0),()=>{window.removeEventListener("dragenter",S,!0),window.removeEventListener("dragover",M,!0),window.removeEventListener("dragleave",Y,!0),window.removeEventListener("drop",Z,!0)}},[rl,u,ue]),y.useEffect(()=>{if(Ss.current=de,de!=="chat")return;const b=st.current;if(!b)return;const M=b.scrollHeight-b.scrollTop-b.clientHeight<100;Qn.current=M,ze(!M),M&&W(0)},[de]),y.useEffect(()=>{ur.current=L},[L]),y.useEffect(()=>{We==="custom"&&Wt(!0)},[We]);const zr=()=>{const b=st.current;b&&b.scrollTo({top:b.scrollHeight,behavior:"smooth"}),Qn.current=!0,ze(!1),W(0)},Ia=b=>{Cs.current=b.touches[0].clientX,nl.current=b.touches[0].clientY},Jl=b=>{const S=b.changedTouches[0].clientX,M=b.changedTouches[0].clientY,Y=S-Cs.current,Z=M-nl.current;if(Math.abs(Y)>50&&Math.abs(Y)>Math.abs(Z)*1.5){const ne=Sn.indexOf(de);Y>0&&ne>0?oe(Sn[ne-1]):Y<0&&ne<Sn.length-1&&oe(Sn[ne+1])}},Xl=b=>{oe(b)},Ke=y.useMemo(()=>de==="chat"?null:L.find(b=>b.id===de)||null,[de,L]),ct=y.useMemo(()=>nn&&_.find(b=>b.kind==="chat.message"&&String(b.id||"")===nn)||null,[_,nn]),En=y.useMemo(()=>{if(!ct)return null;const S=(ct.data&&typeof ct.data=="object"&&Array.isArray(ct.data.to)?ct.data.to:[]).map(Ee=>String(Ee||"").trim()).filter(Ee=>Ee.length>0),M=S.length>0?S.join(", "):"@all",Y=ct._read_status&&typeof ct._read_status=="object"?ct._read_status:null,Z=Y?Object.keys(Y):pi(ct,L),ne=new Set(Z),ce=L.map(Ee=>String(Ee.id||"")).filter(Ee=>Ee&&ne.has(Ee)).map(Ee=>[Ee,!!(Y&&Y[Ee])]);return{toLabel:M,entries:ce}},[L,ct]);y.useEffect(()=>{nn&&(ct||yn(null))},[ct,nn]);function Ls(){m&&(Wn(m.title||""),Jr(m.topic||""),Rn(!0))}const Aa=_.filter(b=>b.kind==="chat.message"),Ps=!!u&&!Es,pl=!!u&&L.length===0,Os=!!u&&L.length>0&&!sl,Fa=Ps||pl||Os;return l.jsxs("div",{className:`h-full w-full relative overflow-hidden ${o?"bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950":"bg-gradient-to-br from-slate-50 via-white to-slate-100"}`,children:[l.jsx("div",{className:`pointer-events-none absolute inset-0 ${o?"bg-[radial-gradient(900px_600px_at_15%_-10%,rgba(56,189,248,0.16),transparent_60%),radial-gradient(700px_520px_at_95%_0%,rgba(168,85,247,0.12),transparent_55%),radial-gradient(1000px_640px_at_60%_115%,rgba(59,130,246,0.10),transparent_60%)]":"bg-[radial-gradient(900px_600px_at_15%_-10%,rgba(59,130,246,0.12),transparent_60%),radial-gradient(800px_520px_at_95%_0%,rgba(34,211,238,0.10),transparent_55%),radial-gradient(1000px_640px_at_60%_115%,rgba(99,102,241,0.08),transparent_60%)]"}`}),l.jsxs("div",{className:"relative h-full grid grid-cols-1 md:grid-cols-[280px_1fr] transition-all duration-300",children:[l.jsx(_0,{groups:f,selectedGroupId:u,isOpen:je,isDark:o,onSelectGroup:b=>x(b),onCreateGroup:()=>{$e(!0),$s()},onClose:()=>Pe(!1)}),l.jsxs("main",{className:`h-full flex flex-col overflow-hidden ${o?"bg-slate-950/25":"bg-white/75"}`,children:[l.jsx(E0,{isDark:o,theme:c,onThemeChange:d,selectedGroupId:u,groupDoc:m,selectedGroupRunning:sl,actors:L,busy:K,errorMsg:Se,onDismissError:()=>P(""),onOpenSidebar:()=>Pe(!0),onOpenGroupEdit:Ls,onOpenContext:()=>{u&&an(u),O(!0)},onStartGroup:cl,onStopGroup:on,onSetGroupState:mt,onOpenSettings:()=>B(!0),onOpenMobileMenu:()=>Pn(!0)}),u&&l.jsx(x0,{actors:L,activeTab:de,onTabChange:Xl,unreadChatCount:Ce,isDark:o,onAddAgent:()=>{rn(cr?"peer":"foreman"),T(!0)},canAddAgent:!!u}),l.jsxs("div",{ref:Pa,className:`relative flex-1 min-h-0 flex flex-col overflow-hidden transition-opacity duration-150 ${be?"opacity-0":"opacity-100"}`,onTouchStart:Ia,onTouchEnd:Jl,children:[l.jsx("div",{className:`absolute inset-0 flex min-h-0 flex-col ${de==="chat"?"":"invisible pointer-events-none"}`,"aria-hidden":de!=="chat",children:l.jsx(af,{isDark:o,isSmallScreen:ee,selectedGroupId:u,actors:L,busy:K,showSetupCard:Fa,needsScope:Ps,needsActors:pl,needsStart:Os,hasForeman:cr,onAddAgent:()=>{rn(cr?"peer":"foreman"),T(!0)},onStartGroup:cl,chatMessages:Aa,scrollRef:st,showScrollButton:Oe,chatUnreadCount:Ce,onScrollButtonClick:zr,onScrollChange:b=>{Qn.current=b,ze(!b),b&&W(0)},onReply:Mr,onShowRecipients:b=>yn(b),replyTarget:tn,onCancelReply:()=>xn(null),toTokens:Gt,onToggleRecipient:Or,onClearRecipients:()=>Ft(""),composerFiles:et,onRemoveComposerFile:b=>ut(S=>S.filter((M,Y)=>Y!==b)),appendComposerFiles:rl,fileInputRef:jn,composerRef:Tr,composerText:gn,setComposerText:Pt,onSendMessage:dr,showMentionMenu:lr,setShowMentionMenu:On,mentionSuggestions:Nn,mentionSelectedIndex:In,setMentionSelectedIndex:sr,setMentionFilter:zn,onAppendRecipientToken:b=>Ft(S=>S?S+", "+b:b)})}),de!=="chat"&&l.jsx("div",{className:"absolute inset-0 flex min-h-0 flex-col",children:l.jsx(V0,{actor:Ke,groupId:u,termEpoch:Ke&&Me[Ke.id]||0,busy:K,isDark:o,onToggleEnabled:()=>{Ke&&za(Ke)},onRelaunch:()=>{(async()=>{if(!(!u||!Ke)){Q(`actor-relaunch:${Ke.id}`);try{const b=await _e(`/api/v1/groups/${encodeURIComponent(u)}/actors/${encodeURIComponent(Ke.id)}/restart?by=user`,{method:"POST"});b.ok||ue(`${b.error.code}: ${b.error.message}`),await jt(),Te(S=>({...S,[Ke.id]:(S[Ke.id]||0)+1}))}finally{Q("")}}})()},onEdit:()=>{Ke&&ul(Ke)},onRemove:()=>{Ke&&Ql(Ke)},onInbox:()=>{Ke&&Kn(Ke.id)},onStatusChange:()=>{jt()}})})]})]})]}),l.jsx($0,{isOpen:Ln,isDark:o,selectedGroupId:u,groupDoc:m,selectedGroupRunning:sl,actors:L,busy:K,onClose:()=>Pn(!1),onToggleTheme:()=>d(o?"light":"dark"),onOpenSearch:()=>J(!0),onOpenContext:()=>{u&&an(u),O(!0)},onOpenSettings:()=>B(!0),onOpenGroupEdit:Ls,onStartGroup:cl,onStopGroup:on,onSetGroupState:mt}),l.jsx(N0,{isOpen:q,onClose:()=>J(!1),groupId:u,actors:L,isDark:o,onReply:b=>{Mr(b),oe("chat"),J(!1),window.setTimeout(()=>{var S;return(S=Tr.current)==null?void 0:S.focus()},0)}}),l.jsx(y0,{isOpen:w,onClose:()=>O(!1),groupId:u,context:re,onUpdateVision:fl,onUpdateSketch:ml,busy:K==="context-update",isDark:o}),l.jsx(v0,{isOpen:xe,onClose:()=>B(!1),settings:H,onUpdateSettings:Rs,busy:K.startsWith("settings"),isDark:o,groupId:u}),l.jsx(I0,{isOpen:!!En,isDark:o,isSmallScreen:ee,toLabel:(En==null?void 0:En.toLabel)||"",entries:(En==null?void 0:En.entries)||[],onClose:()=>yn(null)}),l.jsx(z0,{isOpen:qe,isDark:o,actorId:Ie,messages:Ze,busy:K,onClose:()=>rr(!1),onMarkAllRead:Yl}),l.jsx(O0,{isOpen:At,isDark:o,busy:K,title:Bn,topic:ir,onChangeTitle:Wn,onChangeTopic:Jr,onSave:dl,onCancel:()=>Rn(!1),onDelete:Ts}),l.jsx(P0,{isOpen:!!rt,isDark:o,busy:K,actorId:(rt==null?void 0:rt.id)||"",runtimes:ie,runtime:_r,onChangeRuntime:bn,command:or,onChangeCommand:wn,onSave:Kl,onCancel:()=>hn(null)}),l.jsx(L0,{isOpen:ve,isDark:o,busy:K,dirSuggestions:ln,dirItems:Fl,currentDir:Dr,parentDir:Ul,showDirBrowser:pe,createGroupPath:Xr,setCreateGroupPath:$r,createGroupName:Ht,setCreateGroupName:kr,onFetchDirContents:ks,onCreateGroup:Gl,onClose:()=>$e(!1),onCancelAndReset:()=>{$e(!1),$r(""),kr(""),qr([]),Re(!1)}}),l.jsx(R0,{isOpen:ye,isDark:o,busy:K,hasForeman:cr,runtimes:ie,suggestedActorId:_s,newActorId:Bt,setNewActorId:An,newActorRole:Fn,setNewActorRole:rn,newActorRuntime:We,setNewActorRuntime:yt,newActorCommand:Ct,setNewActorCommand:Et,showAdvancedActor:ar,setShowAdvancedActor:Wt,addActorError:vn,setAddActorError:Vt,canAddActor:Vl,addActorDisabledReason:al,onAddActor:Ma,onClose:()=>T(!1),onCancelAndReset:()=>{T(!1),An(""),Et(""),rn("peer"),Wt(!1),Vt("")}}),l.jsx(S0,{isOpen:Er,isDark:o,maxFileMb:hi})]})}g0.createRoot(document.getElementById("root")).render(l.jsx(c0.StrictMode,{children:l.jsx(cf,{})}));export{Ns as R,ff as a,k as c,df as g,l as j,y as r};
